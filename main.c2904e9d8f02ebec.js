(self.webpackChunkapp_web_gda_core_16=self.webpackChunkapp_web_gda_core_16||[]).push([[179],{58:(lt,dt,ye)=>{"use strict";ye.d(dt,{BH:()=>At,G6:()=>Ge,L:()=>nt,LL:()=>oe,Pz:()=>vt,Sg:()=>gn,UG:()=>Xt,ZB:()=>Ye,ZR:()=>Ce,aH:()=>on,b$:()=>Jt,eu:()=>G,hl:()=>$,jU:()=>we,m9:()=>Hr,ne:()=>kr,pd:()=>Or,r3:()=>Fn,ru:()=>tn,tV:()=>fe,uI:()=>an,vZ:()=>Tt,w1:()=>vr,xO:()=>Mn,xb:()=>Er,z$:()=>it,zd:()=>jr});const q=function(V){const P=[];let L=0;for(let ve=0;ve<V.length;ve++){let ne=V.charCodeAt(ve);ne<128?P[L++]=ne:ne<2048?(P[L++]=ne>>6|192,P[L++]=63&ne|128):55296==(64512&ne)&&ve+1<V.length&&56320==(64512&V.charCodeAt(ve+1))?(ne=65536+((1023&ne)<<10)+(1023&V.charCodeAt(++ve)),P[L++]=ne>>18|240,P[L++]=ne>>12&63|128,P[L++]=ne>>6&63|128,P[L++]=63&ne|128):(P[L++]=ne>>12|224,P[L++]=ne>>6&63|128,P[L++]=63&ne|128)}return P},tt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,P){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const L=P?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let ne=0;ne<V.length;ne+=3){const me=V[ne],ht=ne+1<V.length,un=ht?V[ne+1]:0,bt=ne+2<V.length,Ir=bt?V[ne+2]:0;let cn=(15&un)<<2|Ir>>6,dn=63&Ir;bt||(dn=64,ht||(cn=64)),ve.push(L[me>>2],L[(3&me)<<4|un>>4],L[cn],L[dn])}return ve.join("")},encodeString(V,P){return this.HAS_NATIVE_SUPPORT&&!P?btoa(V):this.encodeByteArray(q(V),P)},decodeString(V,P){return this.HAS_NATIVE_SUPPORT&&!P?atob(V):function(V){const P=[];let L=0,ve=0;for(;L<V.length;){const ne=V[L++];if(ne<128)P[ve++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const me=V[L++];P[ve++]=String.fromCharCode((31&ne)<<6|63&me)}else if(ne>239&&ne<365){const bt=((7&ne)<<18|(63&V[L++])<<12|(63&V[L++])<<6|63&V[L++])-65536;P[ve++]=String.fromCharCode(55296+(bt>>10)),P[ve++]=String.fromCharCode(56320+(1023&bt))}else{const me=V[L++],ht=V[L++];P[ve++]=String.fromCharCode((15&ne)<<12|(63&me)<<6|63&ht)}}return P.join("")}(this.decodeStringToByteArray(V,P))},decodeStringToByteArray(V,P){this.init_();const L=P?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let ne=0;ne<V.length;){const me=L[V.charAt(ne++)],un=ne<V.length?L[V.charAt(ne)]:0;++ne;const Ir=ne<V.length?L[V.charAt(ne)]:64;++ne;const Ze=ne<V.length?L[V.charAt(ne)]:64;if(++ne,null==me||null==un||null==Ir||null==Ze)throw new rt;ve.push(me<<2|un>>4),64!==Ir&&(ve.push(un<<4&240|Ir>>2),64!==Ze&&ve.push(Ir<<6&192|Ze))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}};class rt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nt=function(V){return function(V){const P=q(V);return tt.encodeByteArray(P,!0)}(V).replace(/\./g,"")},fe=function(V){try{return tt.decodeString(V,!0)}catch(P){console.error("base64Decode failed: ",P)}return null};function Ye(V,P){if(!(P instanceof Object))return P;switch(P.constructor){case Date:return new Date(P.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return P}for(const L in P)!P.hasOwnProperty(L)||!Dt(L)||(V[L]=Ye(V[L],P[L]));return V}function Dt(V){return"__proto__"!==V}const He=()=>{try{return function Ot(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const V=process.env.__FIREBASE_DEFAULTS__;return V?JSON.parse(V):void 0})()||(()=>{if(typeof document>"u")return;let V;try{V=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const P=V&&fe(V[1]);return P&&JSON.parse(P)})()}catch(V){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${V}`)}},on=()=>{var V;return null===(V=He())||void 0===V?void 0:V.config},vt=V=>{var P;return null===(P=He())||void 0===P?void 0:P[`_${V}`]};class At{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((P,L)=>{this.resolve=P,this.reject=L})}wrapCallback(P){return(L,ve)=>{L?this.reject(L):this.resolve(ve),"function"==typeof P&&(this.promise.catch(()=>{}),1===P.length?P(L):P(L,ve))}}}function gn(V,P){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=P||"demo-project",ne=V.iat||0,me=V.sub||V.user_id;if(!me)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ht=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:ne,exp:ne+3600,auth_time:ne,sub:me,user_id:me,firebase:{sign_in_provider:"custom",identities:{}}},V);return[nt(JSON.stringify({alg:"none",type:"JWT"})),nt(JSON.stringify(ht)),""].join(".")}function it(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function an(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function Xt(){var V;const P=null===(V=He())||void 0===V?void 0:V.forceEnvironment;if("node"===P)return!0;if("browser"===P)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function we(){return"object"==typeof self&&self.self===self}function tn(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function Jt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function vr(){const V=it();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function Ge(){return!Xt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $(){try{return"object"==typeof indexedDB}catch{return!1}}function G(){return new Promise((V,P)=>{try{let L=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(ve);ne.onsuccess=()=>{ne.result.close(),L||self.indexedDB.deleteDatabase(ve),V(!0)},ne.onupgradeneeded=()=>{L=!1},ne.onerror=()=>{var me;P((null===(me=ne.error)||void 0===me?void 0:me.message)||"")}}catch(L){P(L)}})}class Ce extends Error{constructor(P,L,ve){super(L),this.code=P,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,Ce.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oe.prototype.create)}}class oe{constructor(P,L,ve){this.service=P,this.serviceName=L,this.errors=ve}create(P,...L){const ve=L[0]||{},ne=`${this.service}/${P}`,me=this.errors[P],ht=me?function De(V,P){return V.replace(kt,(L,ve)=>{const ne=P[ve];return null!=ne?String(ne):`<${ve}?>`})}(me,ve):"Error";return new Ce(ne,`${this.serviceName}: ${ht} (${ne}).`,ve)}}const kt=/\{\$([^}]+)}/g;function Fn(V,P){return Object.prototype.hasOwnProperty.call(V,P)}function Er(V){for(const P in V)if(Object.prototype.hasOwnProperty.call(V,P))return!1;return!0}function Tt(V,P){if(V===P)return!0;const L=Object.keys(V),ve=Object.keys(P);for(const ne of L){if(!ve.includes(ne))return!1;const me=V[ne],ht=P[ne];if(Ft(me)&&Ft(ht)){if(!Tt(me,ht))return!1}else if(me!==ht)return!1}for(const ne of ve)if(!L.includes(ne))return!1;return!0}function Ft(V){return null!==V&&"object"==typeof V}function Mn(V){const P=[];for(const[L,ve]of Object.entries(V))Array.isArray(ve)?ve.forEach(ne=>{P.push(encodeURIComponent(L)+"="+encodeURIComponent(ne))}):P.push(encodeURIComponent(L)+"="+encodeURIComponent(ve));return P.length?"&"+P.join("&"):""}function jr(V){const P={};return V.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[ne,me]=ve.split("=");P[decodeURIComponent(ne)]=decodeURIComponent(me)}}),P}function Or(V){const P=V.indexOf("?");if(!P)return"";const L=V.indexOf("#",P);return V.substring(P,L>0?L:void 0)}function kr(V,P){const L=new Ii(V,P);return L.subscribe.bind(L)}class Ii{constructor(P,L){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=L,this.task.then(()=>{P(this)}).catch(ve=>{this.error(ve)})}next(P){this.forEachObserver(L=>{L.next(P)})}error(P){this.forEachObserver(L=>{L.error(P)}),this.close(P)}complete(){this.forEachObserver(P=>{P.complete()}),this.close()}subscribe(P,L,ve){let ne;if(void 0===P&&void 0===L&&void 0===ve)throw new Error("Missing Observer.");ne=function wi(V,P){if("object"!=typeof V||null===V)return!1;for(const L of P)if(L in V&&"function"==typeof V[L])return!0;return!1}(P,["next","error","complete"])?P:{next:P,error:L,complete:ve},void 0===ne.next&&(ne.next=qn),void 0===ne.error&&(ne.error=qn),void 0===ne.complete&&(ne.complete=qn);const me=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch{}}),this.observers.push(ne),me}unsubscribeOne(P){void 0===this.observers||void 0===this.observers[P]||(delete this.observers[P],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(P){if(!this.finalized)for(let L=0;L<this.observers.length;L++)this.sendOne(L,P)}sendOne(P,L){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[P])try{L(this.observers[P])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(P){this.finalized||(this.finalized=!0,void 0!==P&&(this.finalError=P),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qn(){}function Hr(V){return V&&V._delegate?V._delegate:V}},521:(lt,dt,ye)=>{"use strict";function D(n){return"function"==typeof n}function Ve(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Te=Ve(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function q(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class je{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(D(r))try{r()}catch(s){e=s instanceof Te?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{yt(s)}catch(o){e=e??[],o instanceof Te?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Te(e)}}add(e){var t;if(e&&e!==this)if(this.closed)yt(e);else{if(e instanceof je){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&q(t,e)}remove(e){const{_finalizers:t}=this;t&&q(t,e),e instanceof je&&e._removeParent(this)}}je.EMPTY=(()=>{const n=new je;return n.closed=!0,n})();const tt=je.EMPTY;function rt(n){return n instanceof je||n&&"closed"in n&&D(n.remove)&&D(n.add)&&D(n.unsubscribe)}function yt(n){D(n)?n():n.unsubscribe()}const nt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},fe={setTimeout(n,e,...t){const{delegate:r}=fe;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=fe;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function xe(n){fe.setTimeout(()=>{const{onUnhandledError:e}=nt;if(!e)throw n;e(n)})}function Ye(){}const Dt=wt("C",void 0,void 0);function wt(n,e,t){return{kind:n,value:e,error:t}}let gt=null;function He(n){if(nt.useDeprecatedSynchronousErrorHandling){const e=!gt;if(e&&(gt={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=gt;if(gt=null,t)throw r}}else n()}class pn extends je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,rt(e)&&e.add(this)):this.destination=we}static create(e,t,r){return new gn(e,t,r)}next(e){this.isStopped?Xt(function Gt(n){return wt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Xt(function Ot(n){return wt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Xt(Dt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const on=Function.prototype.bind;function vt(n,e){return on.call(n,e)}class At{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){it(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){it(r)}else it(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){it(t)}}}class gn extends pn{constructor(e,t,r){let i;if(super(),D(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&nt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&vt(e.next,s),error:e.error&&vt(e.error,s),complete:e.complete&&vt(e.complete,s)}):i=e}this.destination=new At(i)}}function it(n){nt.useDeprecatedSynchronousErrorHandling?function Rt(n){nt.useDeprecatedSynchronousErrorHandling&&gt&&(gt.errorThrown=!0,gt.error=n)}(n):xe(n)}function Xt(n,e){const{onStoppedNotification:t}=nt;t&&fe.setTimeout(()=>t(n,e))}const we={closed:!0,next:Ye,error:function an(n){throw n},complete:Ye},tn="function"==typeof Symbol&&Symbol.observable||"@@observable";function Jt(n){return n}function vr(n){return 0===n.length?Jt:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let ue=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function $(n){return n&&n instanceof pn||function Ge(n){return n&&D(n.next)&&D(n.error)&&D(n.complete)}(n)&&rt(n)}(t)?t:new gn(t,r,i);return He(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Se(r))((i,s)=>{const o=new gn({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[tn](){return this}pipe(...t){return vr(t)(this)}toPromise(t){return new(t=Se(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Se(n){var e;return null!==(e=n??nt.Promise)&&void 0!==e?e:Promise}const G=Ve(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let te=(()=>{class n extends ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ce(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new G}next(t){He(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){He(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){He(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?tt:(this.currentObservers=null,s.push(t),new je(()=>{this.currentObservers=null,q(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new ue;return t.source=this,t}}return n.create=(e,t)=>new ce(e,t),n})();class ce extends te{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:tt}}function Ce(n){return D(n?.lift)}function oe(n){return e=>{if(Ce(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function De(n,e,t,r,i){return new kt(n,e,t,r,i)}class kt extends pn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ze(n,e){return oe((t,r)=>{let i=0;t.subscribe(De(r,s=>{r.next(n.call(e,s,i++))}))})}var st=ye(582);const Pt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Dn(n){return D(n?.then)}function Xr(n){return D(n[tn])}function mn(n){return Symbol.asyncIterator&&D(n?.[Symbol.asyncIterator])}function Yn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const gr=function Fn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Er(n){return D(n?.[gr])}function It(n){return(0,st.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,st.qq)(t.read());if(i)return yield(0,st.qq)(void 0);yield yield(0,st.qq)(r)}}finally{t.releaseLock()}})}function Tt(n){return D(n?.getReader)}function Ft(n){if(n instanceof ue)return n;if(null!=n){if(Xr(n))return function $n(n){return new ue(e=>{const t=n[tn]();if(D(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Pt(n))return function Mn(n){return new ue(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Dn(n))return function jr(n){return new ue(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,xe)})}(n);if(mn(n))return bs(n);if(Er(n))return function Or(n){return new ue(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Tt(n))return function kr(n){return bs(It(n))}(n)}throw Yn(n)}function bs(n){return new ue(e=>{(function Ii(n,e){var t,r,i,s;return(0,st.mG)(this,void 0,void 0,function*(){try{for(t=(0,st.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function ir(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function qn(n,e,t=1/0){return D(e)?qn((r,i)=>ze((s,o)=>e(r,s,i,o))(Ft(n(r,i))),t):("number"==typeof e&&(t=e),oe((r,i)=>function wi(n,e,t,r,i,s,o,a){const u=[];let d=0,p=0,m=!1;const v=()=>{m&&!u.length&&!d&&e.complete()},T=R=>d<r?S(R):u.push(R),S=R=>{s&&e.next(R),d++;let M=!1;Ft(t(R,p++)).subscribe(De(e,X=>{i?.(X),s?T(X):e.next(X)},()=>{M=!0},void 0,()=>{if(M)try{for(d--;u.length&&d<r;){const X=u.shift();o?ir(e,o,()=>S(X)):S(X)}v()}catch(X){e.error(X)}}))};return n.subscribe(De(e,T,()=>{m=!0,v()})),()=>{a?.()}}(r,i,n,t)))}function Ti(n=1/0){return qn(Jt,n)}const _t=new ue(n=>n.complete());function Jr(n){return n[n.length-1]}function bi(n){return D(Jr(n))?n.pop():void 0}function _n(n){return function zi(n){return n&&D(n.schedule)}(Jr(n))?n.pop():void 0}function $r(n,e=0){return oe((t,r)=>{t.subscribe(De(r,i=>ir(r,n,()=>r.next(i),e),()=>ir(r,n,()=>r.complete(),e),i=>ir(r,n,()=>r.error(i),e)))})}function ln(n,e=0){return oe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Hr(n,e){if(!n)throw new Error("Iterable cannot be null");return new ue(t=>{ir(t,e,()=>{const r=n[Symbol.asyncIterator]();ir(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function L(n,e){return e?function P(n,e){if(null!=n){if(Xr(n))return function En(n,e){return Ft(n).pipe(ln(e),$r(e))}(n,e);if(Pt(n))return function Gi(n,e){return new ue(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Dn(n))return function Ha(n,e){return Ft(n).pipe(ln(e),$r(e))}(n,e);if(mn(n))return Hr(n,e);if(Er(n))return function ra(n,e){return new ue(t=>{let r;return ir(t,e,()=>{r=n[gr](),ir(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>D(r?.return)&&r.return()})}(n,e);if(Tt(n))return function V(n,e){return Hr(It(n),e)}(n,e)}throw Yn(n)}(n,e):Ft(n)}function ve(...n){const e=_n(n),t=function bo(n,e){return"number"==typeof Jr(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Ft(r[0]):Ti(t)(L(r,e)):_t}class ne extends te{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function me(...n){return L(n,_n(n))}function ht(n={}){const{connector:e=(()=>new te),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,u,d=0,p=!1,m=!1;const v=()=>{a?.unsubscribe(),a=void 0},T=()=>{v(),o=u=void 0,p=m=!1},S=()=>{const R=o;T(),R?.unsubscribe()};return oe((R,M)=>{d++,!m&&!p&&v();const X=u=u??e();M.add(()=>{d--,0===d&&!m&&!p&&(a=un(S,i))}),X.subscribe(M),!o&&d>0&&(o=new gn({next:j=>X.next(j),error:j=>{m=!0,v(),a=un(T,t,j),X.error(j)},complete:()=>{p=!0,v(),a=un(T,r),X.complete()}}),Ft(R).subscribe(o))})(s)}}function un(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new gn({next:()=>{r.unsubscribe(),n()}});return Ft(e(...t)).subscribe(r)}function bt(n,e){return oe((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(De(r,u=>{i?.unsubscribe();let d=0;const p=s++;Ft(n(u,p)).subscribe(i=De(r,m=>r.next(e?e(u,m,p,d++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ir(n,e=Jt){return n=n??sr,oe((t,r)=>{let i,s=!0;t.subscribe(De(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function sr(n,e){return n===e}function Ze(n){for(let e in n)if(n[e]===Ze)return e;throw Error("Could not find renamed property on target object.")}function cn(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function dn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(dn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Cs(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const eo=Ze({__forward_ref__:Ze});function bn(n){return n.__forward_ref__=bn,n.toString=function(){return dn(this())},n}function Et(n){return cs(n)?n():n}function cs(n){return"function"==typeof n&&n.hasOwnProperty(eo)&&n.__forward_ref__===bn}function ls(n){return n&&!!n.\u0275providers}const Ci="https://g.co/ng/security#xss";class O extends Error{constructor(e,t){super(function K(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function ie(n){return"string"==typeof n?n:null==n?"":String(n)}function xn(n,e){throw new O(-201,!1)}function C(n,e){null==n&&function w(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ie(n){return{providers:n.providers||[],imports:n.imports||[]}}function pe(n){return Le(n,An)||Le(n,or)}function Le(n,e){return n.hasOwnProperty(e)?n[e]:null}function Ht(n){return n&&(n.hasOwnProperty(hn)||n.hasOwnProperty(Hn))?n[hn]:null}const An=Ze({\u0275prov:Ze}),hn=Ze({\u0275inj:Ze}),or=Ze({ngInjectableDef:Ze}),Hn=Ze({ngInjectorDef:Ze});var ft=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ft||{});let li;function Fe(n){const e=li;return li=n,e}function wn(n,e,t){const r=pe(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&ft.Optional?null:void 0!==e?e:void xn(dn(n))}const Kt=globalThis;class Ue{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ro={},rc="__NG_DI_FLAG__",Wa="ngTempTokenPath",io=/\n/gm,xm="__source";let hi;function Bs(n){const e=hi;return hi=n,e}function bI(n,e=ft.Default){if(void 0===hi)throw new O(-203,!1);return null===hi?wn(n,void 0,e):hi.get(n,e&ft.Optional?null:void 0,e)}function Ne(n,e=ft.Default){return(function ei(){return li}()||bI)(Et(n),e)}function et(n,e=ft.Default){return Ne(n,yl(e))}function yl(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Jh(n){const e=[];for(let t=0;t<n.length;t++){const r=Et(n[t]);if(Array.isArray(r)){if(0===r.length)throw new O(900,!1);let i,s=ft.Default;for(let o=0;o<r.length;o++){const a=r[o],u=sa(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(Ne(i,s))}else e.push(Ne(r))}return e}function ia(n,e){return n[rc]=e,n.prototype[rc]=e,n}function sa(n){return n[rc]}function Wi(n){return{toString:n}.toString()}var ef=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ef||{}),Zi=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Zi||{});const Fr={},rn=[],so=Ze({\u0275cmp:Ze}),vl=Ze({\u0275dir:Ze}),El=Ze({\u0275pipe:Ze}),tf=Ze({\u0275mod:Ze}),oo=Ze({\u0275fac:Ze}),js=Ze({__NG_ELEMENT_ID__:Ze}),Om=Ze({__NG_ENV_ID__:Ze});function sc(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Il(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];wl(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function nf(n){return 3===n||4===n||6===n}function wl(n){return 64===n.charCodeAt(0)}function ni(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||rf(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function rf(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const km="ng-template";function sf(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==sc(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function oc(n){return 4===n.type&&n.value!==km}function Fm(n,e,t){return e===(4!==n.type||t?n.value:km)}function Lm(n,e,t){let r=4;const i=n.attrs||[],s=function bl(n){for(let e=0;e<n.length;e++)if(nf(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Fm(n,u,t)||""===u&&1===e.length){if(Ds(r))return!1;o=!0}}else{const d=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!sf(n.attrs,d,t)){if(Ds(r))return!1;o=!0}continue}const m=af(8&r?"class":u,i,oc(n),t);if(-1===m){if(Ds(r))return!1;o=!0;continue}if(""!==d){let v;v=m>s?"":i[m+1].toLowerCase();const T=8&r?v:null;if(T&&-1!==sc(T,d,0)||2&r&&d!==v){if(Ds(r))return!1;o=!0}}}}else{if(!o&&!Ds(r)&&!Ds(u))return!1;if(o&&Ds(u))continue;o=!1,r=u|1&r}}return Ds(r)||o}function Ds(n){return 0==(1&n)}function af(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function cf(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Tl(n,e,t=!1){for(let r=0;r<e.length;r++)if(Lm(n,e[r],t))return!0;return!1}function Cl(n,e){return n?":not("+e.trim()+")":e}function Um(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Ds(o)&&(e+=Cl(s,i),i=""),r=o,s=s||!Ds(r);t++}return""!==i&&(e+=Cl(s,i)),e}function Ki(n){return Wi(()=>{const e=Sl(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ef.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Zi.Emulated,styles:n.styles||rn,_:null,schemas:n.schemas||null,tView:null,id:""};$m(t);const r=n.dependencies;return t.directiveDefs=Za(r,!1),t.pipeDefs=Za(r,!0),t.id=function hf(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function df(n){return en(n)||Ar(n)}function jm(n){return null!==n}function ri(n){return Wi(()=>({type:n.type,bootstrap:n.bootstrap||rn,declarations:n.declarations||rn,imports:n.imports||rn,exports:n.exports||rn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Al(n,e){if(null==n)return Fr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function Mt(n){return Wi(()=>{const e=Sl(n);return $m(e),e})}function en(n){return n[so]||null}function Ar(n){return n[vl]||null}function Gr(n){return n[El]||null}function fi(n,e){const t=n[tf]||null;if(!t&&!0===e)throw new Error(`Type ${dn(n)} does not have '\u0275mod' property.`);return t}function Sl(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Fr,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||rn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Al(n.inputs,e),outputs:Al(n.outputs)}}function $m(n){n.features?.forEach(e=>e(n))}function Za(n,e){if(!n)return null;const t=e?Gr:df;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(jm)}const ur=0,Je=1,Vt=2,Ln=3,As=4,oa=5,si=6,Do=7,mr=8,Ao=9,So=10,Lt=11,ac=12,Rl=13,Ka=14,Xn=15,uc=16,Ro=17,$s=18,aa=19,Hm=20,Hs=21,uo=22,ua=23,cc=24,Qt=25,ff=1,pf=2,hs=7,Ss=9,qr=11;function Ai(n){return Array.isArray(n)&&"object"==typeof n[ff]}function pi(n){return Array.isArray(n)&&!0===n[ff]}function gf(n){return 0!=(4&n.flags)}function Ya(n){return n.componentOffset>-1}function mf(n){return 1==(1&n.flags)}function zs(n){return!!n.template}function lc(n){return 0!=(512&n[Vt])}function ca(n,e){return n.hasOwnProperty(oo)?n[oo]:null}let wr=null,yf=!1;function Sr(n){const e=wr;return wr=n,e}const qm={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Ja(n){if(!fc(n)||n.dirty){if(!n.producerMustRecompute(n)&&!Nl(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function Km(n){n.dirty=!0,function Zm(n){if(void 0===n.liveConsumerNode)return;const e=yf;yf=!0;try{for(const t of n.liveConsumerNode)t.dirty||Km(t)}finally{yf=e}}(n),n.consumerMarkedDirty?.(n)}function dc(n){return n&&(n.nextProducerIndex=0),Sr(n)}function vf(n,e){if(Sr(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(fc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)hc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Nl(n){co(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Ja(t),r!==t.version))return!0}return!1}function Qm(n){if(co(n),fc(n))for(let e=0;e<n.producerNode.length;e++)hc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function hc(n,e){if(function Ef(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),co(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)hc(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];co(i),i.producerIndexOfThis[r]=e}}function fc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function co(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let e_=null;const i_=()=>{},FI=(()=>({...qm,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:i_}))();class LI{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function fs(){return o_}function o_(n){return n.type.prototype.ngOnChanges&&(n.setInput=a_),VI}function VI(){const n=c_(this),e=n?.current;if(e){const t=n.previous;if(t===Fr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function a_(n,e,t,r){const i=this.declaredInputs[t],s=c_(n)||function UI(n,e){return n[u_]=e}(n,{previous:Fr,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new LI(u&&u.currentValue,e,a===Fr),n[r]=e}fs.ngInherit=!0;const u_="__ngSimpleChanges__";function c_(n){return n[u_]||null}const ps=function(n,e,t){};function Vn(n){for(;Array.isArray(n);)n=n[ur];return n}function la(n,e){return Vn(e[n])}function oi(n,e){return Vn(e[n.index])}function Fl(n,e){return n.data[e]}function Rr(n,e){const t=e[n];return Ai(t)?t:t[ur]}function Mo(n,e){return null==e?null:n[e]}function Ll(n){n[Ro]=0}function d_(n){1024&n[Vt]||(n[Vt]|=1024,f_(n,1))}function h_(n){1024&n[Vt]&&(n[Vt]&=-1025,f_(n,-1))}function f_(n,e){let t=n[Ln];if(null===t)return;t[oa]+=e;let r=t;for(t=t[Ln];null!==t&&(1===e&&1===r[oa]||-1===e&&0===r[oa]);)t[oa]+=e,r=t,t=t[Ln]}const Ct={lFrame:Lf(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function m_(){return Ct.bindingsEnabled}function Ae(){return Ct.lFrame.lView}function fn(){return Ct.lFrame.tView}function Pr(){let n=__();for(;null!==n&&64===n.type;)n=n.parent;return n}function __(){return Ct.lFrame.currentTNode}function gs(n,e){const t=Ct.lFrame;t.currentTNode=n,t.isParent=e}function Pf(){return Ct.lFrame.isParent}function Rs(){return Ct.lFrame.bindingIndex}function xo(){return Ct.lFrame.bindingIndex++}function lo(n){const e=Ct.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function v_(n,e){const t=Ct.lFrame;t.bindingIndex=t.bindingRootIndex=n,Bl(e)}function Bl(n){Ct.lFrame.currentDirectiveIndex=n}function E_(){return Ct.lFrame.currentQueryIndex}function kf(n){Ct.lFrame.currentQueryIndex=n}function QI(n){const e=n[Je];return 2===e.type?e.declTNode:1===e.type?n[si]:null}function jl(n,e,t){if(t&ft.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&ft.Host||(i=QI(s),null===i||(s=s[Ka],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Ct.lFrame=I_();return r.currentTNode=e,r.lView=n,!0}function Ff(n){const e=I_(),t=n[Je];Ct.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function I_(){const n=Ct.lFrame,e=null===n?null:n.child;return null===e?Lf(n):e}function Lf(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function w_(){const n=Ct.lFrame;return Ct.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ic=w_;function Vf(){const n=w_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function gi(){return Ct.lFrame.selectedIndex}function da(n){Ct.lFrame.selectedIndex=n}function Jn(){const n=Ct.lFrame;return Fl(n.tView,n.selectedIndex)}let b_=!0;function $l(){return b_}function No(n){b_=n}function Hl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:p}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),null!=p&&(n.destroyHooks??=[]).push(t,p)}}function zl(n,e,t){D_(n,e,3,t)}function Gl(n,e,t,r){(3&n[Vt])===t&&D_(n,e,t,r)}function Bf(n,e){let t=n[Vt];(3&t)===e&&(t&=8191,t+=1,n[Vt]=t)}function D_(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&n[Ro]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[Ro]+=65536),(a<s||-1==s)&&(jf(n,t,e,u),n[Ro]=(4294901760&n[Ro])+u+2),u++}function ql(n,e){ps(4,n,e);const t=Sr(null);try{e.call(n)}finally{Sr(t),ps(5,n,e)}}function jf(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[Vt]>>13<n[Ro]>>16&&(3&n[Vt])===e&&(n[Vt]+=8192,ql(a,s)):ql(a,s)}const nu=-1;class ha{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function ru(n){return n!==nu}function iu(n){return 32767&n}function wc(n,e){let t=function R_(n){return n>>16}(n),r=e;for(;t>0;)r=r[Ka],t--;return r}let Hf=!0;function Wl(n){const e=Hf;return Hf=n,e}const P_=255,zf=5;let ow=0;const ho={};function qs(n,e){const t=M_(n,e);if(-1!==t)return t;const r=e[Je];r.firstCreatePass&&(n.injectorIndex=e.length,Gf(r.data,n),Gf(e,null),Gf(r.blueprint,null));const i=su(n,e),s=n.injectorIndex;if(ru(i)){const o=iu(i),a=wc(i,e),u=a[Je].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|u[o+d]}return e[s+8]=i,s}function Gf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function M_(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function su(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=V_(i),null===r)return nu;if(t++,i=i[Ka],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return nu}function qf(n,e,t){!function aw(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(js)&&(r=t[js]),null==r&&(r=t[js]=ow++);const i=r&P_;e.data[n+(i>>zf)]|=1<<i}(n,e,t)}function x_(n,e,t){if(t&ft.Optional||void 0!==n)return n;xn()}function N_(n,e,t,r){if(t&ft.Optional&&void 0===r&&(r=null),!(t&(ft.Self|ft.Host))){const i=n[Ao],s=Fe(void 0);try{return i?i.get(e,r,t&ft.Optional):wn(e,r,t&ft.Optional)}finally{Fe(s)}}return x_(r,0,t)}function Zl(n,e,t,r=ft.Default,i){if(null!==n){if(2048&e[Vt]&&!(r&ft.Self)){const o=function Zf(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[Vt]&&!(512&o[Vt]);){const a=O_(s,o,t,r|ft.Self,ho);if(a!==ho)return a;let u=s.parent;if(!u){const d=o[Hm];if(d){const p=d.get(t,ho,r);if(p!==ho)return p}u=V_(o),o=o[Ka]}s=u}return i}(n,e,t,r,ho);if(o!==ho)return o}const s=O_(n,e,t,r,ho);if(s!==ho)return s}return N_(e,t,r,i)}function O_(n,e,t,r,i){const s=function cw(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(js)?n[js]:void 0;return"number"==typeof e?e>=0?e&P_:lw:e}(t);if("function"==typeof s){if(!jl(e,n,r))return r&ft.Host?x_(i,0,r):N_(e,t,r,i);try{let o;if(o=s(r),null!=o||r&ft.Optional)return o;xn()}finally{Ic()}}else if("number"==typeof s){let o=null,a=M_(n,e),u=nu,d=r&ft.Host?e[Xn][si]:null;for((-1===a||r&ft.SkipSelf)&&(u=-1===a?su(n,e):e[a+8],u!==nu&&F_(r,!1)?(o=e[Je],a=iu(u),e=wc(u,e)):a=-1);-1!==a;){const p=e[Je];if(k_(s,a,p.data)){const m=uw(a,e,t,o,r,d);if(m!==ho)return m}u=e[a+8],u!==nu&&F_(r,e[Je].data[a+8]===d)&&k_(s,a,e)?(o=p,a=iu(u),e=wc(u,e)):a=-1}}return i}function uw(n,e,t,r,i,s){const o=e[Je],a=o.data[n+8],p=ou(a,o,t,null==r?Ya(a)&&Hf:r!=o&&0!=(3&a.type),i&ft.Host&&s===a);return null!==p?fa(e,o,p,a):ho}function ou(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,u=n.directiveStart,p=s>>20,v=i?a+p:n.directiveEnd;for(let T=r?a:a+p;T<v;T++){const S=o[T];if(T<u&&t===S||T>=u&&S.type===t)return T}if(i){const T=o[u];if(T&&zs(T)&&T.type===t)return u}return null}function fa(n,e,t,r){let i=n[t];const s=e.data;if(function nw(n){return n instanceof ha}(i)){const o=i;o.resolving&&function St(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new O(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Me(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ie(n)}(s[t]));const a=Wl(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?Fe(o.injectImpl):null;jl(n,r,ft.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function C_(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=o_(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==d&&Fe(d),Wl(a),o.resolving=!1,Ic()}}return i}function k_(n,e,t){return!!(t[e+(n>>zf)]&1<<n)}function F_(n,e){return!(n&ft.Self||n&ft.Host&&e)}class Wr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Zl(this._tNode,this._lView,e,yl(r),t)}}function lw(){return new Wr(Pr(),Ae())}function Zr(n){return Wi(()=>{const e=n.prototype.constructor,t=e[oo]||bc(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[oo]||bc(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function bc(n){return cs(n)?()=>{const e=bc(Et(n));return e&&e()}:ca(n)}function V_(n){const e=n[Je],t=e.type;return 2===t?e.declTNode:1===t?n[si]:null}const au="__parameters__";function cu(n,e,t){return Wi(()=>{const r=function Ql(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,d,p){const m=u.hasOwnProperty(au)?u[au]:Object.defineProperty(u,au,{value:[]})[au];for(;m.length<=p;)m.push(null);return(m[p]=m[p]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function hu(n,e){n.forEach(t=>Array.isArray(t)?hu(t,e):e(t))}function Ri(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Oo(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Pi(n,e,t){let r=Qi(n,e);return r>=0?n[1|r]=t:(r=~r,function Qf(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Yf(n,e){const t=Qi(n,e);if(t>=0)return n[1|t]}function Qi(n,e){return function $_(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const pu=ia(cu("Optional"),8),Xl=ia(cu("SkipSelf"),4);function J_(n){return 128==(128&n.flags)}var gu=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(gu||{});const Iw=new Map;let Cj=0;const Tw="__ngContext__";function xi(n,e){Ai(e)?(n[Tw]=e[aa],function Aj(n){Iw.set(n[aa],n)}(e)):n[Tw]=e}let bw;function Cw(n,e){return bw(n,e)}function up(n){const e=n[Ln];return pi(e)?e[Ln]:e}function HS(n){return GS(n[ac])}function zS(n){return GS(n[As])}function GS(n){for(;null!==n&&!pi(n);)n=n[As];return n}function rd(n,e,t,r,i){if(null!=r){let s,o=!1;pi(r)?s=r:Ai(r)&&(o=!0,r=r[ur]);const a=Vn(r);0===n&&null!==t?null==i?KS(e,t,a):Dc(e,t,a,i||null,!0):1===n&&null!==t?Dc(e,t,a,i||null,!0):2===n?function oy(n,e,t){const r=iy(n,e);r&&function qj(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Kj(n,e,t,r,i){const s=t[hs];s!==Vn(t)&&rd(e,n,r,s,i);for(let a=qr;a<t.length;a++){const u=t[a];lp(u[Je],u,n,e,r,s)}}(e,n,s,t,i)}}function ny(n,e,t){return n.createElement(e,t)}function WS(n,e){const t=n[Ss],r=t.indexOf(e);h_(e),t.splice(r,1)}function ry(n,e){if(n.length<=qr)return;const t=qr+e,r=n[t];if(r){const i=r[uc];null!==i&&i!==n&&WS(i,r),e>0&&(n[t-1][As]=r[As]);const s=Oo(n,qr+e);!function Vj(n,e){lp(n,e,e[Lt],2,null,null),e[ur]=null,e[si]=null}(r[Je],r);const o=s[$s];null!==o&&o.detachView(s[Je]),r[Ln]=null,r[As]=null,r[Vt]&=-129}return r}function Aw(n,e){if(!(256&e[Vt])){const t=e[Lt];e[ua]&&Qm(e[ua]),e[cc]&&Qm(e[cc]),t.destroyNode&&lp(n,e,t,3,null,null),function jj(n){let e=n[ac];if(!e)return Sw(n[Je],n);for(;e;){let t=null;if(Ai(e))t=e[ac];else{const r=e[qr];r&&(t=r)}if(!t){for(;e&&!e[As]&&e!==n;)Ai(e)&&Sw(e[Je],e),e=e[Ln];null===e&&(e=n),Ai(e)&&Sw(e[Je],e),t=e&&e[As]}e=t}}(e)}}function Sw(n,e){if(!(256&e[Vt])){e[Vt]&=-129,e[Vt]|=256,function Gj(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof ha)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];ps(4,a,u);try{u.call(a)}finally{ps(5,a,u)}}else{ps(4,i,s);try{s.call(i)}finally{ps(5,i,s)}}}}}(n,e),function zj(n,e){const t=n.cleanup,r=e[Do];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[Do]=null);const i=e[Hs];if(null!==i){e[Hs]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Je].type&&e[Lt].destroy();const t=e[uc];if(null!==t&&pi(e[Ln])){t!==e[Ln]&&WS(t,e);const r=e[$s];null!==r&&r.detachView(n)}!function Sj(n){Iw.delete(n[aa])}(e)}}function Rw(n,e,t){return function ZS(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[ur];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Zi.None||s===Zi.Emulated)return null}return oi(r,t)}}(n,e.parent,t)}function Dc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function KS(n,e,t){n.appendChild(e,t)}function QS(n,e,t,r,i){null!==r?Dc(n,e,t,r,i):KS(n,e,t)}function iy(n,e){return n.parentNode(e)}let Pw,Ow,uy,JS=function XS(n,e,t){return 40&n.type?oi(n,t):null};function sy(n,e,t,r){const i=Rw(n,r,e),s=e[Lt],a=function YS(n,e,t){return JS(n,e,t)}(r.parent||e[si],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)QS(s,i,t[u],a,!1);else QS(s,i,t,a,!1);void 0!==Pw&&Pw(s,r,e,t,i)}function cp(n,e){if(null!==e){const t=e.type;if(3&t)return oi(e,n);if(4&t)return Mw(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return cp(n,r);{const i=n[e.index];return pi(i)?Mw(-1,i):Vn(i)}}if(32&t)return Cw(e,n)()||Vn(n[e.index]);{const r=tR(n,e);return null!==r?Array.isArray(r)?r[0]:cp(up(n[Xn]),r):cp(n,e.next)}}return null}function tR(n,e){return null!==e?n[Xn][si].projection[e.projection]:null}function Mw(n,e){const t=qr+n+1;if(t<e.length){const r=e[t],i=r[Je].firstChild;if(null!==i)return cp(r,i)}return e[hs]}function xw(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],u=t.type;if(o&&0===e&&(a&&xi(Vn(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)xw(n,e,t.child,r,i,s,!1),rd(e,n,i,a,s);else if(32&u){const d=Cw(t,r);let p;for(;p=d();)rd(e,n,i,p,s);rd(e,n,i,a,s)}else 16&u?rR(n,e,r,t,i,s):rd(e,n,i,a,s);t=o?t.projectionNext:t.next}}function lp(n,e,t,r,i,s){xw(t,r,n.firstChild,e,i,s,!1)}function rR(n,e,t,r,i,s){const o=t[Xn],u=o[si].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)rd(e,n,i,u[d],s);else{let d=u;const p=o[Ln];J_(r)&&(d.flags|=128),xw(n,e,d,p,i,s,!0)}}function iR(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function sR(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Il(n,e,r),null!==i&&iR(n,e,i),null!==s&&function Yj(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function uR(n){return function kw(){if(void 0===uy&&(uy=null,Kt.trustedTypes))try{uy=Kt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return uy}()?.createScriptURL(n)||n}class cR{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ci})`}}function mu(n){return n instanceof cR?n.changingThisBreaksApplicationSecurity:n}function dp(n,e){const t=function a$(n){return n instanceof cR&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Ci})`)}return t===e}const d$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var od=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(od||{});function fp(n){const e=pp();return e?e.sanitize(od.URL,n)||"":dp(n,"URL")?mu(n):function Fw(n){return(n=String(n)).match(d$)?n:"unsafe:"+n}(ie(n))}function mR(n){const e=pp();if(e)return uR(e.sanitize(od.RESOURCE_URL,n)||"");if(dp(n,"ResourceURL"))return uR(mu(n));throw new O(904,!1)}function pp(){const n=Ae();return n&&n[So].sanitizer}const gp=new Ue("ENVIRONMENT_INITIALIZER"),yR=new Ue("INJECTOR",-1),vR=new Ue("INJECTOR_DEF_TYPES");class Bw{get(e,t=ro){if(t===ro){const r=new Error(`NullInjectorError: No provider for ${dn(e)}!`);throw r.name="NullInjectorError",r}return t}}function b$(...n){return{\u0275providers:ER(0,n),\u0275fromNgModule:!0}}function ER(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return hu(e,o=>{const a=o;ly(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&IR(i,s),t}function IR(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];$w(i,s=>{e(s,r)})}}function ly(n,e,t,r){if(!(n=Et(n)))return!1;let i=null,s=Ht(n);const o=!s&&en(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const u=n.ngModule;if(s=Ht(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of u)ly(d,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{hu(s.imports,p=>{ly(p,e,t,r)&&(d||=[],d.push(p))})}finally{}void 0!==d&&IR(d,e)}if(!a){const d=ca(i)||(()=>new i);e({provide:i,useFactory:d,deps:rn},i),e({provide:vR,useValue:i,multi:!0},i),e({provide:gp,useValue:()=>Ne(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const d=n;$w(u,p=>{e(p,d)})}}}return i!==n&&void 0!==n.providers}function $w(n,e){for(let t of n)ls(t)&&(t=t.\u0275providers),Array.isArray(t)?$w(t,e):e(t)}const C$=Ze({provide:String,useValue:Ze});function Hw(n){return null!==n&&"object"==typeof n&&C$ in n}function Ac(n){return"function"==typeof n}const zw=new Ue("Set Injector scope."),dy={},A$={};let Gw;function hy(){return void 0===Gw&&(Gw=new Bw),Gw}class Ps{}class ad extends Ps{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ww(e,o=>this.processProvider(o)),this.records.set(yR,ud(void 0,this)),i.has("environment")&&this.records.set(Ps,ud(void 0,this));const s=this.records.get(zw);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(vR.multi,rn,ft.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Bs(this),r=Fe(void 0);try{return e()}finally{Bs(t),Fe(r)}}get(e,t=ro,r=ft.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Om))return e[Om](this);r=yl(r);const s=Bs(this),o=Fe(void 0);try{if(!(r&ft.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function x$(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ue}(e)&&pe(e);u=d&&this.injectableDefInScope(d)?ud(qw(e),dy):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&ft.Self?hy():this.parent).get(e,t=r&ft.Optional&&t===ro?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Wa]=a[Wa]||[]).unshift(dn(e)),s)throw a;return function CI(n,e,t,r){const i=n[Wa];throw e[xm]&&i.unshift(e[xm]),n.message=function DI(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=dn(e);if(Array.isArray(e))i=e.map(dn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):dn(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(io,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Wa]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Fe(o),Bs(s)}}resolveInjectorInitializers(){const e=Bs(this),t=Fe(void 0);try{const i=this.get(gp.multi,rn,ft.Self);for(const s of i)s()}finally{Bs(e),Fe(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(dn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new O(205,!1)}processProvider(e){let t=Ac(e=Et(e))?e:Et(e&&e.provide);const r=function R$(n){return Hw(n)?ud(void 0,n.useValue):ud(bR(n),dy)}(e);if(Ac(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=ud(void 0,dy,!0),i.factory=()=>Jh(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===dy&&(t.value=A$,t.value=t.factory()),"object"==typeof t.value&&t.value&&function M$(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Et(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function qw(n){const e=pe(n),t=null!==e?e.factory:ca(n);if(null!==t)return t;if(n instanceof Ue)throw new O(204,!1);if(n instanceof Function)return function S$(n){const e=n.length;if(e>0)throw function fu(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new O(204,!1);const t=function nn(n){return n&&(n[An]||n[or])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new O(204,!1)}function bR(n,e,t){let r;if(Ac(n)){const i=Et(n);return ca(i)||qw(i)}if(Hw(n))r=()=>Et(n.useValue);else if(function TR(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Jh(n.deps||[]));else if(function wR(n){return!(!n||!n.useExisting)}(n))r=()=>Ne(Et(n.useExisting));else{const i=Et(n&&(n.useClass||n.provide));if(!function P$(n){return!!n.deps}(n))return ca(i)||qw(i);r=()=>new i(...Jh(n.deps))}return r}function ud(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Ww(n,e){for(const t of n)Array.isArray(t)?Ww(t,e):t&&ls(t)?Ww(t.\u0275providers,e):e(t)}const fy=new Ue("AppId",{providedIn:"root",factory:()=>N$}),N$="ng",CR=new Ue("Platform Initializer"),po=new Ue("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),DR=new Ue("CSP nonce",{providedIn:"root",factory:()=>function sd(){if(void 0!==Ow)return Ow;if(typeof document<"u")return document;throw new O(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let AR=(n,e,t)=>null;function tT(n,e,t=!1){return AR(n,e,t)}class H${}class PR{}class G${resolveComponentFactory(e){throw function z$(n){const e=Error(`No component factory found for ${dn(n)}.`);return e.ngComponent=n,e}(e)}}let vy=(()=>{class n{static#e=this.NULL=new G$}return n})();function q$(){return dd(Pr(),Ae())}function dd(n,e){return new Ms(oi(n,e))}let Ms=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=q$}return n})();function W$(n){return n instanceof Ms?n.nativeElement:n}class xR{}let ga=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Z$(){const n=Ae(),t=Rr(Pr().index,n);return(Ai(t)?t:n)[Lt]}()}return n})(),K$=(()=>{class n{static#e=this.\u0275prov=z({token:n,providedIn:"root",factory:()=>null})}return n})();class hd{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const NR=new hd("16.2.12"),iT={};function LR(n,e=null,t=null,r){const i=VR(n,e,t,r);return i.resolveInjectorInitializers(),i}function VR(n,e=null,t=null,r,i=new Set){const s=[t||rn,b$(n)];return r=r||("object"==typeof n?void 0:dn(n)),new ad(s,e||hy(),r||null,i)}let xs=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=ro;static#t=this.NULL=new Bw;static create(t,r){if(Array.isArray(t))return LR({name:""},r,t,"");{const i=t.name??"";return LR({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=z({token:n,providedIn:"any",factory:()=>Ne(yR)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function oT(n){return n.ngOriginalError}class ma{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&oT(e);for(;t&&oT(t);)t=oT(t);return t||null}}function uT(n){return e=>{setTimeout(n,void 0,e)}}const Tr=class nH extends te{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=uT(s),i&&(i=uT(i)),o&&(o=uT(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof je&&e.add(a),a}};function BR(...n){}class Sn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Tr(!1),this.onMicrotaskEmpty=new Tr(!1),this.onStable=new Tr(!1),this.onError=new Tr(!1),typeof Zone>"u")throw new O(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function rH(){const n="function"==typeof Kt.requestAnimationFrame;let e=Kt[n?"requestAnimationFrame":"setTimeout"],t=Kt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function oH(n){const e=()=>{!function sH(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Kt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,lT(n),n.isCheckStableRunning=!0,cT(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),lT(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function uH(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return jR(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),$R(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return jR(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),$R(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,lT(n),cT(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Sn.isInAngularZone())throw new O(909,!1)}static assertNotInAngularZone(){if(Sn.isInAngularZone())throw new O(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,iH,BR,BR);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const iH={};function cT(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function lT(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function jR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function $R(n){n._nesting--,cT(n)}class aH{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Tr,this.onMicrotaskEmpty=new Tr,this.onStable=new Tr,this.onError=new Tr}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const HR=new Ue("",{providedIn:"root",factory:zR});function zR(){const n=et(Sn);let e=!0;return ve(new ue(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new ue(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Sn.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{Sn.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(ht()))}function _a(n){return n instanceof Function?n():n}let dT=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}return n})();function yp(n){for(;n;){n[Vt]|=64;const e=up(n);if(lc(n)&&!e)return n;n=e}return null}const KR=new Ue("",{providedIn:"root",factory:()=>!1});let Iy=null;function JR(n,e){return n[e]??nP()}function eP(n,e){const t=nP();t.producerNode?.length&&(n[e]=Iy,t.lView=n,Iy=tP())}const yH={...qm,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{yp(n.lView)},lView:null};function tP(){return Object.create(yH)}function nP(){return Iy??=tP(),Iy}const jt={};function Nt(n){rP(fn(),Ae(),gi()+n,!1)}function rP(n,e,t,r){if(!r)if(3==(3&e[Vt])){const s=n.preOrderCheckHooks;null!==s&&zl(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Gl(e,s,0,t)}da(t)}function ke(n,e=ft.Default){const t=Ae();return null===t?Ne(n,e):Zl(Pr(),t,Et(n),e)}function wy(n,e,t,r,i,s,o,a,u,d,p){const m=e.blueprint.slice();return m[ur]=i,m[Vt]=140|r,(null!==d||n&&2048&n[Vt])&&(m[Vt]|=2048),Ll(m),m[Ln]=m[Ka]=n,m[mr]=t,m[So]=o||n&&n[So],m[Lt]=a||n&&n[Lt],m[Ao]=u||n&&n[Ao]||null,m[si]=s,m[aa]=function Dj(){return Cj++}(),m[uo]=p,m[Hm]=d,m[Xn]=2==e.type?n[Xn]:m,m}function gd(n,e,t,r,i){let s=n.data[e];if(null===s)s=function hT(n,e,t,r,i){const s=__(),o=Pf(),u=n.data[e]=function DH(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function tu(){return null!==Ct.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(n,e,t,r,i),function y_(){return Ct.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function vc(){const n=Ct.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return gs(s,!0),s}function vp(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function sP(n,e,t,r,i){const s=JR(e,ua),o=gi(),a=2&r;try{da(-1),a&&e.length>Qt&&rP(n,e,Qt,!1),ps(a?2:0,i);const d=a?s:null,p=dc(d);try{null!==d&&(d.dirty=!1),t(r,i)}finally{vf(d,p)}}finally{a&&null===e[ua]&&eP(e,ua),da(o),ps(a?3:1,i)}}function fT(n,e,t){if(gf(e)){const r=Sr(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Sr(r)}}}function pT(n,e,t){m_()&&(function NH(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;Ya(t)&&function BH(n,e,t){const r=oi(e,n),i=oP(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=Ty(n,wy(n,i,null,o,r,e,null,n[So].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||qs(t,e),xi(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const u=n.data[a],d=fa(e,n,a,t);xi(d,e),null!==o&&jH(0,a-i,d,u,0,o),zs(u)&&(Rr(t.index,e)[mr]=fa(e,n,a,t))}}(n,e,t,oi(t,e)),64==(64&t.flags)&&dP(n,e,t))}function gT(n,e,t=oi){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function oP(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=mT(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function mT(n,e,t,r,i,s,o,a,u,d,p){const m=Qt+r,v=m+i,T=function EH(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:jt);return t}(m,v),S="function"==typeof d?d():d;return T[Je]={type:n,blueprint:T,template:t,queries:null,viewQuery:a,declTNode:e,data:T.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:p}}let aP=n=>null;function uP(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?cP(t,e,i,s):r.hasOwnProperty(i)&&cP(t,e,r[i],s)}return t}function cP(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function _T(n,e,t,r){if(m_()){const i=null===r?null:{"":-1},s=function kH(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Tl(e,o.selectors,!1))if(r||(r=[]),zs(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),yT(n,e,a.length)}else r.unshift(o),yT(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&lP(n,e,t,o,i,a),i&&function FH(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new O(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=ni(t.mergedAttrs,t.attrs)}function lP(n,e,t,r,i,s){for(let d=0;d<r.length;d++)qf(qs(t,e),n,r[d].type);!function VH(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let d=0;d<r.length;d++){const p=r[d];p.providersResolver&&p.providersResolver(p)}let o=!1,a=!1,u=vp(n,e,r.length,null);for(let d=0;d<r.length;d++){const p=r[d];t.mergedAttrs=ni(t.mergedAttrs,p.hostAttrs),UH(n,t,e,u,p),LH(u,p,i),null!==p.contentQueries&&(t.flags|=4),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(t.flags|=64);const m=p.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}!function AH(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let u=null,d=null;for(let p=e.directiveStart;p<i;p++){const m=s[p],v=t?t.get(m):null,S=v?v.outputs:null;u=uP(m.inputs,p,u,v?v.inputs:null),d=uP(m.outputs,p,d,S);const R=null===u||null===o||oc(e)?null:$H(u,p,o);a.push(R)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(n,t,s)}function dP(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function KI(){return Ct.lFrame.currentDirectiveIndex}();try{da(s);for(let a=r;a<i;a++){const u=n.data[a],d=e[a];Bl(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&OH(u,d)}}finally{da(-1),Bl(o)}}function OH(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function yT(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function LH(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;zs(e)&&(t[""]=n)}}function UH(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=ca(i.type)),o=new ha(s,zs(i),ke);n.blueprint[r]=o,t[r]=o,function MH(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function xH(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,vp(n,t,i.hostVars,jt),i)}function ko(n,e,t,r,i,s){const o=oi(n,e);!function vT(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?ie(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[Lt],o,s,n.value,t,r,i)}function jH(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)hP(r,t,o[a++],o[a++],o[a++])}function hP(n,e,t,r,i){const s=Sr(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{Sr(s)}}function $H(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function fP(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function pP(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];kf(t[r]),o.contentQueries(2,e[s],s)}}}function Ty(n,e){return n[ac]?n[Rl][As]=e:n[ac]=e,n[Rl]=e,e}function ET(n,e,t){kf(0);const r=Sr(null);try{e(n,t)}finally{Sr(r)}}function gP(n){return n[Do]||(n[Do]=[])}function mP(n){return n.cleanup||(n.cleanup=[])}function yP(n,e){const t=n[Ao],r=t?t.get(ma,null):null;r&&r.handleError(e)}function IT(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];hP(n.data[o],e[o],r,a,i)}}function ya(n,e,t){const r=la(e,n);!function qS(n,e,t){n.setValue(e,t)}(n[Lt],r,t)}function HH(n,e){const t=Rr(e,n),r=t[Je];!function zH(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[ur];null!==i&&null===t[uo]&&(t[uo]=tT(i,t[Ao])),wT(r,t,t[mr])}function wT(n,e,t){Ff(e);try{const r=n.viewQuery;null!==r&&ET(1,r,t);const i=n.template;null!==i&&sP(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&pP(n,e),n.staticViewQueries&&ET(2,n.viewQuery,t);const s=n.components;null!==s&&function GH(n,e){for(let t=0;t<e.length;t++)HH(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Vt]&=-5,Vf()}}let vP=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function kI(n,e,t){const r=Object.create(FI);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>Km(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Nl(r))return;r.hasRun=!0;const o=dc(r);try{r.cleanupFn(),r.cleanupFn=i_,r.fn(i)}finally{vf(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,d=>{this.all.has(d)&&this.queue.set(d,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}return n})();function by(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Cs(i,a):2==s&&(r=Cs(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Ep(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Vn(s)),pi(s)&&EP(s,r);const o=t.type;if(8&o)Ep(n,e,t.child,r);else if(32&o){const a=Cw(t,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=tR(e,t);if(Array.isArray(a))r.push(...a);else{const u=up(e[Xn]);Ep(u[Je],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function EP(n,e){for(let t=qr;t<n.length;t++){const r=n[t],i=r[Je].firstChild;null!==i&&Ep(r[Je],r,i,e)}n[hs]!==n[ur]&&e.push(n[hs])}function Cy(n,e,t,r=!0){const i=e[So],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{IP(n,e,n.template,t)}catch(u){throw r&&yP(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function IP(n,e,t,r){const i=e[Vt];if(256!=(256&i)){e[So].effectManager?.flush(),Ff(e);try{Ll(e),function Nf(n){return Ct.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&sP(n,e,t,2,r);const o=3==(3&i);if(o){const d=n.preOrderCheckHooks;null!==d&&zl(e,d,null)}else{const d=n.preOrderHooks;null!==d&&Gl(e,d,0,null),Bf(e,0)}if(function ZH(n){for(let e=HS(n);null!==e;e=zS(e)){if(!e[pf])continue;const t=e[Ss];for(let r=0;r<t.length;r++){d_(t[r])}}}(e),wP(e,2),null!==n.contentQueries&&pP(n,e),o){const d=n.contentCheckHooks;null!==d&&zl(e,d)}else{const d=n.contentHooks;null!==d&&Gl(e,d,1),Bf(e,1)}!function vH(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=JR(e,cc);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)da(~s);else{const o=s,a=t[++i],u=t[++i];v_(a,o),r.dirty=!1;const d=dc(r);try{u(2,e[o])}finally{vf(r,d)}}}}finally{null===e[cc]&&eP(e,cc),da(-1)}}(n,e);const a=n.components;null!==a&&bP(e,a,0);const u=n.viewQuery;if(null!==u&&ET(2,u,r),o){const d=n.viewCheckHooks;null!==d&&zl(e,d)}else{const d=n.viewHooks;null!==d&&Gl(e,d,2),Bf(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Vt]&=-73,h_(e)}finally{Vf()}}}function wP(n,e){for(let t=HS(n);null!==t;t=zS(t))for(let r=qr;r<t.length;r++)TP(t[r],e)}function KH(n,e,t){TP(Rr(e,n),t)}function TP(n,e){if(!function $I(n){return 128==(128&n[Vt])}(n))return;const t=n[Je],r=n[Vt];if(80&r&&0===e||1024&r||2===e)IP(t,n,t.template,n[mr]);else if(n[oa]>0){wP(n,1);const i=t.components;null!==i&&bP(n,i,1)}}function bP(n,e,t){for(let r=0;r<e.length;r++)KH(n,e[r],t)}class Ip{get rootNodes(){const e=this._lView,t=e[Je];return Ep(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[mr]}set context(e){this._lView[mr]=e}get destroyed(){return 256==(256&this._lView[Vt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Ln];if(pi(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(ry(e,r),Oo(t,r))}this._attachedToViewContainer=!1}Aw(this._lView[Je],this._lView)}onDestroy(e){!function Vl(n,e){if(256==(256&n[Vt]))throw new O(911,!1);null===n[Hs]&&(n[Hs]=[]),n[Hs].push(e)}(this._lView,e)}markForCheck(){yp(this._cdRefInjectingView||this._lView)}detach(){this._lView[Vt]&=-129}reattach(){this._lView[Vt]|=128}detectChanges(){Cy(this._lView[Je],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new O(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Bj(n,e){lp(n,e,e[Lt],2,null,null)}(this._lView[Je],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new O(902,!1);this._appRef=e}}class QH extends Ip{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Cy(e[Je],e,e[mr],!1)}checkNoChanges(){}get context(){return null}}class CP extends vy{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=en(e);return new wp(t,this.ngModule)}}function DP(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class XH{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=yl(r);const i=this.injector.get(e,iT,r);return i!==iT||t===iT?i:this.parentInjector.get(e,t,r)}}class wp extends PR{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=DP(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return DP(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function lf(n){return n.map(Um).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof Ps?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new XH(e,s):e,a=o.get(xR,null);if(null===a)throw new O(407,!1);const m={rendererFactory:a,sanitizer:o.get(K$,null),effectManager:o.get(vP,null),afterRenderEventManager:o.get(dT,null)},v=a.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",S=r?function IH(n,e,t,r){const s=r.get(KR,!1)||t===Zi.ShadowDom,o=n.selectRootElement(e,s);return function wH(n){aP(n)}(o),o}(v,r,this.componentDef.encapsulation,o):ny(v,T,function YH(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(T)),X=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let j=null;null!==S&&(j=tT(S,o,!0));const ee=mT(0,null,null,1,0,null,null,null,null,null,null),ge=wy(null,ee,null,X,null,null,m,v,o,null,j);let $e,ct;Ff(ge);try{const H=this.componentDef;let N,U=null;H.findHostDirectiveDefs?(N=[],U=new Map,H.findHostDirectiveDefs(H,N,U),N.push(H)):N=[H];const Q=function e4(n,e){const t=n[Je],r=Qt;return n[r]=e,gd(t,r,2,"#host",null)}(ge,S),J=function t4(n,e,t,r,i,s,o){const a=i[Je];!function n4(n,e,t,r){for(const i of n)e.mergedAttrs=ni(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(by(e,e.mergedAttrs,!0),null!==t&&sR(r,t,e))}(r,n,e,o);let u=null;null!==e&&(u=tT(e,i[Ao]));const d=s.rendererFactory.createRenderer(e,t);let p=16;t.signals?p=4096:t.onPush&&(p=64);const m=wy(i,oP(t),null,p,i[n.index],n,s,d,null,null,u);return a.firstCreatePass&&yT(a,n,r.length-1),Ty(i,m),i[n.index]=m}(Q,S,H,N,ge,m,v);ct=Fl(ee,Qt),S&&function i4(n,e,t,r){if(r)Il(n,t,["ng-version",NR.full]);else{const{attrs:i,classes:s}=function Dl(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Ds(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Il(n,t,i),s&&s.length>0&&iR(n,t,s.join(" "))}}(v,H,S,r),void 0!==t&&function s4(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(ct,this.ngContentSelectors,t),$e=function r4(n,e,t,r,i,s){const o=Pr(),a=i[Je],u=oi(o,i);lP(a,i,o,t,null,r);for(let p=0;p<t.length;p++)xi(fa(i,a,o.directiveStart+p,o),i);dP(a,i,o),u&&xi(u,i);const d=fa(i,a,o.directiveStart+o.componentOffset,o);if(n[mr]=i[mr]=d,null!==s)for(const p of s)p(d,e);return fT(a,o,n),d}(J,H,N,U,ge,[o4]),wT(ee,ge,null)}finally{Vf()}return new JH(this.componentType,$e,dd(ct,ge),ge,ct)}}class JH extends H${constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new QH(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;IT(s[Je],s,i,e,t),this.previousInputValues.set(e,t),yp(Rr(this._tNode.index,s))}}get injector(){return new Wr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function o4(){const n=Pr();Hl(Ae()[Je],n)}function Nn(n){let e=function AP(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(zs(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new O(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=Dy(n.inputs),o.inputTransforms=Dy(n.inputTransforms),o.declaredInputs=Dy(n.declaredInputs),o.outputs=Dy(n.outputs);const a=i.hostBindings;a&&l4(n,a);const u=i.viewQuery,d=i.contentQueries;if(u&&u4(n,u),d&&c4(n,d),cn(n.inputs,i.inputs),cn(n.declaredInputs,i.declaredInputs),cn(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),cn(o.inputTransforms,i.inputTransforms)),zs(i)&&i.data.animation){const p=n.data;p.animation=(p.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Nn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function a4(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ni(i.hostAttrs,t=ni(t,i.hostAttrs))}}(r)}function Dy(n){return n===Fr?{}:n===rn?[]:n}function u4(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function c4(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function l4(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function MP(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function Ay(n){return!!function TT(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Ni(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Sc(n,e,t,r){const i=Ni(n,e,t);return Ni(n,e+1,r)||i}function Lo(n,e,t,r){const i=Ae();return Ni(i,xo(),e)&&(fn(),ko(Jn(),i,n,e,t,r)),Lo}function vd(n,e,t,r,i,s,o,a){const d=function Sy(n,e,t,r,i){const s=Sc(n,e,t,r);return Ni(n,e+2,i)||s}(n,Rs(),t,i,o);return lo(3),d?e+ie(t)+r+ie(i)+s+ie(o)+a:jt}function Ed(n,e,t,r,i,s,o,a,u,d){const m=function Ws(n,e,t,r,i,s){const o=Sc(n,e,t,r);return Sc(n,e+2,i,s)||o}(n,Rs(),t,i,o,u);return lo(4),m?e+ie(t)+r+ie(i)+s+ie(o)+a+ie(u)+d:jt}function Vr(n,e,t,r,i,s,o,a){const u=Ae(),d=fn(),p=n+Qt,m=d.firstCreatePass?function k4(n,e,t,r,i,s,o,a,u){const d=e.consts,p=gd(e,n,4,o||null,Mo(d,a));_T(e,t,p,Mo(d,u)),Hl(e,p);const m=p.tView=mT(2,p,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,p),m.queries=e.queries.embeddedTView(p)),p}(p,d,u,e,t,r,i,s,o):d.data[p];gs(m,!1);const v=zP(d,u,m,n);$l()&&sy(d,u,v,m),xi(v,u),Ty(u,u[p]=fP(v,u,v,m)),mf(m)&&pT(d,u,m),null!=o&&gT(u,m,a)}let zP=function GP(n,e,t,r){return No(!0),e[Lt].createComment("")};function zt(n,e,t){const r=Ae();return Ni(r,xo(),e)&&function Ns(n,e,t,r,i,s,o,a){const u=oi(e,t);let p,d=e.inputs;!a&&null!=d&&(p=d[r])?(IT(n,t,p,r,i),Ya(e)&&function RH(n,e){const t=Rr(e,n);16&t[Vt]||(t[Vt]|=64)}(t,e.index)):3&e.type&&(r=function SH(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(fn(),Jn(),r,n,e,r[Lt],t,!1),zt}function RT(n,e,t,r,i){const o=i?"class":"style";IT(n,t,e.inputs[o],o,r)}function Re(n,e,t,r){const i=Ae(),s=fn(),o=Qt+n,a=i[Lt],u=s.firstCreatePass?function B4(n,e,t,r,i,s){const o=e.consts,u=gd(e,n,2,r,Mo(o,i));return _T(e,t,u,Mo(o,s)),null!==u.attrs&&by(u,u.attrs,!1),null!==u.mergedAttrs&&by(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,t,r):s.data[o],d=qP(s,i,u,a,e,n);i[o]=d;const p=mf(u);return gs(u,!0),sR(a,d,u),32!=(32&u.flags)&&$l()&&sy(s,i,d,u),0===function Cf(){return Ct.lFrame.elementDepthCount}()&&xi(d,i),function GI(){Ct.lFrame.elementDepthCount++}(),p&&(pT(s,i,u),fT(s,u,i)),null!==r&&gT(i,u),Re}function be(){let n=Pr();Pf()?function Mf(){Ct.lFrame.isParent=!1}():(n=n.parent,gs(n,!1));const e=n;(function Df(n){return Ct.skipHydrationRootTNode===n})(e)&&function Rf(){Ct.skipHydrationRootTNode=null}(),function yc(){Ct.lFrame.elementDepthCount--}();const t=fn();return t.firstCreatePass&&(Hl(t,n),gf(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function iw(n){return 0!=(8&n.flags)}(e)&&RT(t,e,Ae(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function IS(n){return 0!=(16&n.flags)}(e)&&RT(t,e,Ae(),e.stylesWithoutHost,!1),be}function va(n,e,t,r){return Re(n,e,t,r),be(),va}let qP=(n,e,t,r,i,s)=>(No(!0),ny(r,i,function T_(){return Ct.lFrame.currentNamespace}()));function Ap(n){return!!n&&"function"==typeof n.then}function KP(n){return!!n&&"function"==typeof n.subscribe}function Bt(n,e,t,r){const i=Ae(),s=fn(),o=Pr();return function YP(n,e,t,r,i,s,o){const a=mf(r),d=n.firstCreatePass&&mP(n),p=e[mr],m=gP(e);let v=!0;if(3&r.type||o){const R=oi(r,e),M=o?o(R):R,X=m.length,j=o?ge=>o(Vn(ge[r.index])):r.index;let ee=null;if(!o&&a&&(ee=function W4(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[Do],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==ee)(ee.__ngLastListenerFn__||ee).__ngNextListenerFn__=s,ee.__ngLastListenerFn__=s,v=!1;else{s=JP(r,e,p,s,!1);const ge=t.listen(M,i,s);m.push(s,ge),d&&d.push(i,j,X,X+1)}}else s=JP(r,e,p,s,!1);const T=r.outputs;let S;if(v&&null!==T&&(S=T[i])){const R=S.length;if(R)for(let M=0;M<R;M+=2){const $e=e[S[M]][S[M+1]].subscribe(s),ct=m.length;m.push(s,$e),d&&d.push(i,r.index,ct,-(ct+1))}}}(s,i,i[Lt],o,n,e,r),Bt}function XP(n,e,t,r){try{return ps(6,e,t),!1!==t(r)}catch(i){return yP(n,i),!1}finally{ps(7,e,t)}}function JP(n,e,t,r,i){return function s(o){if(o===Function)return r;yp(n.componentOffset>-1?Rr(n.index,e):e);let u=XP(e,t,r,o),d=s.__ngNextListenerFn__;for(;d;)u=XP(e,t,d,o)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function Zs(n=1){return function YI(n){return(Ct.lFrame.contextLView=function XI(n,e){for(;n>0;)e=e[Ka],n--;return e}(n,Ct.lFrame.contextLView))[mr]}(n)}function xy(n,e){return n<<17|e<<2}function _u(n){return n>>17&32767}function NT(n){return 2|n}function Rc(n){return(131068&n)>>2}function OT(n,e){return-131069&n|e<<2}function kT(n){return 1|n}function cM(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?_u(s):Rc(s),u=!1;for(;0!==a&&(!1===u||o);){const p=n[a+1];nz(n[a],e)&&(u=!0,n[a+1]=r?kT(p):NT(p)),a=r?_u(p):Rc(p)}u&&(n[t+1]=r?NT(s):kT(s))}function nz(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Qi(n,e)>=0}function Ny(n,e){return function go(n,e,t,r){const i=Ae(),s=fn(),o=lo(2);s.firstUpdatePass&&function yM(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[gi()],o=function _M(n,e){return e>=n.expandoStartIndex}(n,t);(function wM(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function dz(n,e,t,r){const i=function Ec(n){const e=Ct.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Sp(t=FT(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=FT(i,n,e,t,r),null===s){let u=function hz(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Rc(r))return n[_u(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=FT(null,n,e,u[1],r),u=Sp(u,e.attrs,r),function fz(n,e,t,r){n[_u(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function pz(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Sp(r,n[s].hostAttrs,t);return Sp(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function ez(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=_u(o),u=Rc(o);n[r]=t;let p,d=!1;if(Array.isArray(t)?(p=t[1],(null===p||Qi(t,p)>0)&&(d=!0)):p=t,i)if(0!==u){const v=_u(n[a+1]);n[r+1]=xy(v,a),0!==v&&(n[v+1]=OT(n[v+1],r)),n[a+1]=function X4(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=xy(a,0),0!==a&&(n[a+1]=OT(n[a+1],r)),a=r;else n[r+1]=xy(u,0),0===a?a=r:n[u+1]=OT(n[u+1],r),u=r;d&&(n[r+1]=NT(n[r+1])),cM(n,p,r,!0),cM(n,p,r,!1),function tz(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Qi(s,e)>=0&&(t[r+1]=kT(t[r+1]))}(e,p,n,r,s),o=xy(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==jt&&Ni(i,o,e)&&function EM(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const u=n.data,d=u[a+1],p=function J4(n){return 1==(1&n)}(d)?IM(u,e,t,i,Rc(d),o):void 0;Oy(p)||(Oy(s)||function Y4(n){return 2==(2&n)}(d)&&(s=IM(u,null,t,i,a,o)),function Qj(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:gu.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=gu.Important),n.setStyle(t,r,i,s))}}(r,o,la(gi(),t),i,s))}(s,s.data[gi()],i,i[Lt],n,i[o+1]=function yz(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=dn(mu(n)))),n}(e,t),r,o)}(n,e,null,!0),Ny}function FT(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Sp(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Sp(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Pi(n,o,!!t||e[++s]))}return void 0===n?null:n}function IM(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const u=n[i],d=Array.isArray(u),p=d?u[1]:u,m=null===p;let v=t[i+1];v===jt&&(v=m?rn:void 0);let T=m?Yf(v,r):p===r?v:void 0;if(d&&!Oy(T)&&(T=Yf(u,r)),Oy(T)&&(a=T,o))return a;const S=n[i+1];i=o?_u(S):Rc(S)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=Yf(u,r))}return a}function Oy(n){return void 0!==n}function qe(n,e=""){const t=Ae(),r=fn(),i=n+Qt,s=r.firstCreatePass?gd(r,i,1,e,null):r.data[i],o=TM(r,t,s,e,n);t[i]=o,$l()&&sy(r,t,o,s),gs(s,!1)}let TM=(n,e,t,r,i)=>(No(!0),function ty(n,e){return n.createText(e)}(e[Lt],r));function yu(n){return LT("",n,""),yu}function LT(n,e,t){const r=Ae(),i=function _d(n,e,t,r){return Ni(n,xo(),t)?e+ie(t)+r:jt}(r,n,e,t);return i!==jt&&ya(r,gi(),i),LT}function VT(n,e,t,r,i,s,o){const a=Ae(),u=vd(a,n,e,t,r,i,s,o);return u!==jt&&ya(a,gi(),u),VT}function UT(n,e,t,r,i,s,o,a,u){const d=Ae(),p=Ed(d,n,e,t,r,i,s,o,a,u);return p!==jt&&ya(d,gi(),p),UT}const Ad="en-US";let HM=Ad;function $T(n,e,t,r,i){if(n=Et(n),Array.isArray(n))for(let s=0;s<n.length;s++)$T(n[s],e,t,r,i);else{const s=fn(),o=Ae(),a=Pr();let u=Ac(n)?n:Et(n.provide);const d=bR(n),p=1048575&a.providerIndexes,m=a.directiveStart,v=a.providerIndexes>>20;if(Ac(n)||!n.multi){const T=new ha(d,i,ke),S=zT(u,e,i?p:p+v,m);-1===S?(qf(qs(a,o),s,u),HT(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(T),o.push(T)):(t[S]=T,o[S]=T)}else{const T=zT(u,e,p+v,m),S=zT(u,e,p,p+v),M=S>=0&&t[S];if(i&&!M||!i&&!(T>=0&&t[T])){qf(qs(a,o),s,u);const X=function U3(n,e,t,r,i){const s=new ha(n,t,ke);return s.multi=[],s.index=e,s.componentProviders=0,px(s,i,r&&!t),s}(i?V3:L3,t.length,i,r,d);!i&&M&&(t[S].providerFactory=X),HT(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(X),o.push(X)}else HT(s,n,T>-1?T:S,px(t[i?S:T],d,!i&&r));!i&&r&&M&&t[S].componentProviders++}}}function HT(n,e,t,r){const i=Ac(e),s=function D$(n){return!!n.useClass}(e);if(i||s){const u=(s?Et(e.useClass):e).prototype.ngOnDestroy;if(u){const d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const p=d.indexOf(t);-1===p?d.push(t,[r,u]):d[p+1].push(r,u)}else d.push(t,u)}}}function px(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function zT(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function L3(n,e,t,r){return GT(this.multi,[])}function V3(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=fa(t,t[Je],this.providerFactory.index,r);s=a.slice(0,o),GT(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],GT(i,s);return s}function GT(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function lr(n,e=[]){return t=>{t.providersResolver=(r,i)=>function F3(n,e,t){const r=fn();if(r.firstCreatePass){const i=zs(n);$T(t,r.data,r.blueprint,i,!0),$T(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Mc{}class gx{}class qT extends Mc{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new CP(this);const i=fi(e);this._bootstrapComponents=_a(i.bootstrap),this._r3Injector=VR(e,t,[{provide:Mc,useValue:this},{provide:vy,useValue:this.componentFactoryResolver},...r],dn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class WT extends gx{constructor(e){super(),this.moduleType=e}create(e){return new qT(this.moduleType,e,[])}}class mx extends Mc{constructor(e){super(),this.componentFactoryResolver=new CP(this),this.instance=null;const t=new ad([...e.providers,{provide:Mc,useValue:this},{provide:vy,useValue:this.componentFactoryResolver}],e.parent||hy(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function ZT(n,e,t=null){return new mx({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let $3=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=ER(0,t.type),i=r.length>0?ZT([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=z({token:n,providedIn:"environment",factory:()=>new n(Ne(Ps))})}return n})();function _x(n){n.getStandaloneInjector=e=>e.get($3).getOrCreateStandaloneInjector(n)}function Ea(n,e,t){const r=function Lr(){const n=Ct.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}()+n,i=Ae();return i[r]===jt?function Fo(n,e,t){return n[e]=t}(i,r,t?e.call(t):e()):function Tp(n,e){return n[e]}(i,r)}function fG(){return this._results[Symbol.iterator]()}class QT{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Tr)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=QT.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=fG)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function Si(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function pw(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function gG(n,e,t,r=!0){const i=e[Je];if(function $j(n,e,t,r){const i=qr+r,s=t.length;r>0&&(t[i-1][As]=e),r<s-qr?(e[As]=t[i],Ri(t,qr+r,e)):(t.push(e),e[As]=null),e[Ln]=t;const o=e[uc];null!==o&&t!==o&&function Hj(n,e){const t=n[Ss];e[Xn]!==e[Ln][Ln][Xn]&&(n[pf]=!0),null===t?n[Ss]=[e]:t.push(e)}(o,e);const a=e[$s];null!==a&&a.insertView(n),e[Vt]|=128}(i,e,n,t),r){const s=Mw(t,n),o=e[Lt],a=iy(o,n[hs]);null!==a&&function Uj(n,e,t,r,i,s){r[ur]=i,r[si]=e,lp(n,r,t,1,i,s)}(i,n[si],o,e,a,s)}}let Ia=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=yG}return n})();const mG=Ia,_G=class extends mG{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function pG(n,e,t,r){const i=e.tView,a=wy(n,i,t,4096&n[Vt]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[uc]=n[e.index];const d=n[$s];return null!==d&&(a[$s]=d.createEmbeddedView(i)),wT(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Ip(i)}};function yG(){return Uy(Pr(),Ae())}function Uy(n,e){return 4&n.type?new _G(e,n,dd(n,e)):null}let _o=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=bG}return n})();function bG(){return kx(Pr(),Ae())}const CG=_o,Nx=class extends CG{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return dd(this._hostTNode,this._hostLView)}get injector(){return new Wr(this._hostTNode,this._hostLView)}get parentInjector(){const e=su(this._hostTNode,this._hostLView);if(ru(e)){const t=wc(e,this._hostLView),r=iu(e);return new Wr(t[Je].data[r+8],t)}return new Wr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Ox(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-qr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function du(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const R=t||{};a=R.index,r=R.injector,i=R.projectableNodes,s=R.environmentInjector||R.ngModuleRef}const u=o?e:new wp(en(e)),d=r||this.parentInjector;if(!s&&null==u.ngModule){const M=(o?d:this.parentInjector).get(Ps,null);M&&(s=M)}en(u.componentType??{});const T=u.create(d,i,null,s);return this.insertImpl(T.hostView,a,false),T}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function HI(n){return pi(n[Ln])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[Ln],p=new Nx(d,d[si],d[Ln]);p.detach(p.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return gG(a,i,o,!r),e.attachToViewContainerRef(),Ri(YT(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Ox(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=ry(this._lContainer,t);r&&(Oo(YT(this._lContainer),t),Aw(r[Je],r))}detach(e){const t=this._adjustIndex(e,-1),r=ry(this._lContainer,t);return r&&null!=Oo(YT(this._lContainer),t)?new Ip(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Ox(n){return n[8]}function YT(n){return n[8]||(n[8]=[])}function kx(n,e){let t;const r=e[n.index];return pi(r)?t=r:(t=fP(r,e,null,n),e[n.index]=t,Ty(e,t)),Fx(t,e,n,r),new Nx(t,n,e)}let Fx=function Lx(n,e,t,r){if(n[hs])return;let i;i=8&t.type?Vn(r):function DG(n,e){const t=n[Lt],r=t.createComment(""),i=oi(e,n);return Dc(t,iy(t,i),r,function Wj(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[hs]=i};class XT{constructor(e){this.queryList=e,this.matches=null}clone(){return new XT(this.queryList)}setDirty(){this.queryList.setDirty()}}class JT{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new JT(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Hx(e,t).matches&&this.queries[t].setDirty()}}class Vx{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class eb{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new eb(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class tb{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new tb(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,RG(t,s)),this.matchTNodeWithReadOption(e,t,ou(t,e,s,!1,!1))}else r===Ia?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ou(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Ms||i===_o||i===Ia&&4&t.type)this.addMatch(t.index,-2);else{const s=ou(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function RG(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function MG(n,e,t,r){return-1===t?function PG(n,e){return 11&n.type?dd(n,e):4&n.type?Uy(n,e):null}(e,n):-2===t?function xG(n,e,t){return t===Ms?dd(e,n):t===Ia?Uy(e,n):t===_o?kx(e,n):void 0}(n,e,r):fa(n,n[Je],t,e)}function Ux(n,e,t,r){const i=e[$s].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let u=0;u<o.length;u+=2){const d=o[u];a.push(d<0?null:MG(e,s[d],o[u+1],t.metadata.read))}i.matches=a}return i.matches}function nb(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=Ux(n,e,i,t);for(let a=0;a<s.length;a+=2){const u=s[a];if(u>0)r.push(o[a/2]);else{const d=s[a+1],p=e[-u];for(let m=qr;m<p.length;m++){const v=p[m];v[uc]===v[Ln]&&nb(v[Je],v,d,r)}if(null!==p[Ss]){const m=p[Ss];for(let v=0;v<m.length;v++){const T=m[v];nb(T[Je],T,d,r)}}}}}return r}function Sd(n){const e=Ae(),t=fn(),r=E_();kf(r+1);const i=Hx(t,r);if(n.dirty&&function bf(n){return 4==(4&n[Vt])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?nb(t,e,r,[]):Ux(t,e,i,r);n.reset(s,W$),n.notifyOnChanges()}return!0}return!1}function Fp(n,e,t){const r=fn();r.firstCreatePass&&($x(r,new Vx(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),jx(r,Ae(),e)}function Rd(){return function NG(n,e){return n[$s].queries[e].queryList}(Ae(),E_())}function jx(n,e,t){const r=new QT(4==(4&t));(function CH(n,e,t,r){const i=gP(e);i.push(t),n.firstCreatePass&&mP(n).push(r,i.length-1)})(n,e,r,r.destroy),null===e[$s]&&(e[$s]=new JT),e[$s].queries.push(new XT(r))}function $x(n,e,t){null===n.queries&&(n.queries=new eb),n.queries.track(new tb(e,t))}function Hx(n,e){return n.queries.getByIndex(e)}const ub=new Ue("Application Initializer");let cb=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=et(ub,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(Ap(s))t.push(s);else if(KP(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oN=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const wa=new Ue("LocaleId",{providedIn:"root",factory:()=>et(wa,ft.Optional|ft.SkipSelf)||function nq(){return typeof $localize<"u"&&$localize.locale||Ad}()});let $y=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ne(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class sq{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let aN=(()=>{class n{compileModuleSync(t){return new WT(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=_a(fi(t).declarations).reduce((o,a)=>{const u=en(a);return u&&o.push(new wp(u)),o},[]);return new sq(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const dN=new Ue(""),zy=new Ue("");let pb,hb=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,pb||(function Aq(n){pb=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Sn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(Sn),Ne(fb),Ne(zy))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac})}return n})(),fb=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return pb?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),vu=null;const hN=new Ue("AllowMultipleToken"),gb=new Ue("PlatformDestroyListeners"),mb=new Ue("appBootstrapListener");class pN{constructor(e,t){this.name=e,this.token=t}}function mN(n,e,t=[]){const r=`Platform: ${e}`,i=new Ue(r);return(s=[])=>{let o=_b();if(!o||o.injector.get(hN,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function Pq(n){if(vu&&!vu.get(hN,!1))throw new O(400,!1);(function fN(){!function t_(n){e_=n}(()=>{throw new O(600,!1)})})(),vu=n;const e=n.get(yN);(function gN(n){n.get(CR,null)?.forEach(t=>t())})(n)}(function _N(n=[],e){return xs.create({name:e,providers:[{provide:zw,useValue:"platform"},{provide:gb,useValue:new Set([()=>vu=null])},...n]})}(a,r))}return function xq(n){const e=_b();if(!e)throw new O(401,!1);return e}()}}function _b(){return vu?.get(yN)??null}let yN=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function Nq(n="zone.js",e){return"noop"===n?new aH:"zone.js"===n?new Sn(e):n}(r?.ngZone,function vN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function j3(n,e,t){return new qT(n,e,t)}(t.moduleType,this.injector,function bN(n){return[{provide:Sn,useFactory:n},{provide:gp,multi:!0,useFactory:()=>{const e=et(kq,{optional:!0});return()=>e.initialize()}},{provide:TN,useFactory:Oq},{provide:HR,useFactory:zR}]}(()=>i)),o=s.injector.get(ma,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{Gy(this._modules,s),a.unsubscribe()})}),function EN(n,e,t){try{const r=t();return Ap(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(cb);return a.runInitializers(),a.donePromise.then(()=>(function zM(n){C(n,"Expected localeId to be defined"),"string"==typeof n&&(HM=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(wa,Ad)||Ad),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=IN({},r);return function Sq(n,e,t){const r=new WT(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(xd);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new O(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new O(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(gb,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(xs))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function IN(n,e){return Array.isArray(e)?e.reduce(IN,n):{...n,...e}}let xd=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=et(TN),this.zoneIsStable=et(HR),this.componentTypes=[],this.components=[],this.isStable=et($y).hasPendingTasks.pipe(bt(t=>t?me(!1):this.zoneIsStable),Ir(),ht()),this._injector=et(Ps)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof PR;if(!this._injector.get(cb).done)throw!i&&function ao(n){const e=en(n)||Ar(n)||Gr(n);return null!==e&&e.standalone}(t),new O(405,!1);let o;o=i?t:this._injector.get(vy).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function Rq(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Mc),d=o.create(xs.NULL,[],r||o.selector,a),p=d.location.nativeElement,m=d.injector.get(dN,null);return m?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),Gy(this.components,d),m?.unregisterApplication(p)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new O(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Gy(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(mb,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Gy(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new O(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gy(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const TN=new Ue("",{providedIn:"root",factory:()=>et(ma).handleError.bind(void 0)});function Oq(){const n=et(Sn),e=et(ma);return t=>n.runOutsideAngular(()=>e.handleError(t))}let kq=(()=>{class n{constructor(){this.zone=et(Sn),this.applicationRef=et(xd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let qy=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=Lq}return n})();function Lq(n){return function Vq(n,e,t){if(Ya(n)&&!t){const r=Rr(n.index,e);return new Ip(r,r)}return 47&n.type?new Ip(e[Xn],e):null}(Pr(),Ae(),16==(16&n))}class RN{constructor(){}supports(e){return Ay(e)}create(e){return new zq(e)}}const Hq=(n,e)=>e;class zq{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Hq}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<MN(r,i,s)?t:r,a=MN(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const d=a-i,p=u-i;if(d!=p){for(let v=0;v<d;v++){const T=v<s.length?s[v]:s[v]=0,S=T+v;p<=S&&S<d&&(s[v]=T+1)}s[o.previousIndex]=p-d}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ay(e))throw new O(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function _4(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Gq(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new PN),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new PN),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Gq{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qq{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class PN{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new qq,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function MN(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function NN(){return new Ky([new RN])}let Ky=(()=>{class n{static#e=this.\u0275prov=z({token:n,providedIn:"root",factory:NN});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||NN()),deps:[[n,new Xl,new pu]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new O(901,!1)}}return n})();const Yq=mN(null,"core",[]);let Xq=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(xd))};static#t=this.\u0275mod=ri({type:n});static#n=this.\u0275inj=Ie({})}return n})();function Nd(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Tb=null;function Eu(){return Tb}class h9{}const Os=new Ue("DocumentToken");let bb=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:function(){return et(p9)},providedIn:"platform"})}return n})();const f9=new Ue("Location Initialized");let p9=(()=>{class n extends bb{constructor(){super(),this._doc=et(Os),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Eu().getBaseHref(this._doc)}onPopState(t){const r=Eu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Eu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function Cb(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function HN(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ta(n){return n&&"?"!==n[0]?"?"+n:n}let Nc=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:function(){return et(GN)},providedIn:"root"})}return n})();const zN=new Ue("appBaseHref");let GN=(()=>{class n extends Nc{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??et(Os).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Cb(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ta(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Ta(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Ta(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(bb),Ne(zN,8))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),g9=(()=>{class n extends Nc{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Cb(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ta(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ta(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(bb),Ne(zN,8))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac})}return n})(),Db=(()=>{class n{constructor(t){this._subject=new Tr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function y9(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(HN(qN(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ta(r))}normalize(t){return n.stripTrailingSlash(function _9(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,qN(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ta(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ta(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=Ta;static#t=this.joinWithSlash=Cb;static#n=this.stripTrailingSlash=HN;static#r=this.\u0275fac=function(r){return new(r||n)(Ne(Nc))};static#i=this.\u0275prov=z({token:n,factory:function(){return function m9(){return new Db(Ne(Nc))}()},providedIn:"root"})}return n})();function qN(n){return n.replace(/\/index.html$/,"")}function tO(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class i6{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $p=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new i6(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),iO(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{iO(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(ke(_o),ke(Ia),ke(Ky))};static#t=this.\u0275dir=Mt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function iO(n,e){n.context.$implicit=e.item}let Iu=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new s6,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){sO("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){sO("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(ke(_o),ke(Ia))};static#t=this.\u0275dir=Mt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class s6{constructor(){this.$implicit=null,this.ngIf=null}}function sO(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${dn(e)}'.`)}let uO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=ri({type:n});static#n=this.\u0275inj=Ie({})}return n})();function av(n){return"server"===n}let N6=(()=>{class n{static#e=this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new O6(Ne(Os),window)})}return n})();class O6{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function k6(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class lO{}class i5 extends h9{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Hb extends i5{static makeCurrent(){!function d9(n){Tb||(Tb=n)}(new Hb)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function s5(){return zp=zp||document.querySelector("base"),zp?zp.getAttribute("href"):null}();return null==t?null:function o5(n){lv=lv||document.createElement("a"),lv.setAttribute("href",n);const e=lv.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){zp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return tO(document.cookie,e)}}let lv,zp=null,u5=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac})}return n})();const zb=new Ue("EventManagerPlugins");let gO=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new O(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(zb),Ne(Sn))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac})}return n})();class mO{constructor(e){this._doc=e}}const Gb="ng-app-id";let _O=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=av(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Gb}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(Gb),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Gb,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(Os),Ne(fy),Ne(DR,8),Ne(po))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac})}return n})();const qb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Wb=/%COMP%/g,h5=new Ue("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function vO(n,e){return e.map(t=>t.replace(Wb,n))}let EO=(()=>{class n{constructor(t,r,i,s,o,a,u,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=av(a),this.defaultRenderer=new Zb(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Zi.ShadowDom&&(r={...r,encapsulation:Zi.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof wO?i.applyToHost(t):i instanceof Kb&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Zi.Emulated:s=new wO(u,d,r,this.appId,p,o,a,m);break;case Zi.ShadowDom:return new m5(u,d,t,r,o,a,this.nonce,m);default:s=new Kb(u,d,r,p,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(gO),Ne(_O),Ne(fy),Ne(h5),Ne(Os),Ne(po),Ne(Sn),Ne(DR))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac})}return n})();class Zb{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(qb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(IO(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(IO(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new O(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=qb[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=qb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(gu.DashCase|gu.Important)?e.style.setProperty(t,r,i&gu.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&gu.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Eu().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function IO(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class m5 extends Zb{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=vO(i.id,i.styles);for(const p of d){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=p,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Kb extends Zb{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?vO(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class wO extends Kb{constructor(e,t,r,i,s,o,a,u){const d=i+"-"+r.id;super(e,t,r,s,o,a,u,d),this.contentAttr=function f5(n){return"_ngcontent-%COMP%".replace(Wb,n)}(d),this.hostAttr=function p5(n){return"_nghost-%COMP%".replace(Wb,n)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let _5=(()=>{class n extends mO{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(Os))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac})}return n})();const TO=["alt","control","meta","shift"],y5={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},v5={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let E5=(()=>{class n extends mO{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Eu().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),TO.forEach(d=>{const p=r.indexOf(d);p>-1&&(r.splice(p,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=y5[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),TO.forEach(o=>{o!==i&&(0,v5[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(Os))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac})}return n})();const b5=mN(Yq,"browser",[{provide:po,useValue:"browser"},{provide:CR,useValue:function I5(){Hb.makeCurrent()},multi:!0},{provide:Os,useFactory:function T5(){return function t$(n){Ow=n}(document),document},deps:[]}]),C5=new Ue(""),DO=[{provide:zy,useClass:class a5{addToWindow(e){Kt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new O(5103,!1);return s},Kt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Kt.getAllAngularRootElements=()=>e.getAllRootElements(),Kt.frameworkStabilizers||(Kt.frameworkStabilizers=[]),Kt.frameworkStabilizers.push(r=>{const i=Kt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Eu().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:dN,useClass:hb,deps:[Sn,fb,zy]},{provide:hb,useClass:hb,deps:[Sn,fb,zy]}],AO=[{provide:zw,useValue:"root"},{provide:ma,useFactory:function w5(){return new ma},deps:[]},{provide:zb,useClass:_5,multi:!0,deps:[Os,Sn,po]},{provide:zb,useClass:E5,multi:!0,deps:[Os]},EO,_O,gO,{provide:xR,useExisting:EO},{provide:lO,useClass:u5,deps:[]},[]];let D5=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:fy,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(C5,12))};static#t=this.\u0275mod=ri({type:n});static#n=this.\u0275inj=Ie({providers:[...AO,...DO],imports:[uO,Xq]})}return n})(),SO=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(Os))};static#t=this.\u0275prov=z({token:n,factory:function(r){let i=null;return i=r?new r:function S5(){return new SO(Ne(Os))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;const{isArray:O5}=Array,{getPrototypeOf:k5,prototype:F5,keys:L5}=Object;function xO(n){if(1===n.length){const e=n[0];if(O5(e))return{args:e,keys:null};if(function V5(n){return n&&"object"==typeof n&&k5(n)===F5}(e)){const t=L5(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:U5}=Array;function NO(n){return ze(e=>function B5(n,e){return U5(e)?n(...e):n(e)}(n,e))}function OO(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Yb(...n){const e=_n(n),t=bi(n),{args:r,keys:i}=xO(n);if(0===r.length)return L([],e);const s=new ue(function j5(n,e,t=Jt){return r=>{kO(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)kO(e,()=>{const d=L(n[u],e);let p=!1;d.subscribe(De(r,m=>{s[u]=m,p||(p=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>OO(i,o):Jt));return t?s.pipe(NO(t)):s}function kO(n,e,t){n?ir(t,n,e):e()}const dv=Ve(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Xb(...n){return function $5(){return Ti(1)}()(L(n,_n(n)))}function FO(n){return new ue(e=>{Ft(n()).subscribe(e)})}function Gp(n,e){const t=D(n)?n:()=>n,r=i=>i.error(t());return new ue(e?i=>e.schedule(r,0,i):r)}function Jb(){return oe((n,e)=>{let t=null;n._refCount++;const r=De(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class LO extends ue{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ce(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new je;const t=this.getSubject();e.add(this.source.subscribe(De(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=je.EMPTY)}return e}refCount(){return Jb()(this)}}function kd(n){return n<=0?()=>_t:oe((e,t)=>{let r=0;e.subscribe(De(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function hv(...n){const e=_n(n);return oe((t,r)=>{(e?Xb(n,t,e):Xb(n,t)).subscribe(r)})}function Ys(n,e){return oe((t,r)=>{let i=0;t.subscribe(De(r,s=>n.call(e,s,i++)&&r.next(s)))})}function fv(n){return oe((e,t)=>{let r=!1;e.subscribe(De(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function VO(n=H5){return oe((e,t)=>{let r=!1;e.subscribe(De(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function H5(){return new dv}function Tu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ys((i,s)=>n(i,s,r)):Jt,kd(1),t?fv(e):VO(()=>new dv))}function Fd(n,e){return D(e)?qn(n,e,1):qn(n,1)}function mi(n,e,t){const r=D(n)||e||t?{next:n,error:e,complete:t}:n;return r?oe((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(De(s,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),s.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):Jt}function Oc(n){return oe((e,t)=>{let s,r=null,i=!1;r=e.subscribe(De(t,void 0,void 0,o=>{s=Ft(n(o,Oc(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function pv(n,e){return oe(function z5(n,e,t,r,i){return(s,o)=>{let a=t,u=e,d=0;s.subscribe(De(o,p=>{const m=d++;u=a?n(u,p,m):(a=!0,p),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(n,e,arguments.length>=2,!0))}function eC(n){return n<=0?()=>_t:oe((e,t)=>{let r=[];e.subscribe(De(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ld(n){return oe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Wt="primary",qp=Symbol("RouteTitle");class Z5{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Vd(n){return new Z5(n)}function K5(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Bo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!UO(n[i],e[i]))return!1;return!0}function UO(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function BO(n){return n.length>0?n[n.length-1]:null}function bu(n){return function N5(n){return!!n&&(n instanceof ue||D(n.lift)&&D(n.subscribe))}(n)?n:Ap(n)?L(Promise.resolve(n)):me(n)}const Y5={exact:function HO(n,e,t){if(!kc(n.segments,e.segments)||!gv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!HO(n.children[r],e.children[r],t))return!1;return!0},subset:zO},jO={exact:function X5(n,e){return Bo(n,e)},subset:function J5(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>UO(n[t],e[t]))},ignored:()=>!0};function $O(n,e,t){return Y5[t.paths](n.root,e.root,t.matrixParams)&&jO[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function zO(n,e,t){return GO(n,e,e.segments,t)}function GO(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!kc(i,t)||e.hasChildren()||!gv(i,t,r))}if(n.segments.length===t.length){if(!kc(n.segments,t)||!gv(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!zO(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(kc(n.segments,i)&&gv(n.segments,i,r)&&n.children[Wt])&&GO(n.children[Wt],e,s,r)}}function gv(n,e,t){return e.every((r,i)=>jO[t](n[i].parameters,r.parameters))}class Ud{constructor(e=new On([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vd(this.queryParams)),this._queryParamMap}toString(){return nW.serialize(this)}}class On{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mv(this)}}class Wp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Vd(this.parameters)),this._parameterMap}toString(){return ZO(this)}}function kc(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Zp=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:function(){return new tC},providedIn:"root"})}return n})();class tC{parse(e){const t=new fW(e);return new Ud(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Kp(e.root,!0)}`,r=function sW(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${_v(t)}=${_v(i)}`).join("&"):`${_v(t)}=${_v(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function rW(n){return encodeURI(n)}(e.fragment)}`:""}`}}const nW=new tC;function mv(n){return n.segments.map(e=>ZO(e)).join("/")}function Kp(n,e){if(!n.hasChildren())return mv(n);if(e){const t=n.children[Wt]?Kp(n.children[Wt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Wt&&r.push(`${i}:${Kp(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function tW(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Wt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Wt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Wt?[Kp(n.children[Wt],!1)]:[`${i}:${Kp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Wt]?`${mv(n)}/${t[0]}`:`${mv(n)}/(${t.join("//")})`}}function qO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _v(n){return qO(n).replace(/%3B/gi,";")}function nC(n){return qO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yv(n){return decodeURIComponent(n)}function WO(n){return yv(n.replace(/\+/g,"%20"))}function ZO(n){return`${nC(n.path)}${function iW(n){return Object.keys(n).map(e=>`;${nC(e)}=${nC(n[e])}`).join("")}(n.parameters)}`}const oW=/^[^\/()?;#]+/;function rC(n){const e=n.match(oW);return e?e[0]:""}const aW=/^[^\/()?;=#]+/,cW=/^[^=?&#]+/,dW=/^[^&#]+/;class fW{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new On([],{}):new On([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Wt]=new On(e,t)),r}parseSegment(){const e=rC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new O(4009,!1);return this.capture(e),new Wp(yv(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function uW(n){const e=n.match(aW);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=rC(this.remaining);i&&(r=i,this.capture(r))}e[yv(t)]=yv(r)}parseQueryParam(e){const t=function lW(n){const e=n.match(cW);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function hW(n){const e=n.match(dW);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=WO(t),s=WO(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=rC(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new O(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Wt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Wt]:new On([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new O(4011,!1)}}function KO(n){return n.segments.length>0?new On([],{[Wt]:n}):n}function QO(n){const e={};for(const r of Object.keys(n.children)){const s=QO(n.children[r]);if(r===Wt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function pW(n){if(1===n.numberOfChildren&&n.children[Wt]){const e=n.children[Wt];return new On(n.segments.concat(e.segments),e.children)}return n}(new On(n.segments,e))}function Fc(n){return n instanceof Ud}function YO(n){let e;const i=KO(function t(s){const o={};for(const u of s.children){const d=t(u);o[u.outlet]=d}const a=new On(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function XO(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return iC(i,i,i,t,r);const s=function mW(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ek(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new ek(t,e,r)}(e);if(s.toRoot())return iC(i,i,new On([],{}),t,r);const o=function _W(n,e,t){if(n.isAbsolute)return new Ev(e,!0,0);if(!t)return new Ev(e,!1,NaN);if(null===t.parent)return new Ev(t,!0,0);const r=vv(n.commands[0])?0:1;return function yW(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new O(4005,!1);i=r.segments.length}return new Ev(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?Yp(o.segmentGroup,o.index,s.commands):tk(o.segmentGroup,o.index,s.commands);return iC(i,o.segmentGroup,a,t,r)}function vv(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Qp(n){return"object"==typeof n&&null!=n&&n.outlets}function iC(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`}),o=n===e?t:JO(n,e,t);const a=KO(QO(o));return new Ud(a,s,i)}function JO(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:JO(s,e,t)}),new On(n.segments,r)}class ek{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&vv(r[0]))throw new O(4003,!1);const i=r.find(Qp);if(i&&i!==BO(r))throw new O(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ev{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function tk(n,e,t){if(n||(n=new On([],{})),0===n.segments.length&&n.hasChildren())return Yp(n,e,t);const r=function EW(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Qp(a))break;const u=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!rk(u,d,o))return s;r+=2}else{if(!rk(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new On(n.segments.slice(0,r.pathIndex),{});return s.children[Wt]=new On(n.segments.slice(r.pathIndex),n.children),Yp(s,0,i)}return r.match&&0===i.length?new On(n.segments,{}):r.match&&!n.hasChildren()?sC(n,e,t):r.match?Yp(n,0,i):sC(n,e,t)}function Yp(n,e,t){if(0===t.length)return new On(n.segments,{});{const r=function vW(n){return Qp(n[0])?n[0].outlets:{[Wt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Wt)&&n.children[Wt]&&1===n.numberOfChildren&&0===n.children[Wt].segments.length){const s=Yp(n.children[Wt],e,t);return new On(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=tk(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new On(n.segments,i)}}function sC(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Qp(s)){const u=IW(s.outlets);return new On(r,u)}if(0===i&&vv(t[0])){r.push(new Wp(n.segments[e].path,nk(t[0]))),i++;continue}const o=Qp(s)?s.outlets[Wt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&vv(a)?(r.push(new Wp(o,nk(a))),i+=2):(r.push(new Wp(o,{})),i++)}return new On(r,{})}function IW(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=sC(new On([],{}),0,r))}),e}function nk(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function rk(n,e,t){return n==t.path&&Bo(e,t.parameters)}const Xp="imperative";class jo{constructor(e,t){this.id=e,this.url=t}}class Iv extends jo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Cu extends jo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Jp extends jo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Bd extends jo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class wv extends jo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ik extends jo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wW extends jo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TW extends jo{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bW extends jo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CW extends jo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DW{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class AW{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class SW{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RW{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PW{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class MW{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sk{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class oC{}class aC{constructor(e){this.url=e}}class xW{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new eg,this.attachRef=null}}let eg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new xW,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class ok{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=uC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=uC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=cC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return cC(e,this._root).map(t=>t.value)}}function uC(n,e){if(n===e.value)return e;for(const t of e.children){const r=uC(n,t);if(r)return r}return null}function cC(n,e){if(n===e.value)return[e];for(const t of e.children){const r=cC(n,t);if(r.length)return r.unshift(e),r}return[]}class Da{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function jd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ak extends ok{constructor(e,t){super(e),this.snapshot=t,lC(this,e)}toString(){return this.snapshot.toString()}}function uk(n,e){const t=function NW(n,e){const o=new Tv([],{},{},"",{},Wt,e,null,{});return new lk("",new Da(o,[]))}(0,e),r=new ne([new Wp("",{})]),i=new ne({}),s=new ne({}),o=new ne({}),a=new ne(""),u=new $d(r,i,o,a,s,Wt,e,t.root);return u.snapshot=t.root,new ak(new Da(u,[]),t)}class $d{constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ze(d=>d[qp]))??me(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ze(e=>Vd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ze(e=>Vd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ck(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function OW(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Tv{get title(){return this.data?.[qp]}constructor(e,t,r,i,s,o,a,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Vd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lk extends ok{constructor(e,t){super(t),this.url=e,lC(this,t)}toString(){return dk(this._root)}}function lC(n,e){e.value._routerState=n,e.children.forEach(t=>lC(n,t))}function dk(n){const e=n.children.length>0?` { ${n.children.map(dk).join(", ")} } `:"";return`${n.value}${e}`}function dC(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Bo(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Bo(e.params,t.params)||n.paramsSubject.next(t.params),function Q5(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Bo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Bo(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function hC(n,e){const t=Bo(n.params,e.params)&&function eW(n,e){return kc(n,e)&&n.every((t,r)=>Bo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||hC(n.parent,e.parent))}let fC=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Wt,this.activateEvents=new Tr,this.deactivateEvents=new Tr,this.attachEvents=new Tr,this.detachEvents=new Tr,this.parentContexts=et(eg),this.location=et(_o),this.changeDetector=et(qy),this.environmentInjector=et(Ps),this.inputBinder=et(bv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new O(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new O(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new O(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new O(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new kW(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Mt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[fs]})}return n})();class kW{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===$d?this.route:e===eg?this.childContexts:this.parent.get(e,t)}}const bv=new Ue("");let hk=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Yb([r.queryParams,r.params,r.data]).pipe(bt(([s,o,a],u)=>(a={...s,...o,...a},0===u?me(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function l9(n){const e=en(n);if(!e)return null;const t=new wp(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac})}return n})();function tg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function LW(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return tg(n,r,i);return tg(n,r)})}(n,e,t);return new Da(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>tg(n,a)),o}}const r=function VW(n){return new $d(new ne(n.url),new ne(n.params),new ne(n.queryParams),new ne(n.fragment),new ne(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>tg(n,s));return new Da(r,i)}}const pC="ngNavigationCancelingError";function fk(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Fc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=pk(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function pk(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[pC]=!0,r.cancellationCode=e,t&&(r.url=t),r}function gk(n){return n&&n[pC]}let mk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ki({type:n,selectors:[["ng-component"]],standalone:!0,features:[_x],decls:1,vars:0,template:function(r,i){1&r&&va(0,"router-outlet")},dependencies:[fC],encapsulation:2})}return n})();function gC(n){const e=n.children&&n.children.map(gC),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Wt&&(t.component=mk),t}function Eo(n){return n.outlet||Wt}function ng(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class qW{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),dC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=jd(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=jd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=jd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=jd(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new MW(s.value.snapshot))}),e.children.length&&this.forwardEvent(new RW(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(dC(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),dC(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=ng(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class _k{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Cv{constructor(e,t){this.component=e,this.route=t}}function WW(n,e,t){const r=n._root;return rg(r,e?e._root:null,t,[r.value])}function Hd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function Ee(n){return null!==pe(n)}(n)?e.get(n):n:r}function rg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=jd(e);return n.children.forEach(o=>{(function KW(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function QW(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!kc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!kc(n.url,e.url)||!Bo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hC(n,e)||!Bo(n.queryParams,e.queryParams);default:return!hC(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new _k(r)):(s.data=o.data,s._resolvedData=o._resolvedData),rg(n,e,s.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Cv(a.outlet.component,o))}else o&&ig(e,a,i),i.canActivateChecks.push(new _k(r)),rg(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ig(a,t.getContext(o),i)),i}function ig(n,e,t){const r=jd(n),i=n.value;Object.entries(r).forEach(([s,o])=>{ig(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Cv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function sg(n){return"function"==typeof n}function yk(n){return n instanceof dv||"EmptyError"===n?.name}const Dv=Symbol("INITIAL_VALUE");function zd(){return bt(n=>Yb(n.map(e=>e.pipe(kd(1),hv(Dv)))).pipe(ze(e=>{for(const t of e)if(!0!==t){if(t===Dv)return Dv;if(!1===t||t instanceof Ud)return t}return!0}),Ys(e=>e!==Dv),kd(1)))}function vk(n){return function Qn(...n){return vr(n)}(mi(e=>{if(Fc(e))throw fk(0,e)}),ze(e=>!0===e))}class Av{constructor(e){this.segmentGroup=e||null}}class Ek{constructor(e){this.urlTree=e}}function Gd(n){return Gp(new Av(n))}function Ik(n){return Gp(new Ek(n))}class m8{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new O(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return me(r);if(i.numberOfChildren>1||!i.children[Wt])return Gp(new O(4e3,!1));i=i.children[Wt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Ud(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new On(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new O(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const mC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _8(n,e,t,r,i){const s=_C(n,e,t);return s.matched?(r=function BW(n,e){return n.providers&&!n._injector&&(n._injector=ZT(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function f8(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?me(i.map(o=>{const a=Hd(o,n);return bu(function n8(n){return n&&sg(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(zd(),vk()):me(!0)}(r,e,t).pipe(ze(o=>!0===o?s:{...mC}))):me(s)}function _C(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...mC}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||K5)(t,n,e);if(!i)return{...mC};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function wk(n,e,t,r){return t.length>0&&function E8(n,e,t){return t.some(r=>Sv(n,e,r)&&Eo(r)!==Wt)}(n,t,r)?{segmentGroup:new On(e,v8(r,new On(t,n.children))),slicedSegments:[]}:0===t.length&&function I8(n,e,t){return t.some(r=>Sv(n,e,r))}(n,t,r)?{segmentGroup:new On(n.segments,y8(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new On(n.segments,n.children),slicedSegments:t}}function y8(n,e,t,r,i){const s={};for(const o of r)if(Sv(n,t,o)&&!i[Eo(o)]){const a=new On([],{});s[Eo(o)]=a}return{...i,...s}}function v8(n,e){const t={};t[Wt]=e;for(const r of n)if(""===r.path&&Eo(r)!==Wt){const i=new On([],{});t[Eo(r)]=i}return t}function Sv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class C8{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new m8(this.urlSerializer,this.urlTree)}noMatchError(e){return new O(4002,!1)}recognize(){const e=wk(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Wt).pipe(Oc(t=>{if(t instanceof Ek)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Av?this.noMatchError(t):t}),ze(t=>{const r=new Tv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Wt,this.rootComponentType,null,{}),i=new Da(r,t),s=new lk("",i),o=function gW(n,e,t=null,r=null){return XO(YO(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Wt).pipe(Oc(r=>{throw r instanceof Av?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=ck(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return L(i).pipe(Fd(s=>{const o=r.children[s],a=function zW(n,e){const t=n.filter(r=>Eo(r)===e);return t.push(...n.filter(r=>Eo(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),pv((s,o)=>(s.push(...o),s)),fv(null),function G5(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ys((i,s)=>n(i,s,r)):Jt,eC(1),t?fv(e):VO(()=>new dv))}(),qn(s=>{if(null===s)return Gd(r);const o=Tk(s);return function D8(n){n.sort((e,t)=>e.value.outlet===Wt?-1:t.value.outlet===Wt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),me(o)}))}processSegment(e,t,r,i,s,o){return L(t).pipe(Fd(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Oc(u=>{if(u instanceof Av)return me(null);throw u}))),Tu(a=>!!a),Oc(a=>{if(yk(a))return function T8(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?me([]):Gd(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function w8(n,e,t,r){return!!(Eo(n)===r||r!==Wt&&Sv(e,t,n))&&("**"===n.path||_C(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Gd(i):Gd(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ik(s):this.applyRedirects.lineralizeSegments(r,s).pipe(qn(o=>{const a=new On(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:d,positionalParamSegments:p}=_C(t,i,s);if(!a)return Gd(t);const m=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,p);return i.redirectTo.startsWith("/")?Ik(m):this.applyRedirects.lineralizeSegments(i,m).pipe(qn(v=>this.processSegment(e,r,t,v.concat(d),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?BO(i).parameters:{};a=me({snapshot:new Tv(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,bk(r),Eo(r),r.component??r._loadedComponent??null,r,Ck(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=_8(t,r,i,e).pipe(ze(({matched:u,consumedSegments:d,remainingSegments:p,parameters:m})=>u?{snapshot:new Tv(d,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,bk(r),Eo(r),r.component??r._loadedComponent??null,r,Ck(r)),consumedSegments:d,remainingSegments:p}:null));return a.pipe(bt(u=>null===u?Gd(t):this.getChildConfig(e=r._injector??e,r,i).pipe(bt(({routes:d})=>{const p=r._loadedInjector??e,{snapshot:m,consumedSegments:v,remainingSegments:T}=u,{segmentGroup:S,slicedSegments:R}=wk(t,v,T,d);if(0===R.length&&S.hasChildren())return this.processChildren(p,d,S).pipe(ze(X=>null===X?null:[new Da(m,X)]));if(0===d.length&&0===R.length)return me([new Da(m,[])]);const M=Eo(r)===s;return this.processSegment(p,d,S,R,M?Wt:s,!0).pipe(ze(X=>[new Da(m,X)]))}))))}getChildConfig(e,t,r){return t.children?me({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?me({routes:t._loadedRoutes,injector:t._loadedInjector}):function h8(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?me(!0):me(i.map(o=>{const a=Hd(o,n);return bu(function XW(n){return n&&sg(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(zd(),vk())}(e,t,r).pipe(qn(i=>i?this.configLoader.loadChildren(e,t).pipe(mi(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function g8(n){return Gp(pk(!1,3))}())):me({routes:[],injector:e})}}function A8(n){const e=n.value.routeConfig;return e&&""===e.path}function Tk(n){const e=[],t=new Set;for(const r of n){if(!A8(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Tk(r.children);e.push(new Da(r.value,i))}return e.filter(r=>!t.has(r))}function bk(n){return n.data||{}}function Ck(n){return n.resolve||{}}function Dk(n){return"string"==typeof n.title||null===n.title}function yC(n){return bt(e=>{const t=n(e);return t?L(t).pipe(ze(()=>e)):me(e)})}const qd=new Ue("ROUTES");let vC=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=et(aN)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return me(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=bu(t.loadComponent()).pipe(ze(Ak),mi(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Ld(()=>{this.componentLoaders.delete(t)})),i=new LO(r,()=>new te).pipe(Jb());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return me({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function O8(n,e,t,r){return bu(n.loadChildren()).pipe(ze(Ak),qn(i=>i instanceof gx||Array.isArray(i)?me(i):L(e.compileModuleAsync(i))),ze(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(qd,[],{optional:!0,self:!0}).flat()),{routes:o.map(gC),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Ld(()=>{this.childrenLoaders.delete(r)})),o=new LO(s,()=>new te).pipe(Jb());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ak(n){return function k8(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Rv=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new te,this.transitionAbortSubject=new te,this.configLoader=et(vC),this.environmentInjector=et(Ps),this.urlSerializer=et(Zp),this.rootContexts=et(eg),this.inputBindingEnabled=null!==et(bv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>me(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new AW(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new DW(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new ne({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Xp,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ys(s=>0!==s.id),ze(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),bt(s=>{this.currentTransition=s;let o=!1,a=!1;return me(s).pipe(mi(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),bt(u=>{const d=u.currentBrowserUrl.toString(),p=!t.navigated||u.extractedUrl.toString()!==d||d!==u.currentUrlTree.toString();if(!p&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const v="";return this.events.next(new Bd(u.id,this.urlSerializer.serialize(u.rawUrl),v,0)),u.resolve(null),_t}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return me(u).pipe(bt(v=>{const T=this.transitions?.getValue();return this.events.next(new Iv(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),T!==this.transitions?.getValue()?_t:Promise.resolve(v)}),function S8(n,e,t,r,i,s){return qn(o=>function b8(n,e,t,r,i,s,o="emptyOnly"){return new C8(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(ze(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),mi(v=>{s.targetSnapshot=v.targetSnapshot,s.urlAfterRedirects=v.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:v.urlAfterRedirects};const T=new ik(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(T)}));if(p&&t.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:v,extractedUrl:T,source:S,restoredState:R,extras:M}=u,X=new Iv(v,this.urlSerializer.serialize(T),S,R);this.events.next(X);const j=uk(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:j,urlAfterRedirects:T,extras:{...M,skipLocationChange:!1,replaceUrl:!1}},me(s)}{const v="";return this.events.next(new Bd(u.id,this.urlSerializer.serialize(u.extractedUrl),v,1)),u.resolve(null),_t}}),mi(u=>{const d=new wW(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),ze(u=>(this.currentTransition=s={...u,guards:WW(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function i8(n,e){return qn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?me({...t,guardsResult:!0}):function s8(n,e,t,r){return L(n).pipe(qn(i=>function d8(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?me(s.map(a=>{const u=ng(e)??i,d=Hd(a,u);return bu(function t8(n){return n&&sg(n.canDeactivate)}(d)?d.canDeactivate(n,e,t,r):u.runInContext(()=>d(n,e,t,r))).pipe(Tu())})).pipe(zd()):me(!0)}(i.component,i.route,t,e,r)),Tu(i=>!0!==i,!0))}(o,r,i,n).pipe(qn(a=>a&&function YW(n){return"boolean"==typeof n}(a)?function o8(n,e,t,r){return L(e).pipe(Fd(i=>Xb(function u8(n,e){return null!==n&&e&&e(new SW(n)),me(!0)}(i.route.parent,r),function a8(n,e){return null!==n&&e&&e(new PW(n)),me(!0)}(i.route,r),function l8(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function ZW(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>FO(()=>me(o.guards.map(u=>{const d=ng(o.node)??t,p=Hd(u,d);return bu(function e8(n){return n&&sg(n.canActivateChild)}(p)?p.canActivateChild(r,n):d.runInContext(()=>p(r,n))).pipe(Tu())})).pipe(zd())));return me(s).pipe(zd())}(n,i.path,t),function c8(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return me(!0);const i=r.map(s=>FO(()=>{const o=ng(e)??t,a=Hd(s,o);return bu(function JW(n){return n&&sg(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Tu())}));return me(i).pipe(zd())}(n,i.route,t))),Tu(i=>!0!==i,!0))}(r,s,n,e):me(a)),ze(a=>({...t,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),mi(u=>{if(s.guardsResult=u.guardsResult,Fc(u.guardsResult))throw fk(0,u.guardsResult);const d=new TW(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),Ys(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),yC(u=>{if(u.guards.canActivateChecks.length)return me(u).pipe(mi(d=>{const p=new bW(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),bt(d=>{let p=!1;return me(d).pipe(function R8(n,e){return qn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return me(t);let s=0;return L(i).pipe(Fd(o=>function P8(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!Dk(i)&&(s[qp]=i.title),function M8(n,e,t,r){const i=function x8(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return me({});const s={};return L(i).pipe(qn(o=>function N8(n,e,t,r){const i=ng(e)??r,s=Hd(n,i);return bu(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Tu(),mi(a=>{s[o]=a}))),eC(1),function q5(n){return ze(()=>n)}(s),Oc(o=>yk(o)?_t:Gp(o)))}(s,n,e,r).pipe(ze(o=>(n._resolvedData=o,n.data=ck(n,t).resolve,i&&Dk(i)&&(n.data[qp]=i.title),null)))}(o.route,r,n,e)),mi(()=>s++),eC(1),qn(o=>s===i.length?me(t):_t))})}(t.paramsInheritanceStrategy,this.environmentInjector),mi({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(d,"",2)}}))}),mi(d=>{const p=new CW(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}))}),yC(u=>{const d=p=>{const m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(mi(v=>{p.component=v}),ze(()=>{})));for(const v of p.children)m.push(...d(v));return m};return Yb(d(u.targetSnapshot.root)).pipe(fv(),kd(1))}),yC(()=>this.afterPreactivation()),ze(u=>{const d=function FW(n,e,t){const r=tg(n,e._root,t?t._root:void 0);return new ak(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:d},s}),mi(()=>{this.events.next(new oC)}),((n,e,t,r)=>ze(i=>(new qW(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),kd(1),mi({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Cu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function W5(n){return oe((e,t)=>{Ft(n).subscribe(De(t,()=>t.complete(),Ye)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(mi(u=>{throw u}))),Ld(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Oc(u=>{if(a=!0,gk(u))this.events.next(new Jp(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function UW(n){return gk(n)&&Fc(n.url)}(u)?this.events.next(new aC(u.url)):s.resolve(!1);else{this.events.next(new wv(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(u))}catch(d){s.reject(d)}}return _t}))}))}cancelNavigationTransition(t,r,i){const s=new Jp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sk(n){return n!==Xp}let Rk=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Wt);return r}getResolvedTitleForRoute(t){return t.data[qp]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:function(){return et(F8)},providedIn:"root"})}return n})(),F8=(()=>{class n extends Rk{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(SO))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),L8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:function(){return et(U8)},providedIn:"root"})}return n})();class V8{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let U8=(()=>{class n extends V8{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Zr(n)))(i||n)}}();static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Pv=new Ue("",{providedIn:"root",factory:()=>({})});let B8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:function(){return et(j8)},providedIn:"root"})}return n})(),j8=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var og=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(og||{});function Pk(n,e){n.events.pipe(Ys(t=>t instanceof Cu||t instanceof Jp||t instanceof wv||t instanceof Bd),ze(t=>t instanceof Cu||t instanceof Bd?og.COMPLETE:t instanceof Jp&&(0===t.code||1===t.code)?og.REDIRECTING:og.FAILED),Ys(t=>t!==og.REDIRECTING),kd(1)).subscribe(()=>{e()})}function $8(n){throw n}function H8(n,e,t){return e.parse("/")}const z8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},G8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Xs=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=et(oN),this.isNgZoneEnabled=!1,this._events=new te,this.options=et(Pv,{optional:!0})||{},this.pendingTasks=et($y),this.errorHandler=this.options.errorHandler||$8,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||H8,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=et(B8),this.routeReuseStrategy=et(L8),this.titleStrategy=et(Rk),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=et(qd,{optional:!0})?.flat()??[],this.navigationTransitions=et(Rv),this.urlSerializer=et(Zp),this.location=et(Db),this.componentInputBindingEnabled=!!et(bv,{optional:!0}),this.eventsSubscription=new je,this.isNgZoneEnabled=et(Sn)instanceof Sn&&Sn.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ud,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=uk(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(Mk(r)&&this._events.next(r));if(r instanceof Iv)Sk(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Bd)this.rawUrlTree=i.rawUrl;else if(r instanceof ik){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof oC)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Jp)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof aC){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Sk(i.source)};this.scheduleNavigation(s,Xp,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof wv&&this.restoreHistory(i,!0),r instanceof Cu&&(this.navigated=!0),Mk(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Xp,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(gC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o;let m,p=null;switch(a){case"merge":p={...this.currentUrlTree.queryParams,...s};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}null!==p&&(p=this.removeEmptyProps(p));try{m=YO(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return XO(m,t,p,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Fc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Xp,null,r)}navigate(t,r={skipLocationChange:!1}){return function q8(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new O(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...z8}:!1===r?{...G8}:r,Fc(t))return $O(this.currentUrlTree,t,i);const s=this.parseUrl(t);return $O(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,d;o?(a=o.resolve,u=o.reject,d=o.promise):d=new Promise((m,v)=>{a=m,u=v});const p=this.pendingTasks.add();return Pk(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Mk(n){return!(n instanceof oC||n instanceof aC)}let ag=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new te,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof Cu&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function _R(n,e,t){return function T$(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?mR:fp}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(ke(Xs),ke($d),function Kl(n){return function Wf(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(nf(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Pr(),n)}("tabindex"),ke(ga),ke(Ms),ke(Nc))};static#t=this.\u0275dir=Mt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Bt("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Lo("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Nd],skipLocationChange:["skipLocationChange","skipLocationChange",Nd],replaceUrl:["replaceUrl","replaceUrl",Nd],routerLink:"routerLink"},standalone:!0,features:[MP,fs]})}return n})(),xk=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,s,o){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Tr,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Cu&&this.update()})}ngAfterContentInit(){me(this.links.changes,me(null)).pipe(Ti()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=L(t).pipe(Ti()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function W8(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ke(Xs),ke(Ms),ke(ga),ke(qy),ke(ag,8))};static#t=this.\u0275dir=Mt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(1&r&&function Bx(n,e,t,r){const i=fn();if(i.firstCreatePass){const s=Pr();$x(i,new Vx(e,t,r),s.index),function OG(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}jx(i,Ae(),t)}(s,ag,5),2&r){let o;Sd(o=Rd())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[fs]})}return n})();class Nk{}let Z8=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ys(t=>t instanceof Cu),Fd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=ZT(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return L(i).pipe(Ti())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):me(null);const s=i.pipe(qn(o=>null===o?me(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?L([s,this.loader.loadComponent(r)]).pipe(Ti()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(Xs),Ne(aN),Ne(Ps),Ne(Nk),Ne(vC))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const EC=new Ue("");let Ok=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Iv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Cu?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Bd&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof sk&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new sk(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function iP(){throw new Error("invalid")}()};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac})}return n})();function Aa(n,e){return{\u0275kind:n,\u0275providers:e}}function Fk(){const n=et(xs);return e=>{const t=n.get(xd);if(e!==t.components[0])return;const r=n.get(Xs),i=n.get(Lk);1===n.get(IC)&&r.initialNavigation(),n.get(Vk,null,ft.Optional)?.setUpPreloading(),n.get(EC,null,ft.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const Lk=new Ue("",{factory:()=>new te}),IC=new Ue("",{providedIn:"root",factory:()=>1}),Vk=new Ue("");function X8(n){return Aa(0,[{provide:Vk,useExisting:Z8},{provide:Nk,useExisting:n}])}const Uk=new Ue("ROUTER_FORROOT_GUARD"),eZ=[Db,{provide:Zp,useClass:tC},Xs,eg,{provide:$d,useFactory:function kk(n){return n.routerState.root},deps:[Xs]},vC,[]];function tZ(){return new pN("Router",Xs)}let Bk=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[eZ,[],{provide:qd,multi:!0,useValue:t},{provide:Uk,useFactory:sZ,deps:[[Xs,new pu,new Xl]]},{provide:Pv,useValue:r||{}},r?.useHash?{provide:Nc,useClass:g9}:{provide:Nc,useClass:GN},{provide:EC,useFactory:()=>{const n=et(N6),e=et(Sn),t=et(Pv),r=et(Rv),i=et(Zp);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Ok(i,r,n,e,t)}},r?.preloadingStrategy?X8(r.preloadingStrategy).\u0275providers:[],{provide:pN,multi:!0,useFactory:tZ},r?.initialNavigation?oZ(r):[],r?.bindToComponentInputs?Aa(8,[hk,{provide:bv,useExisting:hk}]).\u0275providers:[],[{provide:jk,useFactory:Fk},{provide:mb,multi:!0,useExisting:jk}]]}}static forChild(t){return{ngModule:n,providers:[{provide:qd,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(Uk,8))};static#t=this.\u0275mod=ri({type:n});static#n=this.\u0275inj=Ie({})}return n})();function sZ(n){return"guarded"}function oZ(n){return["disabled"===n.initialNavigation?Aa(3,[{provide:ub,multi:!0,useFactory:()=>{const e=et(Xs);return()=>{e.setUpLocationChangeListener()}}},{provide:IC,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Aa(2,[{provide:IC,useValue:0},{provide:ub,multi:!0,deps:[xs],useFactory:e=>{const t=e.get(f9,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Xs),s=e.get(Lk);Pk(i,()=>{r(!0)}),e.get(Rv).afterPreactivation=()=>(r(!0),s.closed?me(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const jk=new Ue("");var he=ye(861),uZ=ye(778),cZ=ye.n(uZ);let lZ=(()=>{class n{constructor(){}extraerTextoDeImagen(t){return(0,he.Z)(function*(){return cZ().recognize(t,"spa",{logger:r=>console.log(r)}).then(({data:{text:r}})=>r)})()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dZ(n,e){1&n&&(Re(0,"div",4)(1,"span",5),qe(2,"Cargando..."),be()())}function hZ(n,e){if(1&n&&(Re(0,"div",6),qe(1),be()),2&n){const t=Zs();Nt(1),yu(t.error)}}function fZ(n,e){if(1&n&&(Re(0,"div")(1,"h2"),qe(2,"Texto Extra\xeddo:"),be(),Re(3,"pre"),qe(4),be()()),2&n){const t=Zs();Nt(4),yu(t.text)}}let pZ=(()=>{class n{constructor(t){this.tesseractService=t,this.text=null,this.isLoading=!1,this.error=null,this.fileReader=null}onFileChange(t){const r=t.target.files[0];if(r){if(!r.type.startsWith("image/"))return this.error="Por favor, seleccione una imagen v\xe1lida.",void(this.isLoading=!1);this.isLoading=!0,this.error=null,this.fileReader=new FileReader,this.fileReader.onload=()=>{this.tesseractService.extraerTextoDeImagen(this.fileReader?.result).then(i=>{this.text=i,this.isLoading=!1}).catch(i=>{console.error(i),this.error="Error al reconocer el texto",this.isLoading=!1})},this.fileReader.readAsDataURL(r)}}ngOnDestroy(){this.fileReader&&this.fileReader.abort()}static#e=this.\u0275fac=function(r){return new(r||n)(ke(lZ))};static#t=this.\u0275cmp=Ki({type:n,selectors:[["app-ocr"]],decls:7,vars:3,consts:[["type","file","accept","image/*",1,"form-control","mb-3",3,"change"],["class","spinner-border text-primary","role","status",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"alert","alert-danger"]],template:function(r,i){1&r&&(Re(0,"div")(1,"h1"),qe(2,"Extracci\xf3n de texto con Tesseract.js"),be(),Re(3,"input",0),Bt("change",function(o){return i.onFileChange(o)}),be(),Vr(4,dZ,3,0,"div",1),Vr(5,hZ,2,1,"div",2),Vr(6,fZ,5,1,"div",3),be()),2&r&&(Nt(4),zt("ngIf",i.isLoading),Nt(1),zt("ngIf",i.error),Nt(1),zt("ngIf",i.text))},dependencies:[Iu],styles:[".spinner-border[_ngcontent-%COMP%], .alert[_ngcontent-%COMP%]{margin-top:20px}pre[_ngcontent-%COMP%]{white-space:pre-wrap;word-wrap:break-word}"]})}return n})();class gZ{constructor(e){this.imagenPath="",this.modelCamara=e}activarCamara(){this.modelCamara.iniciar()}ejecutar(){var e=this;return(0,he.Z)(function*(){return e.imagenPath=yield e.modelCamara.tomarFoto(),e.imagenPath})()}detener(){this.modelCamara.detener()}cambiarCamara(){this.modelCamara.cambiarCamara()}}class mZ{constructor(e,t="user",r=null,i=null){this._webcamElement=e,this._webcamElement.width=this._webcamElement.width||640,this._webcamElement.height=this._webcamElement.height||360,this._facingMode=t,this._webcamList=[],this._streamList=[],this._selectedDeviceId="",this._canvasElement=r,this._snapSoundElement=i}get facingMode(){return this._facingMode}set facingMode(e){this._facingMode=e}get webcamList(){return this._webcamList}get webcamCount(){return this._webcamList.length}get selectedDeviceId(){return this._selectedDeviceId}getVideoInputs(e){return this._webcamList=[],e.forEach(t=>{"videoinput"===t.kind&&this._webcamList.push(t)}),1==this._webcamList.length&&(this._facingMode="user"),this._webcamList}getMediaConstraints(){var e={};return""==this._selectedDeviceId?e.facingMode=this._facingMode:e.deviceId={exact:this._selectedDeviceId},e.width={exact:this._webcamElement.width},e.height={exact:this._webcamElement.height},{video:e,audio:!1}}selectCamera(){for(let e of this._webcamList)if("user"==this._facingMode&&e.label.toLowerCase().includes("front")||"enviroment"==this._facingMode&&e.label.toLowerCase().includes("back")){this._selectedDeviceId=e.deviceId;break}}flip(){this._facingMode="user"==this._facingMode?"enviroment":"user",this._webcamElement.style.transform="",this.selectCamera()}start(e=!0){var t=this;return(0,he.Z)(function*(){return new Promise((r,i)=>{t.stop(),navigator.mediaDevices.getUserMedia(t.getMediaConstraints()).then(s=>{t._streamList.push(s),t.info().then(o=>{t.selectCamera(),e?t.stream().then(a=>{r(t._facingMode)}).catch(a=>{i(a)}):r(t._selectedDeviceId)}).catch(o=>{i(o)})}).catch(s=>{i(s)})})})()}info(){var e=this;return(0,he.Z)(function*(){return new Promise((t,r)=>{navigator.mediaDevices.enumerateDevices().then(i=>{e.getVideoInputs(i),t(e._webcamList)}).catch(i=>{r(i)})})})()}stream(){var e=this;return(0,he.Z)(function*(){return new Promise((t,r)=>{navigator.mediaDevices.getUserMedia(e.getMediaConstraints()).then(i=>{e._streamList.push(i),e._webcamElement.srcObject=i,"user"==e._facingMode&&(e._webcamElement.style.transform="scale(-1,1)"),e._webcamElement.play(),t(e._facingMode)}).catch(i=>{console.log(i),r(i)})})})()}stop(){this._streamList.forEach(e=>{e.getTracks().forEach(t=>{t.stop()})})}snap(){if(null!=this._canvasElement){null!=this._snapSoundElement&&this._snapSoundElement.play(),this._canvasElement.height=this._webcamElement.scrollHeight,this._canvasElement.width=this._webcamElement.scrollWidth;let e=this._canvasElement.getContext("2d");return"user"==this._facingMode&&(e.translate(this._canvasElement.width,0),e.scale(-1,1)),e.clearRect(0,0,this._canvasElement.width,this._canvasElement.height),e.drawImage(this._webcamElement,0,0,this._canvasElement.width,this._canvasElement.height),this._canvasElement.toDataURL("image/png")}throw"canvas element is missing"}}class _Z{constructor(e,t,r){typeof navigator<"u"?(this.videoElement=e,this.canvasElement=t,this.snapSoundElement=r,this.webcam=new mZ(this.videoElement,"user",this.canvasElement,this.snapSoundElement)):console.error("El navegador no est\xe1 definido. Aseg\xfarese de que este c\xf3digo se ejecuta en un entorno de navegador.")}iniciar(){this.webcam&&this.webcam.start().then(e=>{console.log("Webcam started")}).catch(e=>{console.error(e)})}tomarFoto(){var e=this;return(0,he.Z)(function*(){try{if(e.webcam){const t=e.webcam.snap(),r=new Image;return r.src=t,new Promise((i,s)=>{r.onload=()=>{const o=e.canvasElement.getContext("2d");o?(o.clearRect(0,0,e.canvasElement.width,e.canvasElement.height),o.drawImage(r,0,0,e.canvasElement.width,e.canvasElement.height),i(e.canvasElement.toDataURL("image/png"))):s("No se pudo obtener el contexto del canvas.")},r.onerror=o=>{s(`Error al cargar la imagen: ${o}`)}})}return""}catch(t){return console.error("Error taking photo: ",t),""}})()}detener(){this.webcam&&this.webcam.stop()}cambiarCamara(){this.webcam&&(this.webcam.flip(),this.webcam.start().then(e=>{console.log("Webcam flipped")}).catch(e=>{console.error(e)}))}}const yZ=["webcam"],vZ=["canvas"],EZ=["snapSound"];function IZ(n,e){1&n&&va(0,"img",19),2&n&&zt("src",Zs().imagenPath,fp)}let wZ=(()=>{class n{constructor(){this.imagenPath=null,this.CamaraIsActive=!0}ngOnInit(){const t=new _Z(this.videoElement.nativeElement,this.canvasElement.nativeElement,this.snapSoundElement.nativeElement);this.capturarImagenUseCase=new gZ(t),this.activarCamara()}activarCamara(){this.capturarImagenUseCase.activarCamara(),this.CamaraIsActive=!0}capturarImagen(){var t=this;return(0,he.Z)(function*(){t.imagenPath=yield t.capturarImagenUseCase.ejecutar()})()}detenerCamara(){this.capturarImagenUseCase.detener(),this.CamaraIsActive=!1}cambiarCamara(){this.capturarImagenUseCase.cambiarCamara()}ngOnDestroy(){this.detenerCamara()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ki({type:n,selectors:[["app-camara"]],viewQuery:function(r,i){if(1&r&&(Fp(yZ,7),Fp(vZ,7),Fp(EZ,7)),2&r){let s;Sd(s=Rd())&&(i.videoElement=s.first),Sd(s=Rd())&&(i.canvasElement=s.first),Sd(s=Rd())&&(i.snapSoundElement=s.first)}},decls:26,vars:1,consts:[[1,"container","mt-4"],[1,"row","justify-content-center"],[1,"col-md-8"],[1,"card"],[1,"card-header","text-center"],[1,"card-body","text-center"],[1,"btn-group","mb-3"],[1,"btn","btn-primary","me-2",3,"click"],[1,"btn","btn-secondary","me-2",3,"click"],[1,"btn","btn-success","me-2",3,"click"],[1,"btn","btn-warning",3,"click"],[1,"d-flex","justify-content-center"],["autoplay","","playsinline","",1,"video-camara","mb-3"],["webcam",""],[2,"display","none"],["canvas",""],["src","snap.wav","preload","auto"],["snapSound",""],["class","img-fluid img-capturada","alt","Imagen Capturada",3,"src",4,"ngIf"],["alt","Imagen Capturada",1,"img-fluid","img-capturada",3,"src"]],template:function(r,i){1&r&&(Re(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3"),qe(6,"Captura de Imagen"),be()(),Re(7,"div",5)(8,"div",6)(9,"button",7),Bt("click",function(){return i.capturarImagen()}),qe(10,"Capturar Imagen"),be(),Re(11,"button",8),Bt("click",function(){return i.detenerCamara()}),qe(12,"Detener C\xe1mara"),be(),Re(13,"button",9),Bt("click",function(){return i.activarCamara()}),qe(14,"Activar C\xe1mara"),be(),Re(15,"button",10),Bt("click",function(){return i.cambiarCamara()}),qe(16,"Cambiar C\xe1mara"),be()(),Re(17,"div",11),va(18,"video",12,13)(20,"canvas",14,15)(22,"audio",16,17),be(),Re(24,"div",11),Vr(25,IZ,1,1,"img",18),be()()()()()()),2&r&&(Nt(25),zt("ngIf",i.imagenPath))},dependencies:[Iu],styles:[".navbar-dark[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%], .navbar-dark[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#fff}.navbar-dark[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#ddd}.navbar-dark[_ngcontent-%COMP%]   .navbar-toggler[_ngcontent-%COMP%]{border-color:#ffffff1a}.active-link[_ngcontent-%COMP%]{color:gold!important}.container[_ngcontent-%COMP%]{margin-top:20px}"]})}return n})();var TZ=ye(61),bZ=ye.n(TZ);const CZ=["image"];function DZ(n,e){if(1&n&&(Re(0,"div",7),va(1,"img",8,9),be()),2&n){const t=Zs();Nt(1),zt("src",t.imageUrl,fp)}}let AZ=(()=>{class n{constructor(){this.scaleX=1,this.scaleY=1}onFileSelected(t){const r=t.target;if(r&&r.files&&r.files.length>0){const i=r.files[0],s=new FileReader;s.onload=()=>{s.result&&(this.imageUrl=s.result,setTimeout(()=>{this.cropper=new(bZ())(this.imageElement.nativeElement,{aspectRatio:NaN,viewMode:1,autoCropArea:.5,movable:!0,rotatable:!0,scalable:!0,zoomable:!0})},100))},s.readAsDataURL(i)}}rotateLeft(){this.cropper&&this.cropper.rotate(-45)}rotateRight(){this.cropper&&this.cropper.rotate(45)}flipX(){this.cropper&&(this.scaleX=-this.scaleX,this.cropper.scaleX(this.scaleX))}flipY(){this.cropper&&(this.scaleY=-this.scaleY,this.cropper.scaleY(this.scaleY))}downloadCroppedImage(){if(this.cropper){const r=this.cropper.getCroppedCanvas().toDataURL("image/png"),i=document.createElement("a");i.href=r,i.download="cropped-image.png",i.click()}}ngOnDestroy(){this.cropper&&this.cropper.destroy()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ki({type:n,selectors:[["app-image-editor"]],viewQuery:function(r,i){if(1&r&&Fp(CZ,5),2&r){let s;Sd(s=Rd())&&(i.imageElement=s.first)}},decls:15,vars:1,consts:[[1,"container"],[1,"image-container"],["type","file",1,"form-control","mb-3",3,"change"],["class","img-wrapper",4,"ngIf"],[1,"buttons-container"],[1,"btn","btn-primary","me-2",3,"click"],[1,"btn","btn-success",3,"click"],[1,"img-wrapper"],[1,"img-fluid",3,"src"],["image",""]],template:function(r,i){1&r&&(Re(0,"div",0)(1,"div",1)(2,"input",2),Bt("change",function(o){return i.onFileSelected(o)}),be(),Vr(3,DZ,3,1,"div",3),be(),Re(4,"div",4)(5,"button",5),Bt("click",function(){return i.rotateLeft()}),qe(6,"Rotate Left"),be(),Re(7,"button",5),Bt("click",function(){return i.rotateRight()}),qe(8,"Rotate Right"),be(),Re(9,"button",5),Bt("click",function(){return i.flipX()}),qe(10,"Flip X"),be(),Re(11,"button",5),Bt("click",function(){return i.flipY()}),qe(12,"Flip Y"),be(),Re(13,"button",6),Bt("click",function(){return i.downloadCroppedImage()}),qe(14,"Download"),be()()()),2&r&&(Nt(3),zt("ngIf",i.imageUrl))},dependencies:[Iu],styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.image-container[_ngcontent-%COMP%]{flex:1;max-width:40%}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}.buttons-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:20px}button[_ngcontent-%COMP%]{margin-bottom:10px}"]})}return n})();class Mv{}class xv{}class $o{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof $o?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new $o;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof $o?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class SZ{encodeKey(e){return $k(e)}encodeValue(e){return $k(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const PZ=/%(\d[a-f0-9])/gi,MZ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function $k(n){return encodeURIComponent(n).replace(PZ,(e,t)=>MZ[t]??e)}function Nv(n){return`${n}`}class Du{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new SZ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function RZ(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(a),t.set(o,u)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(Nv):[Nv(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Du({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Nv(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Nv(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class xZ{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Hk(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function zk(n){return typeof Blob<"u"&&n instanceof Blob}function Gk(n){return typeof FormData<"u"&&n instanceof FormData}class ug{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function NZ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new $o),this.context||(this.context=new xZ),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Du,this.urlWithParams=t}serializeBody(){return null===this.body?null:Hk(this.body)||zk(this.body)||Gk(this.body)||function OZ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Du?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Gk(this.body)?null:zk(this.body)?this.body.type||null:Hk(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Du?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,d=e.params||this.params;const p=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((m,v)=>m.set(v,e.setHeaders[v]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((m,v)=>m.set(v,e.setParams[v]),d)),new ug(t,r,s,{params:d,headers:u,context:p,reportProgress:a,responseType:i,withCredentials:o})}}var Wd=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Wd||{});class wC{constructor(e,t=200,r="OK"){this.headers=e.headers||new $o,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class TC extends wC{constructor(e={}){super(e),this.type=Wd.ResponseHeader}clone(e={}){return new TC({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Zd extends wC{constructor(e={}){super(e),this.type=Wd.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Zd({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class qk extends wC{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function bC(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let CC=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof ug)s=t;else{let u,d;u=i.headers instanceof $o?i.headers:new $o(i.headers),i.params&&(d=i.params instanceof Du?i.params:new Du({fromObject:i.params})),s=new ug(t,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=me(s).pipe(Fd(u=>this.handler.handle(u)));if(t instanceof ug||"events"===i.observe)return o;const a=o.pipe(Ys(u=>u instanceof Zd));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(ze(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(ze(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(ze(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(ze(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Du).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,bC(i,r))}post(t,r,i={}){return this.request("POST",t,bC(i,r))}put(t,r,i={}){return this.request("PUT",t,bC(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(Mv))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac})}return n})();function Kk(n,e){return e(n)}function FZ(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const VZ=new Ue(""),cg=new Ue(""),Qk=new Ue("");function UZ(){let n=null;return(e,t)=>{null===n&&(n=(et(VZ,{optional:!0})??[]).reduceRight(FZ,Kk));const r=et($y),i=r.add();return n(e,t).pipe(Ld(()=>r.remove(i)))}}let Yk=(()=>{class n extends Mv{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=et($y)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(cg),...this.injector.get(Qk,[])]));this.chain=i.reduceRight((s,o)=>function LZ(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(s,o,this.injector),Kk)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Ld(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(xv),Ne(Ps))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac})}return n})();const HZ=/^\)\]\}',?\n/;let Jk=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new O(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?L(r.\u0275loadImpl()):me(null)).pipe(bt(()=>new ue(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((R,M)=>o.setRequestHeader(R,M.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const R=t.detectContentTypeHeader();null!==R&&o.setRequestHeader("Content-Type",R)}if(t.responseType){const R=t.responseType.toLowerCase();o.responseType="json"!==R?R:"text"}const a=t.serializeBody();let u=null;const d=()=>{if(null!==u)return u;const R=o.statusText||"OK",M=new $o(o.getAllResponseHeaders()),X=function zZ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return u=new TC({headers:M,status:o.status,statusText:R,url:X}),u},p=()=>{let{headers:R,status:M,statusText:X,url:j}=d(),ee=null;204!==M&&(ee=typeof o.response>"u"?o.responseText:o.response),0===M&&(M=ee?200:0);let ge=M>=200&&M<300;if("json"===t.responseType&&"string"==typeof ee){const $e=ee;ee=ee.replace(HZ,"");try{ee=""!==ee?JSON.parse(ee):null}catch(ct){ee=$e,ge&&(ge=!1,ee={error:ct,text:ee})}}ge?(s.next(new Zd({body:ee,headers:R,status:M,statusText:X,url:j||void 0})),s.complete()):s.error(new qk({error:ee,headers:R,status:M,statusText:X,url:j||void 0}))},m=R=>{const{url:M}=d(),X=new qk({error:R,status:o.status||0,statusText:o.statusText||"Unknown Error",url:M||void 0});s.error(X)};let v=!1;const T=R=>{v||(s.next(d()),v=!0);let M={type:Wd.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(M.total=R.total),"text"===t.responseType&&o.responseText&&(M.partialText=o.responseText),s.next(M)},S=R=>{let M={type:Wd.UploadProgress,loaded:R.loaded};R.lengthComputable&&(M.total=R.total),s.next(M)};return o.addEventListener("load",p),o.addEventListener("error",m),o.addEventListener("timeout",m),o.addEventListener("abort",m),t.reportProgress&&(o.addEventListener("progress",T),null!==a&&o.upload&&o.upload.addEventListener("progress",S)),o.send(a),s.next({type:Wd.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",p),o.removeEventListener("timeout",m),t.reportProgress&&(o.removeEventListener("progress",T),null!==a&&o.upload&&o.upload.removeEventListener("progress",S)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(lO))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac})}return n})();const DC=new Ue("XSRF_ENABLED"),e1=new Ue("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),t1=new Ue("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class n1{}let WZ=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=tO(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(Os),Ne(po),Ne(e1))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac})}return n})();function ZZ(n,e){const t=n.url.toLowerCase();if(!et(DC)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=et(n1).getToken(),i=et(t1);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Au=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Au||{});function KZ(...n){const e=[CC,Jk,Yk,{provide:Mv,useExisting:Yk},{provide:xv,useExisting:Jk},{provide:cg,useValue:ZZ,multi:!0},{provide:DC,useValue:!0},{provide:n1,useClass:WZ}];for(const t of n)e.push(...t.\u0275providers);return function jw(n){return{\u0275providers:n}}(e)}const r1=new Ue("LEGACY_INTERCEPTOR_FN");function QZ(){return function Lc(n,e){return{\u0275kind:n,\u0275providers:e}}(Au.LegacyInterceptors,[{provide:r1,useFactory:UZ},{provide:cg,useExisting:r1,multi:!0}])}let YZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=ri({type:n});static#n=this.\u0275inj=Ie({providers:[KZ(QZ())]})}return n})(),r7=(()=>{class n{constructor(t){this.http=t,this.irrelevantWords=new Set(["LA","DEL","EL","Y","EN","A","AL","LAS","POR","CON","PARA","SE"]),this.namesSet=new Set}loadNames(t){return this.http.get(t,{responseType:"text"}).pipe(ze(r=>{this.processNames(r)}))}processNames(t){t.split("\n").forEach(i=>{const s=i.trim().toUpperCase();s&&!this.irrelevantWords.has(s)&&this.namesSet.add(s)})}detectNames(t){return t.replace(/[^\w\s]/g,"").toUpperCase().split(/\s+/).filter(o=>this.namesSet.has(o))}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(CC))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),i7=(()=>{class n{constructor(t){this.http=t,this.irrelevantWords=new Set(["DE","LA","DEL","EL","Y","EN","A","AL","LOS","LAS","POR","CON","PARA","SE","QUE","LEY","SU","USO","O","A","BACHILLER","GRADO"]),this.surnamesSet=new Set}loadSurnames(t){return this.http.get(t,{responseType:"text"}).pipe(ze(r=>{this.processSurnames(r)}))}processSurnames(t){t.split("\n").forEach(i=>{const s=i.trim().toUpperCase();s&&!this.irrelevantWords.has(s)&&this.surnamesSet.add(s)})}detectSurnames(t){return t.replace(/[^\w\s]/g,"").toUpperCase().split(/\s+/).filter(o=>this.surnamesSet.has(o))}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(CC))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function i1(n){let r,e=!0,t=0;for(let i=0;i<10;i++){if(r=n.toString().substring(i,i+1),isNaN(Number(r))){e=!1;break}i<9&&(i%2==0?2*parseInt(r)>9?t+=1+2*parseInt(r)%10:t+=2*parseInt(r):t+=parseInt(r))}return t=t%10!=0?t-t%10+10-t:0,e?10!==n.toString().length?(console.error("La c\xe9dula debe ser de 10 d\xedgitos."),!1):0===parseInt(n.toString(),10)?(console.error("La c\xe9dula ingresada no puede ser cero."),!1):t!==parseInt(n.toString().substring(9,10))?(console.error("La c\xe9dula ingresada no es v\xe1lida."),!1):(console.log("C\xe9dula v\xe1lida:",n),!0):(console.error("El dato solo puede contener n\xfameros."),!1)}let s7=(()=>{class n{constructor(){}detectCIs(t){return(t.match(/\b\d{10}\b/g)||[]).filter(s=>i1(s))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),s1=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(ke(ga),ke(Ms))};static#t=this.\u0275dir=Mt({type:n})}return n})(),Vc=(()=>{class n extends s1{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Zr(n)))(i||n)}}();static#t=this.\u0275dir=Mt({type:n,features:[Nn]})}return n})();const Ho=new Ue("NgValueAccessor"),u7={provide:Ho,useExisting:bn(()=>Kd),multi:!0},l7=new Ue("CompositionEventMode");let Kd=(()=>{class n extends s1{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function c7(){const n=Eu()?Eu().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ke(ga),ke(Ms),ke(l7,8))};static#t=this.\u0275dir=Mt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Bt("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[lr([u7]),Nn]})}return n})();const Oi=new Ue("NgValidators"),Ru=new Ue("NgAsyncValidators");function m1(n){return null!=n}function _1(n){return Ap(n)?L(n):n}function y1(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function v1(n,e){return e.map(t=>t(n))}function E1(n){return n.map(e=>function h7(n){return!n.validate}(e)?e:t=>e.validate(t))}function AC(n){return null!=n?function I1(n){if(!n)return null;const e=n.filter(m1);return 0==e.length?null:function(t){return y1(v1(t,e))}}(E1(n)):null}function SC(n){return null!=n?function w1(n){if(!n)return null;const e=n.filter(m1);return 0==e.length?null:function(t){return function o7(...n){const e=bi(n),{args:t,keys:r}=xO(n),i=new ue(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let u=o,d=o;for(let p=0;p<o;p++){let m=!1;Ft(t[p]).subscribe(De(s,v=>{m||(m=!0,d--),a[p]=v},()=>u--,void 0,()=>{(!u||!m)&&(d||s.next(r?OO(r,a):a),s.complete())}))}});return e?i.pipe(NO(e)):i}(v1(t,e).map(_1)).pipe(ze(y1))}}(E1(n)):null}function T1(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function RC(n){return n?Array.isArray(n)?n:[n]:[]}function Fv(n,e){return Array.isArray(n)?n.includes(e):n===e}function D1(n,e){const t=RC(e);return RC(n).forEach(i=>{Fv(t,i)||t.push(i)}),t}function A1(n,e){return RC(e).filter(t=>!Fv(n,t))}class S1{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=AC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=SC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class es extends S1{get formDirective(){return null}get path(){return null}}class Pu extends S1{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class R1{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Lv=(()=>{class n extends R1{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ke(Pu,2))};static#t=this.\u0275dir=Mt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Ny("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Nn]})}return n})();const lg="VALID",Uv="INVALID",Qd="PENDING",dg="DISABLED";function Bv(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class N1{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===lg}get invalid(){return this.status===Uv}get pending(){return this.status==Qd}get disabled(){return this.status===dg}get enabled(){return this.status!==dg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(D1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(D1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(A1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(A1(e,this._rawAsyncValidators))}hasValidator(e){return Fv(this._rawValidators,e)}hasAsyncValidator(e){return Fv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Qd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dg,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lg,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lg||this.status===Qd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dg:lg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Qd,this._hasOwnPendingAsyncValidator=!0;const t=_1(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Tr,this.statusChanges=new Tr}_calculateStatus(){return this._allControlsDisabled()?dg:this.errors?Uv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Qd)?Qd:this._anyControlsHaveStatus(Uv)?Uv:lg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Bv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function _7(n){return Array.isArray(n)?AC(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function y7(n){return Array.isArray(n)?SC(n):n||null}(this._rawAsyncValidators)}}const Yd=new Ue("CallSetDisabledState",{providedIn:"root",factory:()=>jv}),jv="always";function hg(n,e,t=jv){(function kC(n,e){const t=function b1(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(T1(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function C1(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(T1(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();zv(e._rawValidators,i),zv(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function I7(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&O1(n,e)})}(n,e),function T7(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function w7(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&O1(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function E7(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function zv(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function O1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function L1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function V1(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const U1=class extends N1{constructor(e=null,t,r){super(function xC(n){return(Bv(n)?n.validators:n)||null}(t),function NC(n,e){return(Bv(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Bv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=V1(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){L1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){L1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){V1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},M7={provide:Pu,useExisting:bn(()=>pg)},$1=(()=>Promise.resolve())();let pg=(()=>{class n extends Pu{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new U1,this._registered=!1,this.name="",this.update=new Tr,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function VC(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Kd?t=s:function D7(n){return Object.getPrototypeOf(n.constructor)===Vc}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function LC(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){hg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){$1.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&Nd(r);$1.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function $v(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(ke(es,9),ke(Oi,10),ke(Ru,10),ke(Ho,10),ke(qy,8),ke(Yd,8))};static#t=this.\u0275dir=Mt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[lr([M7]),Nn,fs]})}return n})(),z1=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=ri({type:n});static#n=this.\u0275inj=Ie({})}return n})();const $7={provide:Ho,useExisting:bn(()=>qv),multi:!0};function Y1(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let qv=(()=>{class n extends Vc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=Y1(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function H7(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Zr(n)))(i||n)}}();static#t=this.\u0275dir=Mt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&Bt("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[lr([$7]),Nn]})}return n})(),X1=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Y1(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(ke(Ms),ke(ga),ke(qv,9))};static#t=this.\u0275dir=Mt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})();const z7={provide:Ho,useExisting:bn(()=>HC),multi:!0};function J1(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let HC=(()=>{class n extends Vc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const d=this._getOptionValue(o[a].value);i.push(d)}}else{const o=r.options;for(let a=0;a<o.length;a++){const u=o[a];if(u.selected){const d=this._getOptionValue(u.value);i.push(d)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function G7(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Zr(n)))(i||n)}}();static#t=this.\u0275dir=Mt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&Bt("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[lr([z7]),Nn]})}return n})(),eF=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(J1(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(J1(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||n)(ke(Ms),ke(ga),ke(HC,9))};static#t=this.\u0275dir=Mt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return n})(),eK=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=ri({type:n});static#n=this.\u0275inj=Ie({imports:[z1]})}return n})(),nK=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Yd,useValue:t.callSetDisabledState??jv}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=ri({type:n});static#n=this.\u0275inj=Ie({imports:[eK]})}return n})();function rK(n,e){if(1&n&&(Re(0,"li"),qe(1),be()),2&n){const t=e.$implicit;Nt(1),yu(t)}}function iK(n,e){if(1&n&&(Re(0,"div")(1,"h3"),qe(2,"Nombres Detectados:"),be(),Re(3,"ul"),Vr(4,rK,2,1,"li",7),be()()),2&n){const t=Zs(2);Nt(4),zt("ngForOf",t.detectedNames)}}function sK(n,e){if(1&n&&(Re(0,"li"),qe(1),be()),2&n){const t=e.$implicit;Nt(1),yu(t)}}function oK(n,e){if(1&n&&(Re(0,"div")(1,"h3"),qe(2,"Apellidos Detectados:"),be(),Re(3,"ul"),Vr(4,sK,2,1,"li",7),be()()),2&n){const t=Zs(2);Nt(4),zt("ngForOf",t.detectedSurnames)}}function aK(n,e){if(1&n&&(Re(0,"li"),qe(1),be()),2&n){const t=e.$implicit;Nt(1),yu(t)}}function uK(n,e){if(1&n&&(Re(0,"div")(1,"h3"),qe(2,"C\xe9dulas Detectadas:"),be(),Re(3,"ul"),Vr(4,aK,2,1,"li",7),be()()),2&n){const t=Zs(2);Nt(4),zt("ngForOf",t.detectedCIs)}}function cK(n,e){if(1&n&&(Re(0,"div",5),Vr(1,iK,5,1,"div",6),Vr(2,oK,5,1,"div",6),Vr(3,uK,5,1,"div",6),be()),2&n){const t=Zs();Nt(1),zt("ngIf",t.detectedNames.length>0),Nt(1),zt("ngIf",t.detectedSurnames.length>0),Nt(1),zt("ngIf",t.detectedCIs.length>0)}}let lK=(()=>{class n{constructor(t,r,i){this.nameDetectionService=t,this.surnameDetectionService=r,this.ciDetectionService=i,this.inputText="",this.detectedNames=[],this.detectedSurnames=[],this.detectedCIs=[]}ngOnInit(){this.nameDetectionService.loadNames("/assets/nombres.csv").subscribe(),this.surnameDetectionService.loadSurnames("/assets/apellidos.csv").subscribe()}getDetails(){this.detectedNames=this.nameDetectionService.detectNames(this.inputText),this.detectedSurnames=this.surnameDetectionService.detectSurnames(this.inputText),this.detectedCIs=this.ciDetectionService.detectCIs(this.inputText)}clearInput(){this.inputText="",this.detectedNames=[],this.detectedSurnames=[],this.detectedCIs=[]}static#e=this.\u0275fac=function(r){return new(r||n)(ke(r7),ke(i7),ke(s7))};static#t=this.\u0275cmp=Ki({type:n,selectors:[["app-info-detection"]],decls:9,vars:2,consts:[[1,"container"],["rows","6","placeholder","Ingrese el texto aqu\xed...",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"btn","btn-secondary","mt-3",3,"click"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(Re(0,"div",0)(1,"h1"),qe(2,"Detector de Nombres, Apellidos y C\xe9dulas"),be(),Re(3,"textarea",1),Bt("ngModelChange",function(o){return i.inputText=o}),be(),Re(4,"button",2),Bt("click",function(){return i.getDetails()}),qe(5,"Obtener Datos"),be(),Re(6,"button",3),Bt("click",function(){return i.clearInput()}),qe(7,"Limpiar"),be(),Vr(8,cK,4,3,"div",4),be()),2&r&&(Nt(3),zt("ngModel",i.inputText),Nt(5),zt("ngIf",i.detectedNames.length>0||i.detectedSurnames.length>0||i.detectedCIs.length>0))},dependencies:[$p,Iu,Kd,Lv,pg]})}return n})(),dK=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ki({type:n,selectors:[["app-home"]],decls:65,vars:0,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-md-6","col-lg-4","mb-4"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["routerLink","/ocr",1,"btn","btn-primary"],["routerLink","/camara",1,"btn","btn-primary"],["routerLink","/image-editor",1,"btn","btn-primary"],["routerLink","/info-detection",1,"btn","btn-primary"],["routerLink","/doc-firestore",1,"btn","btn-primary"],["routerLink","/egresado-firestore",1,"btn","btn-primary"]],template:function(r,i){1&r&&(Re(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),qe(6,"OCR"),be(),Re(7,"p",6),qe(8,"Extracci\xf3n de texto con Tesseract.js"),be(),Re(9,"a",7),qe(10,"Ir a OCR"),be()()()(),Re(11,"div",2)(12,"div",3)(13,"div",4)(14,"h5",5),qe(15,"C\xe1mara"),be(),Re(16,"p",6),qe(17,"Captura de im\xe1genes con la c\xe1mara web"),be(),Re(18,"a",8),qe(19,"Ir a C\xe1mara"),be()()()(),Re(20,"div",2)(21,"div",3)(22,"div",4)(23,"h5",5),qe(24,"Editor de Fotos"),be(),Re(25,"p",6),qe(26,"Edici\xf3n de im\xe1genes con Cropper.js"),be(),Re(27,"a",9),qe(28,"Ir a Editor de Fotos"),be()()()(),Re(29,"div",2)(30,"div",3)(31,"div",4)(32,"h5",5),qe(33,"Info Detecci\xf3n"),be(),Re(34,"p",6),qe(35,"Detecci\xf3n de nombres, apellidos y c\xe9dulas"),be(),Re(36,"a",10),qe(37,"Ir a Info Detecci\xf3n"),be()()()(),Re(38,"div",2)(39,"div",3)(40,"div",4)(41,"h5",5),qe(42,"Doc Firestore"),be(),Re(43,"p",6),qe(44,"Gesti\xf3n de documentos en Firestore"),be(),Re(45,"a",11),qe(46,"Ir a Doc Firestore"),be()()()(),Re(47,"div",2)(48,"div",3)(49,"div",4)(50,"h5",5),qe(51,"Egresado Firestore"),be(),Re(52,"p",6),qe(53,"Gesti\xf3n de egresados en Firestore"),be(),Re(54,"a",12),qe(55,"Ir a Egresado Firestore"),be()()()(),Re(56,"div",2)(57,"div",3)(58,"div",4)(59,"h5",5),qe(60,"Cloud Storage"),be(),Re(61,"p",6),qe(62,"Gesti\xf3n de imagenes de documentos"),be(),Re(63,"a",12),qe(64,"Ir a Cloud Storage"),be()()()()()())},dependencies:[ag],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.card[_ngcontent-%COMP%]{width:100%;max-width:300px;margin:10px}"]})}return n})();class Wv{constructor(e,t,r,i,s){this.id=e,this.egresadoId=t,this.tipoDocumento=r,this.contenido=i,this.imagenUrl=s}consultarContenido(){return this.contenido}actualizarContenido(e){this.contenido=e}consultarImagenUrl(){return this.imagenUrl}}let gg=(()=>{class n{static#e=this.tiposValidos=["Acta de grado","Certificado de promoci\xf3n de curso"];constructor(t){if(!n.tiposValidos.includes(t))throw new Error("Tipo de documento inv\xe1lido");this.value=t}getValue(){return this.value}equals(t){return this.value===t.value}}return n})();var zo=ye(534);(0,zo.registerVersion)("firebase","10.12.2","app");class pK extends je{constructor(e,t){super()}schedule(e,t=0){return this}}const Zv={setInterval(n,e,...t){const{delegate:r}=Zv;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Zv;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class lF extends pK{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Zv.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Zv.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,q(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const GC={now:()=>(GC.delegate||Date).now(),delegate:void 0};class mg{constructor(e,t=mg.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}mg.now=GC.now;class dF extends mg{constructor(e,t=mg.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const _K=new class mK extends dF{}(class gK extends lF{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),qC=new dF(lF),Kv=new hd("ANGULARFIRE2_VERSION");class WC{constructor(){return((n,e)=>{const t=(0,zo.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(vK)}}const vK="app-check";function Xd(){}class hF{zone;delegate;constructor(e,t=_K){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class EK{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xd,{},Xd,Xd)),t.pipe(mi({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ZC=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new hF(Zone.current)),this.insideAngular=t.run(()=>new hF(Zone.current,qC)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Ne(Sn))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Jd(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function fF(n){return n.pipe($r(Jd().outsideAngular))}function ts(n){return function wK(n){return function(t){return(t=t.lift(new EK(n.ngZone))).pipe(ln(n.outsideAngular),$r(n.insideAngular))}}(Jd())(n)}var Go=ye(106);Go.Z.registerVersion("firebase","10.12.2","app-compat");const DK=["ngOnDestroy"];class pF{constructor(e){return e}}const _g=new Ue("angularfire2.app.options"),yg=new Ue("angularfire2.app.name");function Qv(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Go.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Go.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;RK("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new pF(o)}const RK=(n,...e)=>{},PK={provide:pF,useFactory:Qv,deps:[_g,Sn,[new pu,yg]]};let MK=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:_g,useValue:t},{provide:yg,useValue:r}]}}constructor(t){Go.Z.registerVersion("angularfire",Kv.full,"core"),Go.Z.registerVersion("angularfire",Kv.full,"app-compat"),Go.Z.registerVersion("angular",NR.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Ne(po))};static \u0275mod=ri({type:n});static \u0275inj=Ie({providers:[PK]})}return n})();function KC(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function xK(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(gF("error",`${e} was already initialized on the ${t} Firebase App with different settings.${NK?" You may need to reload as Firebase is not HMR aware.":""}`),gF("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const NK=typeof module<"u"&&!!module.hot,gF=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],ye(985);class OK extends te{constructor(e=1/0,t=1/0,r=GC){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function mF(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,ht({connector:()=>new OK(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function _F(n,e){return D(e)?bt(()=>n,e):bt(()=>n)}const yF=new Ue("angularfire2.auth.use-emulator"),vF=new Ue("angularfire2.auth.settings"),EF=new Ue("angularfire2.auth.tenant-id"),IF=new Ue("angularfire2.auth.langugage-code"),wF=new Ue("angularfire2.auth.use-device-language"),TF=new Ue("angularfire.auth.persistence"),bF=(n,e,t,r,i,s,o,a)=>KC(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[d,p]of Object.entries(o))u.settings[d]=p;return a&&u.setPersistence(a),u},[t,r,i,s,o,a]);let QC=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,u,d,p,m,v,T){const S=new te,R=me(void 0).pipe($r(o.outsideAngular),bt(()=>s.runOutsideAngular(()=>Promise.resolve().then(ye.bind(ye,985)))),ze(()=>Qv(t,s,r)),ze(M=>bF(M,s,a,d,p,m,u,v)),mF({bufferSize:1,refCount:!1}));if(av(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=me(null);else{R.pipe(Tu()).subscribe();const M=R.pipe(bt(ee=>ee.getRedirectResult().then(ge=>ge,()=>null)),ts,mF({bufferSize:1,refCount:!1})),X=R.pipe(bt(ee=>new ue(ge=>({unsubscribe:s.runOutsideAngular(()=>ee.onAuthStateChanged($e=>ge.next($e),$e=>ge.error($e),()=>ge.complete()))})))),j=R.pipe(bt(ee=>new ue(ge=>({unsubscribe:s.runOutsideAngular(()=>ee.onIdTokenChanged($e=>ge.next($e),$e=>ge.error($e),()=>ge.complete()))}))));this.authState=M.pipe(_F(X),ln(o.outsideAngular),$r(o.insideAngular)),this.user=M.pipe(_F(j),ln(o.outsideAngular),$r(o.insideAngular)),this.idToken=this.user.pipe(bt(ee=>ee?L(ee.getIdToken()):me(null))),this.idTokenResult=this.user.pipe(bt(ee=>ee?L(ee.getIdTokenResult()):me(null))),this.credential=ve(M,S,this.authState.pipe(Ys(ee=>!ee))).pipe(ze(ee=>ee?.user?ee:null),ln(o.outsideAngular),$r(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(DK.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>t.run(()=>d)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,d)=>o.then(p=>{const m=p?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,m),m})})})}))(this,R,s,{spy:{apply:(M,X,j)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&j.then(ee=>S.next(ee))}}})}static \u0275fac=function(r){return new(r||n)(Ne(_g),Ne(yg,8),Ne(po),Ne(Sn),Ne(ZC),Ne(yF,8),Ne(vF,8),Ne(EF,8),Ne(IF,8),Ne(wF,8),Ne(TF,8),Ne(WC,8))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),FK=(()=>{class n{constructor(){Go.Z.registerVersion("angularfire",Kv.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ri({type:n});static \u0275inj=Ie({providers:[QC]})}return n})();function YC(){return oe((n,e)=>{let t,r=!1;n.subscribe(De(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var jc,AF,Yv=ye(537),qo=ye(879),Yt=ye(58),CF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},DF={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(H,N,U){U||(U=0);var Q=Array(16);if("string"==typeof N)for(var J=0;16>J;++J)Q[J]=N.charCodeAt(U++)|N.charCodeAt(U++)<<8|N.charCodeAt(U++)<<16|N.charCodeAt(U++)<<24;else for(J=0;16>J;++J)Q[J]=N[U++]|N[U++]<<8|N[U++]<<16|N[U++]<<24;var ae=H.g[3],B=(N=H.g[0])+(ae^(U=H.g[1])&((J=H.g[2])^ae))+Q[0]+3614090360&4294967295;B=(U=(J=(ae=(N=(U=(J=(ae=(N=(U=(J=(ae=(N=(U=(J=(ae=(N=(U=(J=(ae=(N=(U=(J=(ae=(N=(U=(J=(ae=(N=(U=(J=(ae=(N=(U=(J=(ae=(N=(U=(J=(ae=(N=(U=(J=(ae=(N=(U=(J=(ae=(N=(U=(J=(ae=(N=(U=(J=(ae=(N=(U=(J=(ae=(N=U+(B<<7&4294967295|B>>>25))+((B=ae+(J^N&(U^J))+Q[1]+3905402710&4294967295)<<12&4294967295|B>>>20))+((B=J+(U^ae&(N^U))+Q[2]+606105819&4294967295)<<17&4294967295|B>>>15))+((B=U+(N^J&(ae^N))+Q[3]+3250441966&4294967295)<<22&4294967295|B>>>10))+((B=N+(ae^U&(J^ae))+Q[4]+4118548399&4294967295)<<7&4294967295|B>>>25))+((B=ae+(J^N&(U^J))+Q[5]+1200080426&4294967295)<<12&4294967295|B>>>20))+((B=J+(U^ae&(N^U))+Q[6]+2821735955&4294967295)<<17&4294967295|B>>>15))+((B=U+(N^J&(ae^N))+Q[7]+4249261313&4294967295)<<22&4294967295|B>>>10))+((B=N+(ae^U&(J^ae))+Q[8]+1770035416&4294967295)<<7&4294967295|B>>>25))+((B=ae+(J^N&(U^J))+Q[9]+2336552879&4294967295)<<12&4294967295|B>>>20))+((B=J+(U^ae&(N^U))+Q[10]+4294925233&4294967295)<<17&4294967295|B>>>15))+((B=U+(N^J&(ae^N))+Q[11]+2304563134&4294967295)<<22&4294967295|B>>>10))+((B=N+(ae^U&(J^ae))+Q[12]+1804603682&4294967295)<<7&4294967295|B>>>25))+((B=ae+(J^N&(U^J))+Q[13]+4254626195&4294967295)<<12&4294967295|B>>>20))+((B=J+(U^ae&(N^U))+Q[14]+2792965006&4294967295)<<17&4294967295|B>>>15))+((B=U+(N^J&(ae^N))+Q[15]+1236535329&4294967295)<<22&4294967295|B>>>10))+((B=N+(J^ae&(U^J))+Q[1]+4129170786&4294967295)<<5&4294967295|B>>>27))+((B=ae+(U^J&(N^U))+Q[6]+3225465664&4294967295)<<9&4294967295|B>>>23))+((B=J+(N^U&(ae^N))+Q[11]+643717713&4294967295)<<14&4294967295|B>>>18))+((B=U+(ae^N&(J^ae))+Q[0]+3921069994&4294967295)<<20&4294967295|B>>>12))+((B=N+(J^ae&(U^J))+Q[5]+3593408605&4294967295)<<5&4294967295|B>>>27))+((B=ae+(U^J&(N^U))+Q[10]+38016083&4294967295)<<9&4294967295|B>>>23))+((B=J+(N^U&(ae^N))+Q[15]+3634488961&4294967295)<<14&4294967295|B>>>18))+((B=U+(ae^N&(J^ae))+Q[4]+3889429448&4294967295)<<20&4294967295|B>>>12))+((B=N+(J^ae&(U^J))+Q[9]+568446438&4294967295)<<5&4294967295|B>>>27))+((B=ae+(U^J&(N^U))+Q[14]+3275163606&4294967295)<<9&4294967295|B>>>23))+((B=J+(N^U&(ae^N))+Q[3]+4107603335&4294967295)<<14&4294967295|B>>>18))+((B=U+(ae^N&(J^ae))+Q[8]+1163531501&4294967295)<<20&4294967295|B>>>12))+((B=N+(J^ae&(U^J))+Q[13]+2850285829&4294967295)<<5&4294967295|B>>>27))+((B=ae+(U^J&(N^U))+Q[2]+4243563512&4294967295)<<9&4294967295|B>>>23))+((B=J+(N^U&(ae^N))+Q[7]+1735328473&4294967295)<<14&4294967295|B>>>18))+((B=U+(ae^N&(J^ae))+Q[12]+2368359562&4294967295)<<20&4294967295|B>>>12))+((B=N+(U^J^ae)+Q[5]+4294588738&4294967295)<<4&4294967295|B>>>28))+((B=ae+(N^U^J)+Q[8]+2272392833&4294967295)<<11&4294967295|B>>>21))+((B=J+(ae^N^U)+Q[11]+1839030562&4294967295)<<16&4294967295|B>>>16))+((B=U+(J^ae^N)+Q[14]+4259657740&4294967295)<<23&4294967295|B>>>9))+((B=N+(U^J^ae)+Q[1]+2763975236&4294967295)<<4&4294967295|B>>>28))+((B=ae+(N^U^J)+Q[4]+1272893353&4294967295)<<11&4294967295|B>>>21))+((B=J+(ae^N^U)+Q[7]+4139469664&4294967295)<<16&4294967295|B>>>16))+((B=U+(J^ae^N)+Q[10]+3200236656&4294967295)<<23&4294967295|B>>>9))+((B=N+(U^J^ae)+Q[13]+681279174&4294967295)<<4&4294967295|B>>>28))+((B=ae+(N^U^J)+Q[0]+3936430074&4294967295)<<11&4294967295|B>>>21))+((B=J+(ae^N^U)+Q[3]+3572445317&4294967295)<<16&4294967295|B>>>16))+((B=U+(J^ae^N)+Q[6]+76029189&4294967295)<<23&4294967295|B>>>9))+((B=N+(U^J^ae)+Q[9]+3654602809&4294967295)<<4&4294967295|B>>>28))+((B=ae+(N^U^J)+Q[12]+3873151461&4294967295)<<11&4294967295|B>>>21))+((B=J+(ae^N^U)+Q[15]+530742520&4294967295)<<16&4294967295|B>>>16))+((B=U+(J^ae^N)+Q[2]+3299628645&4294967295)<<23&4294967295|B>>>9))+((B=N+(J^(U|~ae))+Q[0]+4096336452&4294967295)<<6&4294967295|B>>>26))+((B=ae+(U^(N|~J))+Q[7]+1126891415&4294967295)<<10&4294967295|B>>>22))+((B=J+(N^(ae|~U))+Q[14]+2878612391&4294967295)<<15&4294967295|B>>>17))+((B=U+(ae^(J|~N))+Q[5]+4237533241&4294967295)<<21&4294967295|B>>>11))+((B=N+(J^(U|~ae))+Q[12]+1700485571&4294967295)<<6&4294967295|B>>>26))+((B=ae+(U^(N|~J))+Q[3]+2399980690&4294967295)<<10&4294967295|B>>>22))+((B=J+(N^(ae|~U))+Q[10]+4293915773&4294967295)<<15&4294967295|B>>>17))+((B=U+(ae^(J|~N))+Q[1]+2240044497&4294967295)<<21&4294967295|B>>>11))+((B=N+(J^(U|~ae))+Q[8]+1873313359&4294967295)<<6&4294967295|B>>>26))+((B=ae+(U^(N|~J))+Q[15]+4264355552&4294967295)<<10&4294967295|B>>>22))+((B=J+(N^(ae|~U))+Q[6]+2734768916&4294967295)<<15&4294967295|B>>>17))+((B=U+(ae^(J|~N))+Q[13]+1309151649&4294967295)<<21&4294967295|B>>>11))+((ae=(N=U+((B=N+(J^(U|~ae))+Q[4]+4149444226&4294967295)<<6&4294967295|B>>>26))+((B=ae+(U^(N|~J))+Q[11]+3174756917&4294967295)<<10&4294967295|B>>>22))^((J=ae+((B=J+(N^(ae|~U))+Q[2]+718787259&4294967295)<<15&4294967295|B>>>17))|~N))+Q[9]+3951481745&4294967295,H.g[0]=H.g[0]+N&4294967295,H.g[1]=H.g[1]+(J+(B<<21&4294967295|B>>>11))&4294967295,H.g[2]=H.g[2]+J&4294967295,H.g[3]=H.g[3]+ae&4294967295}function o(H,N){this.h=N;for(var U=[],Q=!0,J=H.length-1;0<=J;J--){var ae=0|H[J];Q&&ae==N||(U[J]=ae,Q=!1)}this.g=U}(function e(H,N){function U(){}U.prototype=N.prototype,H.D=N.prototype,H.prototype=new U,H.prototype.constructor=H,H.C=function(Q,J,ae){for(var B=Array(arguments.length-2),Ba=2;Ba<arguments.length;Ba++)B[Ba-2]=arguments[Ba];return N.prototype[J].apply(Q,B)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(H,N){void 0===N&&(N=H.length);for(var U=N-this.blockSize,Q=this.B,J=this.h,ae=0;ae<N;){if(0==J)for(;ae<=U;)i(this,H,ae),ae+=this.blockSize;if("string"==typeof H){for(;ae<N;)if(Q[J++]=H.charCodeAt(ae++),J==this.blockSize){i(this,Q),J=0;break}}else for(;ae<N;)if(Q[J++]=H[ae++],J==this.blockSize){i(this,Q),J=0;break}}this.h=J,this.o+=N},r.prototype.v=function(){var H=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);H[0]=128;for(var N=1;N<H.length-8;++N)H[N]=0;var U=8*this.o;for(N=H.length-8;N<H.length;++N)H[N]=255&U,U/=256;for(this.u(H),H=Array(16),N=U=0;4>N;++N)for(var Q=0;32>Q;Q+=8)H[U++]=this.g[N]>>>Q&255;return H};var a={};function u(H){return-128<=H&&128>H?function s(H,N){var U=a;return Object.prototype.hasOwnProperty.call(U,H)?U[H]:U[H]=N(H)}(H,function(N){return new o([0|N],0>N?-1:0)}):new o([0|H],0>H?-1:0)}function d(H){if(isNaN(H)||!isFinite(H))return m;if(0>H)return M(d(-H));for(var N=[],U=1,Q=0;H>=U;Q++)N[Q]=H/U|0,U*=4294967296;return new o(N,0)}var m=u(0),v=u(1),T=u(16777216);function S(H){if(0!=H.h)return!1;for(var N=0;N<H.g.length;N++)if(0!=H.g[N])return!1;return!0}function R(H){return-1==H.h}function M(H){for(var N=H.g.length,U=[],Q=0;Q<N;Q++)U[Q]=~H.g[Q];return new o(U,~H.h).add(v)}function X(H,N){return H.add(M(N))}function j(H,N){for(;(65535&H[N])!=H[N];)H[N+1]+=H[N]>>>16,H[N]&=65535,N++}function ee(H,N){this.g=H,this.h=N}function ge(H,N){if(S(N))throw Error("division by zero");if(S(H))return new ee(m,m);if(R(H))return N=ge(M(H),N),new ee(M(N.g),M(N.h));if(R(N))return N=ge(H,M(N)),new ee(M(N.g),N.h);if(30<H.g.length){if(R(H)||R(N))throw Error("slowDivide_ only works with positive integers.");for(var U=v,Q=N;0>=Q.l(H);)U=$e(U),Q=$e(Q);var J=ct(U,1),ae=ct(Q,1);for(Q=ct(Q,2),U=ct(U,2);!S(Q);){var B=ae.add(Q);0>=B.l(H)&&(J=J.add(U),ae=B),Q=ct(Q,1),U=ct(U,1)}return N=X(H,J.j(N)),new ee(J,N)}for(J=m;0<=H.l(N);){for(U=Math.max(1,Math.floor(H.m()/N.m())),Q=48>=(Q=Math.ceil(Math.log(U)/Math.LN2))?1:Math.pow(2,Q-48),B=(ae=d(U)).j(N);R(B)||0<B.l(H);)B=(ae=d(U-=Q)).j(N);S(ae)&&(ae=v),J=J.add(ae),H=X(H,B)}return new ee(J,H)}function $e(H){for(var N=H.g.length+1,U=[],Q=0;Q<N;Q++)U[Q]=H.i(Q)<<1|H.i(Q-1)>>>31;return new o(U,H.h)}function ct(H,N){var U=N>>5;N%=32;for(var Q=H.g.length-U,J=[],ae=0;ae<Q;ae++)J[ae]=0<N?H.i(ae+U)>>>N|H.i(ae+U+1)<<32-N:H.i(ae+U);return new o(J,H.h)}(n=o.prototype).m=function(){if(R(this))return-M(this).m();for(var H=0,N=1,U=0;U<this.g.length;U++){var Q=this.i(U);H+=(0<=Q?Q:4294967296+Q)*N,N*=4294967296}return H},n.toString=function(H){if(2>(H=H||10)||36<H)throw Error("radix out of range: "+H);if(S(this))return"0";if(R(this))return"-"+M(this).toString(H);for(var N=d(Math.pow(H,6)),U=this,Q="";;){var J=ge(U,N).g,ae=((0<(U=X(U,J.j(N))).g.length?U.g[0]:U.h)>>>0).toString(H);if(S(U=J))return ae+Q;for(;6>ae.length;)ae="0"+ae;Q=ae+Q}},n.i=function(H){return 0>H?0:H<this.g.length?this.g[H]:this.h},n.l=function(H){return R(H=X(this,H))?-1:S(H)?0:1},n.abs=function(){return R(this)?M(this):this},n.add=function(H){for(var N=Math.max(this.g.length,H.g.length),U=[],Q=0,J=0;J<=N;J++){var ae=Q+(65535&this.i(J))+(65535&H.i(J)),B=(ae>>>16)+(this.i(J)>>>16)+(H.i(J)>>>16);Q=B>>>16,U[J]=(B&=65535)<<16|(ae&=65535)}return new o(U,-2147483648&U[U.length-1]?-1:0)},n.j=function(H){if(S(this)||S(H))return m;if(R(this))return R(H)?M(this).j(M(H)):M(M(this).j(H));if(R(H))return M(this.j(M(H)));if(0>this.l(T)&&0>H.l(T))return d(this.m()*H.m());for(var N=this.g.length+H.g.length,U=[],Q=0;Q<2*N;Q++)U[Q]=0;for(Q=0;Q<this.g.length;Q++)for(var J=0;J<H.g.length;J++){var ae=this.i(Q)>>>16,B=65535&this.i(Q),Ba=H.i(J)>>>16,hm=65535&H.i(J);U[2*Q+2*J]+=B*hm,j(U,2*Q+2*J),U[2*Q+2*J+1]+=ae*hm,j(U,2*Q+2*J+1),U[2*Q+2*J+1]+=B*Ba,j(U,2*Q+2*J+1),U[2*Q+2*J+2]+=ae*Ba,j(U,2*Q+2*J+2)}for(Q=0;Q<N;Q++)U[Q]=U[2*Q+1]<<16|U[2*Q];for(Q=N;Q<2*N;Q++)U[Q]=0;return new o(U,0)},n.A=function(H){return ge(this,H).h},n.and=function(H){for(var N=Math.max(this.g.length,H.g.length),U=[],Q=0;Q<N;Q++)U[Q]=this.i(Q)&H.i(Q);return new o(U,this.h&H.h)},n.or=function(H){for(var N=Math.max(this.g.length,H.g.length),U=[],Q=0;Q<N;Q++)U[Q]=this.i(Q)|H.i(Q);return new o(U,this.h|H.h)},n.xor=function(H){for(var N=Math.max(this.g.length,H.g.length),U=[],Q=0;Q<N;Q++)U[Q]=this.i(Q)^H.i(Q);return new o(U,this.h^H.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,AF=DF.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=function p(H,N){if(0==H.length)throw Error("number format error: empty string");if(2>(N=N||10)||36<N)throw Error("radix out of range: "+N);if("-"==H.charAt(0))return M(p(H.substring(1),N));if(0<=H.indexOf("-"))throw Error('number format error: interior "-" character');for(var U=d(Math.pow(N,8)),Q=m,J=0;J<H.length;J+=8){var ae=Math.min(8,H.length-J),B=parseInt(H.substring(J,J+ae),N);8>ae?(ae=d(Math.pow(N,ae)),Q=Q.j(ae).add(d(B))):Q=(Q=Q.j(U)).add(d(B))}return Q},jc=DF.Integer=o}).apply(typeof CF<"u"?CF:typeof self<"u"?self:typeof window<"u"?window:{});var SF,RF,vg,PF,Jv,XC,MF,xF,NF,Xv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Sa={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Xv&&Xv];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var E=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var re=h[A];if(!(re in E))break e;E=E[re]}(_=_(A=E[h=h[h.length-1]]))!=A&&null!=_&&e(E,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function s(h,_){h instanceof String&&(h+="");var E=0,A=!1,re={next:function(){if(!A&&E<h.length){var de=E++;return{value:_(de,h[de]),done:!1}}return A=!0,{done:!0,value:void 0}}};return re[Symbol.iterator]=function(){return re},re}(this,function(_,E){return E})}});var o=o||{},a=this||self;function u(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function d(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function p(h,_,E){return h.call.apply(h.bind,arguments)}function m(h,_,E){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var re=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(re,A),h.apply(_,re)}}return function(){return h.apply(_,arguments)}}function v(h,_,E){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?p:m).apply(null,arguments)}function T(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function S(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(A,re,de){for(var Qe=Array(arguments.length-2),Gn=2;Gn<arguments.length;Gn++)Qe[Gn-2]=arguments[Gn];return _.prototype[re].apply(A,Qe)}}function R(h){const _=h.length;if(0<_){const E=Array(_);for(let A=0;A<_;A++)E[A]=h[A];return E}return[]}function M(h,_){for(let E=1;E<arguments.length;E++){const A=arguments[E];if(u(A)){const re=h.length||0,de=A.length||0;h.length=re+de;for(let Qe=0;Qe<de;Qe++)h[re+Qe]=A[Qe]}else h.push(A)}}function j(h){return/^[\s\xa0]*$/.test(h)}function ee(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function ge(h){return ge[" "](h),h}ge[" "]=function(){};var $e=!(-1==ee().indexOf("Gecko")||-1!=ee().toLowerCase().indexOf("webkit")&&-1==ee().indexOf("Edge")||-1!=ee().indexOf("Trident")||-1!=ee().indexOf("MSIE")||-1!=ee().indexOf("Edge"));function ct(h,_,E){for(const A in h)_.call(E,h[A],A,h)}function N(h){const _={};for(const E in h)_[E]=h[E];return _}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(h,_){let E,A;for(let re=1;re<arguments.length;re++){for(E in A=arguments[re],A)h[E]=A[E];for(let de=0;de<U.length;de++)E=U[de],Object.prototype.hasOwnProperty.call(A,E)&&(h[E]=A[E])}}function J(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function ae(h){a.setTimeout(()=>{throw h},0)}function B(){var h=FA;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var hm=new class X{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new fne,h=>h.reset());class fne{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let fm,pm=!1,FA=new class Ba{constructor(){this.h=this.g=null}add(_,E){const A=hm.get();A.set(_,E),this.h?this.h.next=A:this.g=A,this.h=A}},fB=()=>{const h=a.Promise.resolve(void 0);fm=()=>{h.then(pne)}};var pne=()=>{for(var h;h=B();){try{h.h.call(h.g)}catch(E){ae(E)}var _=hm;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}pm=!1};function Yu(){this.s=this.s,this.C=this.C}function Bi(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}Yu.prototype.s=!1,Yu.prototype.ma=function(){this.s||(this.s=!0,this.N())},Yu.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Bi.prototype.h=function(){this.defaultPrevented=!0};var gne=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};a.addEventListener("test",E,_),a.removeEventListener("test",E,_)}catch{}return h}();function gm(h,_){if(Bi.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if($e){e:{try{ge(_.nodeName);var re=!0;break e}catch{}re=!1}re||(_=null)}}else"mouseover"==E?_=h.fromElement:"mouseout"==E&&(_=h.toElement);this.relatedTarget=_,A?(this.clientX=void 0!==A.clientX?A.clientX:A.pageX,this.clientY=void 0!==A.clientY?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:mne[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&gm.aa.h.call(this)}}S(gm,Bi);var mne={2:"touch",3:"pen",4:"mouse"};gm.prototype.h=function(){gm.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var mm="closure_listenable_"+(1e6*Math.random()|0),_ne=0;function yne(h,_,E,A,re){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!A,this.ha=re,this.key=++_ne,this.da=this.fa=!1}function oI(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function aI(h){this.src=h,this.g={},this.h=0}function LA(h,_){var E=_.type;if(E in h.g){var de,A=h.g[E],re=Array.prototype.indexOf.call(A,_,void 0);(de=0<=re)&&Array.prototype.splice.call(A,re,1),de&&(oI(_),0==h.g[E].length&&(delete h.g[E],h.h--))}}function VA(h,_,E,A){for(var re=0;re<h.length;++re){var de=h[re];if(!de.da&&de.listener==_&&de.capture==!!E&&de.ha==A)return re}return-1}aI.prototype.add=function(h,_,E,A,re){var de=h.toString();(h=this.g[de])||(h=this.g[de]=[],this.h++);var Qe=VA(h,_,A,re);return-1<Qe?(_=h[Qe],E||(_.fa=!1)):((_=new yne(_,this.src,de,!!A,re)).fa=E,h.push(_)),_};var UA="closure_lm_"+(1e6*Math.random()|0),BA={};function pB(h,_,E,A,re){if(A&&A.once)return mB(h,_,E,A,re);if(Array.isArray(_)){for(var de=0;de<_.length;de++)pB(h,_[de],E,A,re);return null}return E=zA(E),h&&h[mm]?h.K(_,E,d(A)?!!A.capture:!!A,re):gB(h,_,E,!1,A,re)}function gB(h,_,E,A,re,de){if(!_)throw Error("Invalid event type");var Qe=d(re)?!!re.capture:!!re,Gn=$A(h);if(Gn||(h[UA]=Gn=new aI(h)),(E=Gn.add(_,E,A,Qe,de)).proxy)return E;if(A=function vne(){const _=Ene;return function h(E){return _.call(h.src,h.listener,E)}}(),E.proxy=A,A.src=h,A.listener=E,h.addEventListener)gne||(re=Qe),void 0===re&&(re=!1),h.addEventListener(_.toString(),A,re);else if(h.attachEvent)h.attachEvent(yB(_.toString()),A);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(A)}return E}function mB(h,_,E,A,re){if(Array.isArray(_)){for(var de=0;de<_.length;de++)mB(h,_[de],E,A,re);return null}return E=zA(E),h&&h[mm]?h.L(_,E,d(A)?!!A.capture:!!A,re):gB(h,_,E,!0,A,re)}function _B(h,_,E,A,re){if(Array.isArray(_))for(var de=0;de<_.length;de++)_B(h,_[de],E,A,re);else A=d(A)?!!A.capture:!!A,E=zA(E),h&&h[mm]?(h=h.i,(_=String(_).toString())in h.g&&-1<(E=VA(de=h.g[_],E,A,re))&&(oI(de[E]),Array.prototype.splice.call(de,E,1),0==de.length&&(delete h.g[_],h.h--))):h&&(h=$A(h))&&(_=h.g[_.toString()],h=-1,_&&(h=VA(_,E,A,re)),(E=-1<h?_[h]:null)&&jA(E))}function jA(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[mm])LA(_.i,h);else{var E=h.type,A=h.proxy;_.removeEventListener?_.removeEventListener(E,A,h.capture):_.detachEvent?_.detachEvent(yB(E),A):_.addListener&&_.removeListener&&_.removeListener(A),(E=$A(_))?(LA(E,h),0==E.h&&(E.src=null,_[UA]=null)):oI(h)}}}function yB(h){return h in BA?BA[h]:BA[h]="on"+h}function Ene(h,_){if(h.da)h=!0;else{_=new gm(_,this);var E=h.listener,A=h.ha||h.src;h.fa&&jA(h),h=E.call(A,_)}return h}function $A(h){return(h=h[UA])instanceof aI?h:null}var HA="__closure_events_fn_"+(1e9*Math.random()>>>0);function zA(h){return"function"==typeof h?h:(h[HA]||(h[HA]=function(_){return h.handleEvent(_)}),h[HA])}function ji(){Yu.call(this),this.i=new aI(this),this.M=this,this.F=null}function os(h,_){var E,A=h.F;if(A)for(E=[];A;A=A.F)E.push(A);if(h=h.M,A=_.type||_,"string"==typeof _)_=new Bi(_,h);else if(_ instanceof Bi)_.target=_.target||h;else{var re=_;Q(_=new Bi(A,h),re)}if(re=!0,E)for(var de=E.length-1;0<=de;de--){var Qe=_.g=E[de];re=uI(Qe,A,!0,_)&&re}if(re=uI(Qe=_.g=h,A,!0,_)&&re,re=uI(Qe,A,!1,_)&&re,E)for(de=0;de<E.length;de++)re=uI(Qe=_.g=E[de],A,!1,_)&&re}function uI(h,_,E,A){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var re=!0,de=0;de<_.length;++de){var Qe=_[de];if(Qe&&!Qe.da&&Qe.capture==E){var Gn=Qe.listener,Ei=Qe.ha||Qe.src;Qe.fa&&LA(h.i,Qe),re=!1!==Gn.call(Ei,A)&&re}}return re&&!A.defaultPrevented}function vB(h,_,E){if("function"==typeof h)E&&(h=v(h,E));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=v(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function EB(h){h.g=vB(()=>{h.g=null,h.i&&(h.i=!1,EB(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}S(ji,Yu),ji.prototype[mm]=!0,ji.prototype.removeEventListener=function(h,_,E,A){_B(this,h,_,E,A)},ji.prototype.N=function(){if(ji.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var E=h.g[_],A=0;A<E.length;A++)oI(E[A]);delete h.g[_],h.h--}}this.F=null},ji.prototype.K=function(h,_,E,A){return this.i.add(String(h),_,!1,E,A)},ji.prototype.L=function(h,_,E,A){return this.i.add(String(h),_,!0,E,A)};class Ine extends Yu{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:EB(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _m(h){Yu.call(this),this.h=h,this.g={}}S(_m,Yu);var IB=[];function wB(h){ct(h.g,function(_,E){this.g.hasOwnProperty(E)&&jA(_)},h),h.g={}}_m.prototype.N=function(){_m.aa.N.call(this),wB(this)},_m.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var GA=a.JSON.stringify,wne=a.JSON.parse,Tne=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function qA(){}function bB(){}qA.prototype.h=null;var ym={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function WA(){Bi.call(this,"d")}function ZA(){Bi.call(this,"c")}S(WA,Bi),S(ZA,Bi);var dl={},CB=null;function cI(){return CB=CB||new ji}function DB(h){Bi.call(this,dl.La,h)}function vm(h){const _=cI();os(_,new DB(_))}function AB(h,_){Bi.call(this,dl.STAT_EVENT,h),this.stat=_}function as(h){const _=cI();os(_,new AB(_,h))}function SB(h,_){Bi.call(this,dl.Ma,h),this.size=_}function Em(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function Im(){this.g=!0}function Hh(h,_,E,A){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function Ane(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E)for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var A=E[h];if(!(2>A.length)){var re=A[1];if(Array.isArray(re)&&!(1>re.length)){var de=re[0];if("noop"!=de&&"stop"!=de&&"close"!=de)for(var Qe=1;Qe<re.length;Qe++)re[Qe]=""}}}return GA(E)}catch{return _}}(h,E)+(A?" "+A:"")})}dl.La="serverreachability",S(DB,Bi),dl.STAT_EVENT="statevent",S(AB,Bi),dl.Ma="timingevent",S(SB,Bi),Im.prototype.xa=function(){this.g=!1},Im.prototype.info=function(){};var KA,lI={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},RB={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function dI(){}function Xu(h,_,E,A){this.j=h,this.i=_,this.l=E,this.R=A||1,this.U=new _m(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new PB}function PB(){this.i=null,this.g="",this.h=!1}S(dI,qA),dI.prototype.g=function(){return new XMLHttpRequest},dI.prototype.i=function(){return{}},KA=new dI;var MB={},QA={};function YA(h,_,E){h.L=1,h.v=gI(ja(_)),h.m=E,h.P=!0,xB(h,null)}function xB(h,_){h.F=Date.now(),hI(h),h.A=ja(h.v);var E=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),qB(E.i,"t",A),h.C=0,E=h.j.J,h.h=new PB,h.g=lj(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Ine(v(h.Y,h,h.g),h.O)),_=h.U,E=h.g,A=h.ca;var re="readystatechange";Array.isArray(re)||(re&&(IB[0]=re.toString()),re=IB);for(var de=0;de<re.length;de++){var Qe=pB(E,re[de],A||_.handleEvent,!1,_.h||_);if(!Qe)break;_.g[Qe.key]=Qe}_=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),vm(),function bne(h,_,E,A,re,de){h.info(function(){if(h.g)if(de)for(var Qe="",Gn=de.split("&"),Ei=0;Ei<Gn.length;Ei++){var Cn=Gn[Ei].split("=");if(1<Cn.length){var $i=Cn[0];Cn=Cn[1];var Hi=$i.split("_");Qe=2<=Hi.length&&"type"==Hi[1]?Qe+($i+"=")+Cn+"&":Qe+($i+"=redacted&")}}else Qe=null;else Qe=de;return"XMLHTTP REQ ("+A+") [attempt "+re+"]: "+_+"\n"+E+"\n"+Qe})}(h.i,h.u,h.A,h.l,h.R,h.m)}function NB(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function Sne(h,_){var E=h.C,A=_.indexOf("\n",E);return-1==A?QA:(E=Number(_.substring(E,A)),isNaN(E)?MB:(A+=1)+E>_.length?QA:(_=_.slice(A,A+E),h.C=A+E,_))}function hI(h){h.S=Date.now()+h.I,OB(h,h.I)}function OB(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=Em(v(h.ba,h),_)}function XA(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function wm(h){0==h.j.G||h.J||oj(h.j,h)}function hl(h){XA(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,wB(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function JA(h,_){try{var E=h.j;if(0!=E.G&&(E.g==h||eS(E.h,h)))if(!h.K&&eS(E.h,h)&&3==E.G){try{var A=E.Da.g.parse(_)}catch{A=null}if(Array.isArray(A)&&3==A.length){var re=A;if(0==re[0]){e:if(!E.u){if(E.g){if(!(E.g.F+3e3<h.F))break e;EI(E),yI(E)}iS(E),as(18)}}else E.za=re[1],0<E.za-E.T&&37500>re[2]&&E.F&&0==E.v&&!E.C&&(E.C=Em(v(E.Za,E),6e3));if(1>=LB(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else pl(E,11)}else if((h.K||E.g==h)&&EI(E),!j(_))for(re=E.Da.g.parse(_),_=0;_<re.length;_++){let Cn=re[_];if(E.T=Cn[0],Cn=Cn[1],2==E.G)if("c"==Cn[0]){E.K=Cn[1],E.ia=Cn[2];const $i=Cn[3];null!=$i&&(E.la=$i,E.j.info("VER="+E.la));const Hi=Cn[4];null!=Hi&&(E.Aa=Hi,E.j.info("SVER="+E.Aa));const qh=Cn[5];null!=qh&&"number"==typeof qh&&0<qh&&(E.L=A=1.5*qh,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const wo=h.g;if(wo){const wI=wo.g?wo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wI){var de=A.h;de.g||-1==wI.indexOf("spdy")&&-1==wI.indexOf("quic")&&-1==wI.indexOf("h2")||(de.j=de.l,de.g=new Set,de.h&&(tS(de,de.h),de.h=null))}if(A.D){const oS=wo.g?wo.g.getResponseHeader("X-HTTP-Session-Id"):null;oS&&(A.ya=oS,rr(A.I,A.D,oS))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms"));var Qe=h;if((A=E).qa=cj(A,A.J?A.ia:null,A.W),Qe.K){VB(A.h,Qe);var Gn=Qe,Ei=A.L;Ei&&(Gn.I=Ei),Gn.B&&(XA(Gn),hI(Gn)),A.g=Qe}else ij(A);0<E.i.length&&vI(E)}else"stop"!=Cn[0]&&"close"!=Cn[0]||pl(E,7);else 3==E.G&&("stop"==Cn[0]||"close"==Cn[0]?"stop"==Cn[0]?pl(E,7):rS(E):"noop"!=Cn[0]&&E.l&&E.l.ta(Cn),E.v=0)}vm()}catch{}}function kB(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function FB(h){return!!h.h||!!h.g&&h.g.size>=h.j}function LB(h){return h.h?1:h.g?h.g.size:0}function eS(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function tS(h,_){h.g?h.g.add(_):h.h=_}function VB(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function UB(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return R(h.i)}function BB(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(u(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var E=function Mne(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||"string"==typeof h){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const A in h)_[E++]=A;return _}}}(h),A=function Pne(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(u(h)){for(var _=[],E=h.length,A=0;A<E;A++)_.push(h[A]);return _}for(A in _=[],E=0,h)_[E++]=h[A];return _}(h),re=A.length,de=0;de<re;de++)_.call(void 0,A[de],E&&E[de],h)}Xu.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==$a(h)?_.j():this.Y(h)},Xu.prototype.Y=function(h){try{if(h==this.g)e:{const Hi=$a(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>Hi)&&(3!=Hi||this.g&&(this.h.h||this.g.oa()||JB(this.g)))){this.J||4!=Hi||7==_||vm(),XA(this);var E=this.g.Z();this.X=E;t:if(NB(this)){var A=JB(this.g);h="";var re=A.length,de=4==$a(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){hl(this),wm(this);var Qe="";break t}this.h.i=new a.TextDecoder}for(_=0;_<re;_++)this.h.h=!0,h+=this.h.i.decode(A[_],{stream:!(de&&_==re-1)});A.length=0,this.h.g+=h,this.C=0,Qe=this.h.g}else Qe=this.g.oa();if(this.o=200==E,function Cne(h,_,E,A,re,de,Qe){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+re+"]: "+_+"\n"+E+"\n"+de+" "+Qe})}(this.i,this.u,this.A,this.l,this.R,Hi,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Gn,Ei=this.g;if((Gn=Ei.g?Ei.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(Gn)){var Cn=Gn;break t}}Cn=null}if(!(E=Cn)){this.o=!1,this.s=3,as(12),hl(this),wm(this);break e}Hh(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,JA(this,E)}if(this.P){let wo;for(E=!0;!this.J&&this.C<Qe.length;){if(wo=Sne(this,Qe),wo==QA){4==Hi&&(this.s=4,as(14),E=!1),Hh(this.i,this.l,null,"[Incomplete Response]");break}if(wo==MB){this.s=4,as(15),Hh(this.i,this.l,Qe,"[Invalid Chunk]"),E=!1;break}Hh(this.i,this.l,wo,null),JA(this,wo)}if(NB(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Hi||0!=Qe.length||this.h.h||(this.s=1,as(16),E=!1),this.o=this.o&&E,E){if(0<Qe.length&&!this.W){this.W=!0;var $i=this.j;$i.g==this&&$i.ba&&!$i.M&&($i.j.info("Great, no buffering proxy detected. Bytes received: "+Qe.length),sS($i),$i.M=!0,as(11))}}else Hh(this.i,this.l,Qe,"[Invalid Chunked Response]"),hl(this),wm(this)}else Hh(this.i,this.l,Qe,null),JA(this,Qe);4==Hi&&hl(this),this.o&&!this.J&&(4==Hi?oj(this.j,this):(this.o=!1,hI(this)))}else(function Gne(h){const _={};h=(h.g&&2<=$a(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let A=0;A<h.length;A++){if(j(h[A]))continue;var E=J(h[A]);const re=E[0];if("string"!=typeof(E=E[1]))continue;E=E.trim();const de=_[re]||[];_[re]=de,de.push(E)}!function H(h,_){for(const E in h)_.call(void 0,h[E],E,h)}(_,function(A){return A.join(", ")})})(this.g),400==E&&0<Qe.indexOf("Unknown SID")?(this.s=3,as(12)):(this.s=0,as(13)),hl(this),wm(this)}}}catch{}},Xu.prototype.cancel=function(){this.J=!0,hl(this)},Xu.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function Dne(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(vm(),as(17)),hl(this),this.s=2,wm(this)):OB(this,this.S-h)},kB.prototype.cancel=function(){if(this.i=UB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var jB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fl(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof fl){this.h=h.h,fI(this,h.j),this.o=h.o,this.g=h.g,pI(this,h.s),this.l=h.l;var _=h.i,E=new Cm;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),$B(this,E),this.m=h.m}else h&&(_=String(h).match(jB))?(this.h=!1,fI(this,_[1]||"",!0),this.o=Tm(_[2]||""),this.g=Tm(_[3]||"",!0),pI(this,_[4]),this.l=Tm(_[5]||"",!0),$B(this,_[6]||"",!0),this.m=Tm(_[7]||"")):(this.h=!1,this.i=new Cm(null,this.h))}function ja(h){return new fl(h)}function fI(h,_,E){h.j=E?Tm(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function pI(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function $B(h,_,E){_ instanceof Cm?(h.i=_,function Vne(h,_){_&&!h.j&&(Ju(h),h.i=null,h.g.forEach(function(E,A){var re=A.toLowerCase();A!=re&&(zB(this,A),qB(this,re,E))},h)),h.j=_}(h.i,h.h)):(E||(_=bm(_,Fne)),h.i=new Cm(_,h.h))}function rr(h,_,E){h.i.set(_,E)}function gI(h){return rr(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Tm(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function bm(h,_,E){return"string"==typeof h?(h=encodeURI(h).replace(_,Nne),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Nne(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}fl.prototype.toString=function(){var h=[],_=this.j;_&&h.push(bm(_,HB,!0),":");var E=this.g;return(E||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(bm(_,HB,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(E=this.s)&&h.push(":",String(E))),(E=this.l)&&(this.g&&"/"!=E.charAt(0)&&h.push("/"),h.push(bm(E,"/"==E.charAt(0)?kne:One,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",bm(E,Lne)),h.join("")};var h,HB=/[#\/\?@]/g,One=/[#\?:]/g,kne=/[#\?]/g,Fne=/[#\?@]/g,Lne=/#/g;function Cm(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Ju(h){h.g||(h.g=new Map,h.h=0,h.i&&function xne(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var A=h[E].indexOf("="),re=null;if(0<=A){var de=h[E].substring(0,A);re=h[E].substring(A+1)}else de=h[E];_(de,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}function zB(h,_){Ju(h),_=zh(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function GB(h,_){return Ju(h),_=zh(h,_),h.g.has(_)}function qB(h,_,E){zB(h,_),0<E.length&&(h.i=null,h.g.set(zh(h,_),R(E)),h.h+=E.length)}function zh(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function ec(h,_,E,A,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),A(E)}catch{}}function jne(){this.g=new Tne}function $ne(h,_,E){const A=E||"";try{BB(h,function(re,de){let Qe=re;d(re)&&(Qe=GA(re)),_.push(A+de+"="+encodeURIComponent(Qe))})}catch(re){throw _.push(A+"type="+encodeURIComponent("_badmap")),re}}function Dm(h){this.l=h.Ub||null,this.j=h.eb||!1}function mI(h,_){ji.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function WB(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function Am(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Sm(h)}function Sm(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function ZB(h){let _="";return ct(h,function(E,A){_+=A,_+=":",_+=E,_+="\r\n"}),_}function nS(h,_,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=ZB(E),"string"==typeof h?null!=E&&encodeURIComponent(String(E)):rr(h,_,E))}function Dr(h){ji.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Cm.prototype).add=function(h,_){Ju(this),this.i=null,h=zh(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this},n.forEach=function(h,_){Ju(this),this.g.forEach(function(E,A){E.forEach(function(re){h.call(_,re,A,this)},this)},this)},n.na=function(){Ju(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let A=0;A<_.length;A++){const re=h[A];for(let de=0;de<re.length;de++)E.push(_[A])}return E},n.V=function(h){Ju(this);let _=[];if("string"==typeof h)GB(this,h)&&(_=_.concat(this.g.get(zh(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return Ju(this),this.i=null,GB(this,h=zh(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var A=_[E];const de=encodeURIComponent(String(A)),Qe=this.V(A);for(A=0;A<Qe.length;A++){var re=de;""!==Qe[A]&&(re+="="+encodeURIComponent(String(Qe[A]))),h.push(re)}}return this.i=h.join("&")},S(Dm,qA),Dm.prototype.g=function(){return new mI(this.l,this.j)},Dm.prototype.i=(h={},function(){return h}),S(mI,ji),(n=mI.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Sm(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Am(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Sm(this)),this.g&&(this.readyState=3,Sm(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;WB(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Am(this):Sm(this),3==this.readyState&&WB(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Am(this))},n.Qa=function(h){this.g&&(this.response=h,Am(this))},n.ga=function(){this.g&&Am(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)h.push((E=E.value)[0]+": "+E[1]),E=_.next();return h.join("\r\n")},Object.defineProperty(mI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),S(Dr,ji);var Hne=/^https?$/i,zne=["POST","PUT"];function KB(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,QB(h),_I(h)}function QB(h){h.A||(h.A=!0,os(h,"complete"),os(h,"error"))}function YB(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=$a(h)||2!=h.Z()))if(h.u&&4==$a(h))vB(h.Ea,0,h);else if(os(h,"readystatechange"),4==$a(h)){h.h=!1;try{const Qe=h.Z();e:switch(Qe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var A;if(A=0===Qe){var re=String(h.D).match(jB)[1]||null;!re&&a.self&&a.self.location&&(re=a.self.location.protocol.slice(0,-1)),A=!Hne.test(re?re.toLowerCase():"")}E=A}if(E)os(h,"complete"),os(h,"success");else{h.m=6;try{var de=2<$a(h)?h.g.statusText:""}catch{de=""}h.l=de+" ["+h.Z()+"]",QB(h)}}finally{_I(h)}}}function _I(h,_){if(h.g){XB(h);const E=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||os(h,"ready");try{E.onreadystatechange=A}catch{}}}function XB(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function $a(h){return h.g?h.g.readyState:0}function JB(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Rm(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function ej(h){this.Aa=0,this.i=[],this.j=new Im,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rm("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rm("baseRetryDelayMs",5e3,h),this.cb=Rm("retryDelaySeedMs",1e4,h),this.Wa=Rm("forwardChannelMaxRetries",2,h),this.wa=Rm("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new kB(h&&h.concurrentRequestLimit),this.Da=new jne,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function rS(h){if(tj(h),3==h.G){var _=h.U++,E=ja(h.I);if(rr(E,"SID",h.K),rr(E,"RID",_),rr(E,"TYPE","terminate"),Pm(h,E),(_=new Xu(h,h.j,_)).L=2,_.v=gI(ja(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&a.Image&&((new Image).src=_.v,E=!0),E||(_.g=lj(_.j,null),_.g.ea(_.v)),_.F=Date.now(),hI(_)}uj(h)}function yI(h){h.g&&(sS(h),h.g.cancel(),h.g=null)}function tj(h){yI(h),h.u&&(a.clearTimeout(h.u),h.u=null),EI(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function vI(h){if(!FB(h.h)&&!h.s){h.s=!0;var _=h.Ga;fm||fB(),pm||(fm(),pm=!0),FA.add(_,h),h.B=0}}function nj(h,_){var E;E=_?_.l:h.U++;const A=ja(h.I);rr(A,"SID",h.K),rr(A,"RID",E),rr(A,"AID",h.T),Pm(h,A),h.m&&h.o&&nS(A,h.m,h.o),E=new Xu(h,h.j,E,h.B+1),null===h.m&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=rj(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),tS(h.h,E),YA(E,A,_)}function Pm(h,_){h.H&&ct(h.H,function(E,A){rr(_,A,E)}),h.l&&BB({},function(E,A){rr(_,A,E)})}function rj(h,_,E){E=Math.min(h.i.length,E);var A=h.l?v(h.l.Na,h.l,h):null;e:{var re=h.i;let de=-1;for(;;){const Qe=["count="+E];-1==de?0<E?(de=re[0].g,Qe.push("ofs="+de)):de=0:Qe.push("ofs="+de);let Gn=!0;for(let Ei=0;Ei<E;Ei++){let Cn=re[Ei].g;const $i=re[Ei].map;if(Cn-=de,0>Cn)de=Math.max(0,re[Ei].g-100),Gn=!1;else try{$ne($i,Qe,"req"+Cn+"_")}catch{A&&A($i)}}if(Gn){A=Qe.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,A}function ij(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;fm||fB(),pm||(fm(),pm=!0),FA.add(_,h),h.v=0}}function iS(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=Em(v(h.Fa,h),aj(h,h.v)),h.v++,0))}function sS(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function sj(h){h.g=new Xu(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=ja(h.qa);rr(_,"RID","rpc"),rr(_,"SID",h.K),rr(_,"AID",h.T),rr(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&rr(_,"TO",h.ja),rr(_,"TYPE","xmlhttp"),Pm(h,_),h.m&&h.o&&nS(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=gI(ja(_)),E.m=null,E.P=!0,xB(E,h)}function EI(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function oj(h,_){var E=null;if(h.g==_){EI(h),sS(h),h.g=null;var A=2}else{if(!eS(h.h,_))return;E=_.D,VB(h.h,_),A=1}if(0!=h.G)if(_.o)if(1==A){E=_.m?_.m.length:0,_=Date.now()-_.F;var re=h.B;os(A=cI(),new SB(A,E)),vI(h)}else ij(h);else if(3==(re=_.s)||0==re&&0<_.X||!(1==A&&function qne(h,_){return!(LB(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=Em(v(h.Ga,h,_),aj(h,h.B)),h.B++,0)))}(h,_)||2==A&&iS(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),re){case 1:pl(h,5);break;case 4:pl(h,10);break;case 3:pl(h,6);break;default:pl(h,2)}}function aj(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function pl(h,_){if(h.j.info("Error code "+_),2==_){var E=v(h.fb,h),A=h.Xa;const re=!A;A=new fl(A||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||fI(A,"https"),gI(A),re?function Une(h,_){const E=new Im;if(a.Image){const A=new Image;A.onload=T(ec,E,"TestLoadImage: loaded",!0,_,A),A.onerror=T(ec,E,"TestLoadImage: error",!1,_,A),A.onabort=T(ec,E,"TestLoadImage: abort",!1,_,A),A.ontimeout=T(ec,E,"TestLoadImage: timeout",!1,_,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else _(!1)}(A.toString(),E):function Bne(h,_){new Im;const A=new AbortController,re=setTimeout(()=>{A.abort(),ec(0,0,!1,_)},1e4);fetch(h,{signal:A.signal}).then(de=>{clearTimeout(re),ec(0,0,!!de.ok,_)}).catch(()=>{clearTimeout(re),ec(0,0,!1,_)})}(A.toString(),E)}else as(2);h.G=0,h.l&&h.l.sa(_),uj(h),tj(h)}function uj(h){if(h.G=0,h.ka=[],h.l){const _=UB(h.h);(0!=_.length||0!=h.i.length)&&(M(h.ka,_),M(h.ka,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.ra()}}function cj(h,_,E){var A=E instanceof fl?ja(E):new fl(E);if(""!=A.g)_&&(A.g=_+"."+A.g),pI(A,A.s);else{var re=a.location;A=re.protocol,_=_?_+"."+re.hostname:re.hostname,re=+re.port;var de=new fl(null);A&&fI(de,A),_&&(de.g=_),re&&pI(de,re),E&&(de.l=E),A=de}return _=h.ya,(E=h.D)&&_&&rr(A,E,_),rr(A,"VER",h.la),Pm(h,A),A}function lj(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new Dr(h.Ca&&!h.pa?new Dm({eb:E}):h.pa)).Ha(h.J),_}function dj(){}function II(){}function Us(h,_){ji.call(this),this.g=new ej(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!j(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!j(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new Gh(this)}function hj(h){WA.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function fj(){ZA.call(this),this.status=1}function Gh(h){this.g=h}(n=Dr.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():KA.g(),this.v=function TB(h){return h.h||(h.h=h.i())}(this.o?this.o:KA),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(de){return void KB(this,de)}if(h=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var re in A)E.set(re,A[re]);else{if("function"!=typeof A.keys||"function"!=typeof A.get)throw Error("Unknown input type for opt_headers: "+String(A));for(const de of A.keys())E.set(de,A.get(de))}A=Array.from(E.keys()).find(de=>"content-type"==de.toLowerCase()),re=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(zne,_,void 0))||A||re||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,Qe]of E)this.g.setRequestHeader(de,Qe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{XB(this),this.u=!0,this.g.send(h),this.u=!1}catch(de){KB(this,de)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,os(this,"complete"),os(this,"abort"),_I(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_I(this,!0)),Dr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?YB(this):this.bb())},n.bb=function(){YB(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<$a(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),wne(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=ej.prototype).la=8,n.G=1,n.connect=function(h,_,E,A){as(0),this.W=h,this.H=_||{},E&&void 0!==A&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.I=cj(this,null,this.W),vI(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const re=new Xu(this,this.j,h);let de=this.o;if(this.S&&(de?(de=N(de),Q(de,this.S)):de=this.S),null!==this.m||this.O||(re.H=de,de=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){var A=this.i[E];if(void 0===(A="__data__"in A.map&&"string"==typeof(A=A.map.__data__)?A.length:void 0))break;if(4096<(_+=A)){_=E;break e}if(4096===_||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=rj(this,re,_),rr(E=ja(this.I),"RID",h),rr(E,"CVER",22),this.D&&rr(E,"X-HTTP-Session-Id",this.D),Pm(this,E),de&&(this.O?_="headers="+encodeURIComponent(String(ZB(de)))+"&"+_:this.m&&nS(E,this.m,de)),tS(this.h,re),this.Ua&&rr(E,"TYPE","init"),this.P?(rr(E,"$req",_),rr(E,"SID","null"),re.T=!0,YA(re,E,null)):YA(re,E,_),this.G=2}}else 3==this.G&&(h?nj(this,h):0==this.i.length||FB(this.h)||nj(this))},n.Fa=function(){if(this.u=null,sj(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Em(v(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,as(10),yI(this),sj(this))},n.Za=function(){null!=this.C&&(this.C=null,yI(this),iS(this),as(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),as(2)):(this.j.info("Failed to ping google.com"),as(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=dj.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},II.prototype.g=function(h,_){return new Us(h,_)},S(Us,ji),Us.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Us.prototype.close=function(){rS(this.g)},Us.prototype.o=function(h){var _=this.g;if("string"==typeof h){var E={};E.__data__=h,h=E}else this.u&&((E={}).__data__=GA(h),h=E);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&vI(_)},Us.prototype.N=function(){this.g.l=null,delete this.j,rS(this.g),delete this.g,Us.aa.N.call(this)},S(hj,WA),S(fj,ZA),S(Gh,dj),Gh.prototype.ua=function(){os(this.g,"a")},Gh.prototype.ta=function(h){os(this.g,new hj(h))},Gh.prototype.sa=function(h){os(this.g,new fj)},Gh.prototype.ra=function(){os(this.g,"b")},II.prototype.createWebChannel=II.prototype.g,Us.prototype.send=Us.prototype.o,Us.prototype.open=Us.prototype.m,Us.prototype.close=Us.prototype.close,NF=Sa.createWebChannelTransport=function(){return new II},xF=Sa.getStatEventTarget=function(){return cI()},MF=Sa.Event=dl,XC=Sa.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lI.NO_ERROR=0,lI.TIMEOUT=8,lI.HTTP_ERROR=6,Jv=Sa.ErrorCode=lI,RB.COMPLETE="complete",PF=Sa.EventType=RB,bB.EventType=ym,ym.OPEN="a",ym.CLOSE="b",ym.ERROR="c",ym.MESSAGE="d",ji.prototype.listen=ji.prototype.K,vg=Sa.WebChannel=bB,RF=Sa.FetchXmlHttpFactory=Dm,Dr.prototype.listenOnce=Dr.prototype.L,Dr.prototype.getLastError=Dr.prototype.Ka,Dr.prototype.getLastErrorCode=Dr.prototype.Ba,Dr.prototype.getStatus=Dr.prototype.Z,Dr.prototype.getResponseJson=Dr.prototype.Oa,Dr.prototype.getResponseText=Dr.prototype.oa,Dr.prototype.send=Dr.prototype.ea,Dr.prototype.setWithCredentials=Dr.prototype.Ha,SF=Sa.XhrIo=Dr}).apply(typeof Xv<"u"?Xv:typeof self<"u"?self:typeof window<"u"?window:{});const OF="@firebase/firestore";class ai{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ai.UNAUTHENTICATED=new ai(null),ai.GOOGLE_CREDENTIALS=new ai("google-credentials-uid"),ai.FIRST_PARTY=new ai("first-party-uid"),ai.MOCK_USER=new ai("mock-user");let eh="10.12.1";const Mu=new qo.Yd("@firebase/firestore");function th(){return Mu.logLevel}function Oe(n,...e){if(Mu.logLevel<=qo.in.DEBUG){const t=e.map(JC);Mu.debug(`Firestore (${eh}): ${n}`,...t)}}function xr(n,...e){if(Mu.logLevel<=qo.in.ERROR){const t=e.map(JC);Mu.error(`Firestore (${eh}): ${n}`,...t)}}function Is(n,...e){if(Mu.logLevel<=qo.in.WARN){const t=e.map(JC);Mu.warn(`Firestore (${eh}): ${n}`,...t)}}function JC(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ut(n="Unexpected state"){const e=`FIRESTORE (${eh}) INTERNAL ASSERTION FAILED: `+n;throw xr(e),new Error(e)}function pt(n,e){n||ut()}function Ke(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends Yt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class kF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ai.UNAUTHENTICATED))}shutdown(){}}class BK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class jK{constructor(e){this.t=e,this.currentUser=ai.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let o=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable((0,he.Z)(function*(){yield d.promise,yield s(r.currentUser)}))},u=d=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pt("string"==typeof r.accessToken),new kF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return pt(null===e||"string"==typeof e),new ai(e)}}class $K{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ai.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class HK{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new $K(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ai.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class FF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zK{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pt("string"==typeof t.token),this.R=t.token,new FF(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function GK(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class LF{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=GK(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Ut(n,e){return n<e?-1:n>e?1:0}function nh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function VF(n){return n+"\0"}class dr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dr.fromMillis(Date.now())}static fromDate(e){return dr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new dr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mt(e)}static min(){return new mt(new dr(0,0))}static max(){return new mt(new dr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Eg{constructor(e,t,r){void 0===t?t=0:t>e.length&&ut(),void 0===r?r=e.length-t:r>e.length-t&&ut(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Eg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Eg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class yn extends Eg{construct(e,t,r){return new yn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new yn(t)}static emptyPath(){return new yn([])}}const qK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends Eg{construct(e,t,r){return new er(e,t,r)}static isValidIdentifier(e){return qK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new er(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Pe(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Pe(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Pe(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Pe(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(t)}static emptyPath(){return new er([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(yn.fromString(e))}static fromName(e){return new Xe(yn.fromString(e).popFirst(5))}static empty(){return new Xe(yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===yn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return yn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new yn(e.slice()))}}class rh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function eD(n){return n.fields.find(e=>2===e.kind)}function $c(n){return n.fields.filter(e=>2!==e.kind)}rh.UNKNOWN_ID=-1;class Hc{constructor(e,t){this.fieldPath=e,this.kind=t}}class ih{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ih(0,Fs.min())}}function UF(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=mt.fromTimestamp(1e9===r?new dr(t+1,0):new dr(t,r));return new Fs(i,Xe.empty(),e)}function BF(n){return new Fs(n.readTime,n.key,-1)}class Fs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fs(mt.min(),Xe.empty(),-1)}static max(){return new Fs(mt.max(),Xe.empty(),-1)}}function tD(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:Ut(n.largestBatchId,e.largestBatchId))}const jF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $F{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function xu(n){return nD.apply(this,arguments)}function nD(){return(nD=(0,he.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==jF)throw n;Oe("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(i=>i?se.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new se((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const d=u;t(e[d]).next(p=>{o[d]=p,++a,a===s&&r(o)},p=>i(p))}})}static doWhile(e,t){return new se((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class eE{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Qr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ig(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=rD(r.target.error);this.V.reject(new Ig(e,i))}}static open(e,t,r,i){try{return new eE(t,e.transaction(i,r))}catch(s){throw new Ig(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new QK(t)}}class Wo{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Wo.S((0,Yt.z$)())&&xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),zc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Yt.hl)())return!1;if(Wo.C())return!0;const e=(0,Yt.z$)(),t=Wo.S(e),r=0<t&&t<10,i=HF(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,he.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Ig(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new Pe(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Pe(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Ig(e,a))},s.onupgradeneeded=o=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,he.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const u=eE.open(s.db,e,o?"readonly":"readwrite",r),d=i(u).next(p=>(u.g(),p)).catch(p=>(u.abort(p),se.reject(p))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,p="FirebaseError"!==d.name&&a<3;if(Oe("SimpleDb","Transaction failed with error:",d.message,"Retrying:",p),s.close(),!p)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function HF(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class KK{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return zc(this.B.delete())}}class Ig extends Pe{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Nu(n){return"IndexedDbTransactionError"===n.name}class QK{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),zc(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),zc(this.store.add(e))}get(e){return zc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),zc(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),zc(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new se((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new se((r,i)=>{t.onerror=s=>{const o=rD(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new se((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new KK(a),d=t(a.primaryKey,a.value,u);if(d instanceof se){const p=d.catch(m=>(u.done(),se.reject(m)));r.push(p)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function zc(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=rD(r.target.error);t(i)}})}let zF=!1;function rD(n){const e=Wo.S((0,Yt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return zF||(zF=!0,setTimeout(()=>{throw r},0)),r}}return n}class YK{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;Oe("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,he.Z)(function*(){t.task=null;try{Oe("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){Nu(r)?Oe("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield xu(r)}yield t.X(6e4)}))}}class XK{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,he.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return se.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return Oe("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Oe("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=BF(s);tD(o,r)>0&&(r=o)}),new Fs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ls=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function wg(n){return null==n}function Tg(n){return 0===n&&1/n==-1/0}function GF(n){return"number"==typeof n&&Number.isInteger(n)&&!Tg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ki(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=qF(e)),e=JK(n.get(t),e);return qF(e)}function JK(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function qF(n){return n+"\x01\x01"}function Zo(n){const e=n.length;if(pt(e>=2),2===e)return pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),yn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&ut(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:ut()}s=o+2}return new yn(r)}const WF=["userId","batchId"];function tE(n,e){return[n,ki(e)]}function ZF(n,e,t){return[n,ki(e),t]}const eQ={},tQ=["prefixPath","collectionGroup","readTime","documentId"],nQ=["prefixPath","collectionGroup","documentId"],rQ=["collectionGroup","readTime","prefixPath","documentId"],iQ=["canonicalId","targetId"],sQ=["targetId","path"],oQ=["path","targetId"],aQ=["collectionId","parent"],uQ=["indexId","uid"],cQ=["uid","sequenceNumber"],lQ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dQ=["indexId","uid","orderedDocumentKey"],hQ=["userId","collectionPath","documentId"],fQ=["userId","collectionPath","largestBatchId"],pQ=["userId","collectionGroup","largestBatchId"],KF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],gQ=[...KF,"documentOverlays"],QF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],YF=QF,XF=[...YF,"indexConfiguration","indexState","indexEntries"],mQ=XF;class iD extends $F{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function ui(n,e){const t=Ke(n);return Wo.F(t._e,e)}function JF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ou(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function tL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Kn{constructor(e,t){this.comparator=e,this.root=t||_i.EMPTY}insert(e,t){return new Kn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_i.BLACK,null,null))}remove(e){return new Kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_i.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nE(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nE(this.root,e,this.comparator,!1)}getReverseIterator(){return new nE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nE(this.root,e,this.comparator,!0)}}class nE{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _i{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??_i.RED,this.left=i??_i.EMPTY,this.right=s??_i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new _i(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _i.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return _i.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}_i.EMPTY=null,_i.RED=!0,_i.BLACK=!1,_i.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(e,t,r,i,s){return this}insert(e,t,r){return new _i(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bn{constructor(e){this.comparator=e,this.data=new Kn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nL(this.data.getIterator())}getIteratorFrom(e){return new nL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bn(this.comparator);return t.data=e,t}}class nL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function sh(n){return n.hasNext()?n.getNext():void 0}class ws{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new ws([])}unionWith(e){let t=new Bn(er.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ws(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class rL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new rL("Invalid base64 string: "+s):s}}(e);return new Yr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yr.EMPTY_BYTE_STRING=new Yr("");const yQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ra(n){if(pt(!!n),"string"==typeof n){let e=0;const t=yQ.exec(n);if(pt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Cr(n.seconds),nanos:Cr(n.nanos)}}function Cr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Pa(n){return"string"==typeof n?Yr.fromBase64String(n):Yr.fromUint8Array(n)}function rE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function iE(n){const e=n.mapValue.fields.__previous_value__;return rE(e)?iE(e):e}function bg(n){const e=Ra(n.mapValue.fields.__local_write_time__.timestampValue);return new dr(e.seconds,e.nanos)}class vQ{constructor(e,t,r,i,s,o,a,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class ku{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ku("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ku&&e.projectId===this.projectId&&e.database===this.database}}const Fu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sE={nullValue:"NULL_VALUE"};function Lu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?rE(n)?4:aL(n)?9007199254740991:10:ut()}function Ko(n,e){if(n===e)return!0;const t=Lu(n);if(t!==Lu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return bg(n).isEqual(bg(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ra(i.timestampValue),a=Ra(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Pa(n.bytesValue).isEqual(Pa(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Cr(i.geoPointValue.latitude)===Cr(s.geoPointValue.latitude)&&Cr(i.geoPointValue.longitude)===Cr(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Cr(i.integerValue)===Cr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Cr(i.doubleValue),a=Cr(s.doubleValue);return o===a?Tg(o)===Tg(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return nh(n.arrayValue.values||[],e.arrayValue.values||[],Ko);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(JF(o)!==JF(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!Ko(o[u],a[u])))return!1;return!0}(n,e);default:return ut()}var s}function Cg(n,e){return void 0!==(n.values||[]).find(t=>Ko(t,e))}function Vu(n,e){if(n===e)return 0;const t=Lu(n),r=Lu(e);if(t!==r)return Ut(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ut(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Cr(s.integerValue||s.doubleValue),u=Cr(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return iL(n.timestampValue,e.timestampValue);case 4:return iL(bg(n),bg(e));case 5:return Ut(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Pa(s),u=Pa(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const p=Ut(a[d],u[d]);if(0!==p)return p}return Ut(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ut(Cr(s.latitude),Cr(o.latitude));return 0!==a?a:Ut(Cr(s.longitude),Cr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let d=0;d<a.length&&d<u.length;++d){const p=Vu(a[d],u[d]);if(p)return p}return Ut(a.length,u.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Fu.mapValue&&o===Fu.mapValue)return 0;if(s===Fu.mapValue)return 1;if(o===Fu.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),d=o.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const v=Ut(u[m],p[m]);if(0!==v)return v;const T=Vu(a[u[m]],d[p[m]]);if(0!==T)return T}return Ut(u.length,p.length)}(n.mapValue,e.mapValue);default:throw ut()}}function iL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ut(n,e);const t=Ra(n),r=Ra(e),i=Ut(t.seconds,r.seconds);return 0!==i?i:Ut(t.nanos,r.nanos)}function oh(n){return sD(n)}function sD(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ra(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Pa(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=sD(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${sD(t.fields[o])}`;return i+"}"}(n.mapValue):ut()}function Gc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function oD(n){return!!n&&"integerValue"in n}function Dg(n){return!!n&&"arrayValue"in n}function sL(n){return!!n&&"nullValue"in n}function oL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function aE(n){return!!n&&"mapValue"in n}function Ag(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ou(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ag(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ag(n.arrayValue.values[t]);return e}return Object.assign({},n)}function aL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function EQ(n){return"nullValue"in n?sE:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Gc(ku.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function IQ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Gc(ku.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Fu:ut()}function uL(n,e){const t=Vu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function cL(n,e){const t=Vu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class yi{constructor(e){this.value=e}static empty(){return new yi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!aE(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ag(t)}setAll(e){let t=er.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Ag(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());aE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ko(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];aE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ou(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new yi(Ag(this.value))}}function lL(n){const e=[];return Ou(n.fields,(t,r)=>{const i=new er([t]);if(aE(r)){const s=lL(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ws(e)}class tr{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new tr(e,0,mt.min(),mt.min(),mt.min(),yi.empty(),0)}static newFoundDocument(e,t,r,i){return new tr(e,1,t,mt.min(),r,i,0)}static newNoDocument(e,t){return new tr(e,2,t,mt.min(),mt.min(),yi.empty(),0)}static newUnknownDocument(e,t){return new tr(e,3,t,mt.min(),mt.min(),yi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(mt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Uu{constructor(e,t){this.position=e,this.inclusive=t}}function dL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Xe.comparator(Xe.fromName(o.referenceValue),t.key):Vu(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function hL(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ko(n.position[t],e.position[t]))return!1;return!0}class Sg{constructor(e,t="asc"){this.field=e,this.dir=t}}function wQ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class fL{}class vn extends fL{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new TQ(e,t,r):"array-contains"===t?new DQ(e,r):"in"===t?new vL(e,r):"not-in"===t?new AQ(e,r):"array-contains-any"===t?new SQ(e,r):new vn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new bQ(e,r):new CQ(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Vu(t,this.value)):null!==t&&Lu(this.value)===Lu(t)&&this.matchesComparison(Vu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ut()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kn extends fL{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new kn(e,t)}matches(e){return ah(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ah(n){return"and"===n.op}function aD(n){return"or"===n.op}function uD(n){return pL(n)&&ah(n)}function pL(n){for(const e of n.filters)if(e instanceof kn)return!1;return!0}function cD(n){if(n instanceof vn)return n.field.canonicalString()+n.op.toString()+oh(n.value);if(uD(n))return n.filters.map(e=>cD(e)).join(",");{const e=n.filters.map(t=>cD(t)).join(",");return`${n.op}(${e})`}}function gL(n,e){return n instanceof vn?(r=n,(i=e)instanceof vn&&r.op===i.op&&r.field.isEqual(i.field)&&Ko(r.value,i.value)):n instanceof kn?function(r,i){return i instanceof kn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&gL(o,i.filters[a]),!0)}(n,e):void ut();var r,i}function mL(n,e){const t=n.filters.concat(e);return kn.create(t,n.op)}function _L(n){return n instanceof vn?`${(t=n).field.canonicalString()} ${t.op} ${oh(t.value)}`:n instanceof kn?function(t){return t.op.toString()+" {"+t.getFilters().map(_L).join(" ,")+"}"}(n):"Filter";var t}class TQ extends vn{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class bQ extends vn{constructor(e,t){super(e,"in",t),this.keys=yL(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class CQ extends vn{constructor(e,t){super(e,"not-in",t),this.keys=yL(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function yL(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class DQ extends vn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Dg(t)&&Cg(t.arrayValue,this.value)}}class vL extends vn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Cg(this.value.arrayValue,t)}}class AQ extends vn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Cg(this.value.arrayValue,t)}}class SQ extends vn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Dg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Cg(this.value.arrayValue,r))}}class RQ{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function lD(n,e=null,t=[],r=[],i=null,s=null,o=null){return new RQ(n,e,t,r,i,s,o)}function qc(n){const e=Ke(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>cD(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),wg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>oh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>oh(r)).join(",")),e.ue=t}return e.ue}function Rg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!wQ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hL(n.startAt,e.startAt)&&hL(n.endAt,e.endAt)}function uE(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function cE(n,e){return n.filters.filter(t=>t instanceof vn&&t.field.isEqual(e))}function EL(n,e,t){let r=sE,i=!0;for(const s of cE(n,e)){let o=sE,a=!0;switch(s.op){case"<":case"<=":o=EQ(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=sE}uL({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];uL({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function IL(n,e,t){let r=Fu,i=!0;for(const s of cE(n,e)){let o=Fu,a=!0;switch(s.op){case">=":case">":o=IQ(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Fu}cL({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];cL({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Ma{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function wL(n,e,t,r,i,s,o,a){return new Ma(n,e,t,r,i,s,o,a)}function uh(n){return new Ma(n)}function TL(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function dD(n){return null!==n.collectionGroup}function ch(n){const e=Ke(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Bn(er.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Sg(s,r))}),t.has(er.keyField().canonicalString())||e.ce.push(new Sg(er.keyField(),r))}return e.ce}function Fi(n){const e=Ke(n);return e.le||(e.le=function CL(n,e){if("F"===n.limitType)return lD(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Sg(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Uu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Uu(n.startAt.position,n.startAt.inclusive):null;return lD(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,ch(n))),e.le}function hD(n,e){const t=n.filters.concat([e]);return new Ma(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function lE(n,e,t){return new Ma(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Pg(n,e){return Rg(Fi(n),Fi(e))&&n.limitType===e.limitType}function DL(n){return`${qc(Fi(n))}|lt:${n.limitType}`}function lh(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>_L(i)).join(", ")}]`),wg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>oh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>oh(i)).join(",")),`Target(${r})`}(Fi(n))}; limitType=${n.limitType})`}function Mg(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Xe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of ch(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,u){const d=dL(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,ch(r),i)||r.endAt&&!function(o,a,u){const d=dL(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,ch(r),i)));var r,i}function AL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function SL(n){return(e,t)=>{let r=!1;for(const i of ch(n)){const s=PQ(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function PQ(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(s,o,a){const u=o.data.field(s),d=a.data.field(s);return null!==u&&null!==d?Vu(u,d):ut()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}class xa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ou(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return tL(this.inner)}size(){return this.innerSize}}const MQ=new Kn(Xe.comparator);function Ts(){return MQ}const RL=new Kn(Xe.comparator);function xg(...n){let e=RL;for(const t of n)e=e.insert(t.key,t);return e}function PL(n){let e=RL;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qo(){return Ng()}function ML(){return Ng()}function Ng(){return new xa(n=>n.toString(),(n,e)=>n.isEqual(e))}const xQ=new Kn(Xe.comparator),NQ=new Bn(Xe.comparator);function Zt(...n){let e=NQ;for(const t of n)e=e.add(t);return e}const OQ=new Bn(Ut);function fD(){return OQ}function xL(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tg(e)?"-0":e}}function NL(n){return{integerValue:""+n}}function OL(n,e){return GF(e)?NL(e):xL(n,e)}class dE{constructor(){this._=void 0}}function kQ(n,e,t){return n instanceof dh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&rE(s)&&(s=iE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Wc?FL(n,e):n instanceof Zc?LL(n,e):function(i,s){const o=kL(i,s),a=VL(o)+VL(i.Pe);return oD(o)&&oD(i.Pe)?NL(a):xL(i.serializer,a)}(n,e)}function FQ(n,e,t){return n instanceof Wc?FL(n,e):n instanceof Zc?LL(n,e):t}function kL(n,e){return n instanceof hh?oD(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class dh extends dE{}class Wc extends dE{constructor(e){super(),this.elements=e}}function FL(n,e){const t=UL(e);for(const r of n.elements)t.some(i=>Ko(i,r))||t.push(r);return{arrayValue:{values:t}}}class Zc extends dE{constructor(e){super(),this.elements=e}}function LL(n,e){let t=UL(e);for(const r of n.elements)t=t.filter(i=>!Ko(i,r));return{arrayValue:{values:t}}}class hh extends dE{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function VL(n){return Cr(n.integerValue||n.doubleValue)}function UL(n){return Dg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Og{constructor(e,t){this.field=e,this.transform=t}}class VQ{constructor(e,t){this.version=e,this.transformResults=t}}class hr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hr}static exists(e){return new hr(void 0,e)}static updateTime(e){return new hr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hE(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class fE{}function BL(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ph(n.key,hr.none()):new fh(n.key,n.data,hr.none());{const t=n.data,r=yi.empty();let i=new Bn(er.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Na(n.key,r,new ws(i.toArray()),hr.none())}}function UQ(n,e,t){n instanceof fh?function(i,s,o){const a=i.value.clone(),u=HL(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Na?function(i,s,o){if(!hE(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=HL(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll($L(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function kg(n,e,t,r){return n instanceof fh?function(s,o,a,u){if(!hE(s.precondition,o))return a;const d=s.value.clone(),p=zL(s.fieldTransforms,u,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Na?function(s,o,a,u){if(!hE(s.precondition,o))return a;const d=zL(s.fieldTransforms,u,o),p=o.data;return p.setAll($L(s)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,hE(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function BQ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=kL(r.transform,i||null);null!=s&&(null===t&&(t=yi.empty()),t.set(r.field,s))}return t||null}function jL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&nh(r,i,(s,o)=>function LQ(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Wc&&i instanceof Wc||r instanceof Zc&&i instanceof Zc?nh(r.elements,i.elements,Ko):r instanceof hh&&i instanceof hh?Ko(r.Pe,i.Pe):r instanceof dh&&i instanceof dh);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class fh extends fE{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Na extends fE{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function $L(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function HL(n,e,t){const r=new Map;pt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,FQ(o,a,t[i]))}return r}function zL(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,kQ(s,o,e))}return r}class ph extends fE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pD extends fE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gD{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&UQ(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=kg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=kg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ML();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=BL(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Zt())}isEqual(e){return this.batchId===e.batchId&&nh(this.mutations,e.mutations,(t,r)=>jL(t,r))&&nh(this.baseMutations,e.baseMutations,(t,r)=>jL(t,r))}}class mD{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){pt(e.mutations.length===r.length);let i=xQ;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new mD(e,t,r,i)}}class _D{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class jQ{constructor(e,t){this.count=e,this.unchangedNames=t}}var Br,Tn;function qL(n){switch(n){default:return ut();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function WL(n){if(void 0===n)return xr("GRPC error has no .code"),le.UNKNOWN;switch(n){case Br.OK:return le.OK;case Br.CANCELLED:return le.CANCELLED;case Br.UNKNOWN:return le.UNKNOWN;case Br.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Br.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Br.INTERNAL:return le.INTERNAL;case Br.UNAVAILABLE:return le.UNAVAILABLE;case Br.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Br.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Br.NOT_FOUND:return le.NOT_FOUND;case Br.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Br.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Br.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Br.ABORTED:return le.ABORTED;case Br.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Br.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Br.DATA_LOSS:return le.DATA_LOSS;default:return ut()}}(Tn=Br||(Br={}))[Tn.OK=0]="OK",Tn[Tn.CANCELLED=1]="CANCELLED",Tn[Tn.UNKNOWN=2]="UNKNOWN",Tn[Tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tn[Tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tn[Tn.NOT_FOUND=5]="NOT_FOUND",Tn[Tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tn[Tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tn[Tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tn[Tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tn[Tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tn[Tn.ABORTED=10]="ABORTED",Tn[Tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tn[Tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tn[Tn.INTERNAL=13]="INTERNAL",Tn[Tn.UNAVAILABLE=14]="UNAVAILABLE",Tn[Tn.DATA_LOSS=15]="DATA_LOSS";function ZL(){return new TextEncoder}const $Q=new jc([4294967295,4294967295],0);function KL(n){const e=ZL().encode(n),t=new AF;return t.update(e),new Uint8Array(t.digest())}function QL(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new jc([t,r],0),new jc([i,s],0)]}class yD{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Fg(`Invalid padding: ${t}`);if(r<0)throw new Fg(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Fg(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Fg(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=jc.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(jc.fromNumber(r)));return 1===i.compare($Q)&&(i=new jc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=KL(e),[r,i]=QL(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new yD(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=KL(e),[r,i]=QL(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Fg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Lg{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Vg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Lg(mt.min(),i,new Kn(Ut),Ts(),Zt())}}class Vg{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Vg(r,t,Zt(),Zt(),Zt())}}class gE{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class YL{constructor(e,t){this.targetId=e,this.me=t}}class XL{constructor(e,t,r=Yr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class JL{constructor(){this.fe=0,this.ge=tV(),this.pe=Yr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Zt(),t=Zt(),r=Zt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ut()}}),new Vg(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=tV()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class HQ{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ts(),this.qe=eV(),this.Qe=new Kn(Ut)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ut()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(uE(s))if(0===r){const o=new Xe(s.path);this.Ue(t,o,tr.newNoDocument(o,mt.min()))}else pt(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;0!==u&&(this.je(t),this.Qe=this.Qe.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Pa(r).toUint8Array()}catch(u){if(u instanceof rL)return Is("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new yD(o,i,s)}catch(u){return Is(u instanceof Fg?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&uE(a.target)){const u=new Xe(a.target.path);null!==this.ke.get(u)||this.it(o,u)||this.Ue(o,u,tr.newNoDocument(u,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=Zt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Lg(e,t,this.Qe,this.ke,r);return this.ke=Ts(),this.qe=eV(),this.Qe=new Kn(Ut),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new JL,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Bn(Ut),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new JL),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function eV(){return new Kn(Xe.comparator)}function tV(){return new Kn(Xe.comparator)}const zQ={asc:"ASCENDING",desc:"DESCENDING"},GQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qQ={and:"AND",or:"OR"};class WQ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vD(n,e){return n.useProto3Json||wg(e)?e:{value:e}}function gh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ZQ(n,e){return gh(n,e.toTimestamp())}function Nr(n){return pt(!!n),mt.fromTimestamp(function(t){const r=Ra(t);return new dr(r.seconds,r.nanos)}(n))}function ED(n,e){return ID(n,e).canonicalString()}function ID(n,e){const t=(i=n,new yn(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function rV(n){const e=yn.fromString(n);return pt(pV(e)),e}function Ug(n,e){return ED(n.databaseId,e.path)}function Yo(n,e){const t=rV(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(oV(t))}function iV(n,e){return ED(n.databaseId,e)}function sV(n){const e=rV(n);return 4===e.length?yn.emptyPath():oV(e)}function wD(n){return new yn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oV(n){return pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function aV(n,e,t){return{name:Ug(n,e),fields:t.value.mapValue.fields}}function uV(n,e,t){const r=Yo(n,e.name),i=Nr(e.updateTime),s=e.createTime?Nr(e.createTime):mt.min(),o=new yi({mapValue:{fields:e.fields}}),a=tr.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Bg(n,e){let t;if(e instanceof fh)t={update:aV(n,e.key,e.value)};else if(e instanceof ph)t={delete:Ug(n,e.key)};else if(e instanceof Na)t={update:aV(n,e.key,e.data),updateMask:nY(e.fieldMask)};else{if(!(e instanceof pD))return ut();t={verify:Ug(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof dh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof hh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ut()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:ZQ(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ut()),t;var s}function TD(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?hr.updateTime(Nr(s.updateTime)):void 0!==s.exists?hr.exists(s.exists):hr.none():hr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(pt("REQUEST_TIME"===a.setToServerValue),u=new dh):"appendMissingElements"in a?u=new Wc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new Zc(a.removeAllFromArray.values||[]):"increment"in a?u=new hh(o,a.increment):ut();const d=er.fromServerFormat(a.fieldPath);return new Og(d,u)}(n,i)):[];var s;if(e.update){const i=Yo(n,e.update.name),s=new yi({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new ws((e.updateMask.fieldPaths||[]).map(p=>er.fromServerFormat(p)));return new Na(i,s,o,t,r)}return new fh(i,s,t,r)}if(e.delete){const i=Yo(n,e.delete);return new ph(i,t)}if(e.verify){const i=Yo(n,e.verify);return new pD(i,t)}return ut()}function cV(n,e){return{documents:[iV(n,e.path)]}}function mE(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=iV(n,i);const s=function(d){if(0!==d.length)return fV(kn.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(d){if(0!==d.length)return d.map(p=>{return{field:Bu((v=p).field),direction:JQ(v.dir)};var v})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=vD(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i};var d}function dV(n){let e=sV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){pt(1===r);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=function(m){const v=hV(m);return v instanceof kn&&uD(v)?v.getFilters():[v]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(v=>{return new Sg(mh((S=v).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let a=null;t.limit&&(a=function(m){let v;return v="object"==typeof m?m.value:m,wg(v)?null:v}(t.limit));let u=null;var m;t.startAt&&(u=new Uu((m=t.startAt).values||[],!!m.before));let d=null;return t.endAt&&(d=function(m){return new Uu(m.values||[],!m.before)}(t.endAt)),wL(e,i,o,s,a,"F",u,d)}function hV(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=mh(t.unaryFilter.field);return vn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=mh(t.unaryFilter.field);return vn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=mh(t.unaryFilter.field);return vn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=mh(t.unaryFilter.field);return vn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}(n):void 0!==n.fieldFilter?vn.create(mh((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return kn.create(t.compositeFilter.filters.map(r=>hV(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ut()}}(t.compositeFilter.op))}(n):ut();var t}function JQ(n){return zQ[n]}function eY(n){return GQ[n]}function tY(n){return qQ[n]}function Bu(n){return{fieldPath:n.canonicalString()}}function mh(n){return er.fromServerFormat(n.fieldPath)}function fV(n){return n instanceof vn?function(t){if("=="===t.op){if(oL(t.value))return{unaryFilter:{field:Bu(t.field),op:"IS_NAN"}};if(sL(t.value))return{unaryFilter:{field:Bu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(oL(t.value))return{unaryFilter:{field:Bu(t.field),op:"IS_NOT_NAN"}};if(sL(t.value))return{unaryFilter:{field:Bu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bu(t.field),op:eY(t.op),value:t.value}}}(n):n instanceof kn?function(t){const r=t.getFilters().map(i=>fV(i));return 1===r.length?r[0]:{compositeFilter:{op:tY(t.op),filters:r}}}(n):ut()}function nY(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pV(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Oa{constructor(e,t,r,i,s=mt.min(),o=mt.min(),a=Yr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Oa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Oa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gV{constructor(e){this.ct=e}}function mV(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_E(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ug(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:gh(s,o.version.toTimestamp()),createTime:gh(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Kc(e.version)};else{if(!e.isUnknownDocument())return ut();r.unknownDocument={path:t.path.toArray(),version:Kc(e.version)}}var s,o;return r}function _E(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Kc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qc(n){const e=new dr(n.seconds,n.nanoseconds);return mt.fromTimestamp(e)}function Yc(n,e){const t=(e.baseMutations||[]).map(s=>TD(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>TD(n.ct,s)),i=dr.fromMillis(e.localWriteTimeMs);return new gD(e.batchId,i,t,r)}function jg(n){const e=Qc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Qc(n.lastLimboFreeSnapshotVersion):mt.min();let r;return r=void 0!==n.query.documents?(pt(1===(s=n.query).documents.length),Fi(uh(sV(s.documents[0])))):function(s){return Fi(dV(s))}(n.query),new Oa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Yr.fromBase64String(n.resumeToken));var s}function _V(n,e){const t=Kc(e.snapshotVersion),r=Kc(e.lastLimboFreeSnapshotVersion);let i;i=uE(e.target)?cV(n.ct,e.target):mE(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qc(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function bD(n){const e=dV({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?lE(e,e.limit,"L"):e}function CD(n,e){return new _D(e.largestBatchId,TD(n.ct,e.overlayMutation))}function yV(n,e){const t=e.path.lastSegment();return[n,ki(e.path.popLast()),t]}function vV(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Kc(r.readTime),documentKey:ki(r.documentKey.path),largestBatchId:r.largestBatchId}}class iY{getBundleMetadata(e,t){return EV(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Qc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return EV(e).put({bundleId:(i=t).id,createTime:Kc(Nr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return IV(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:bD(s.bundledQuery),readTime:Qc(s.readTime)};var s})}saveNamedQuery(e,t){return IV(e).put({name:(i=t).name,readTime:Kc(Nr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function EV(n){return ui(n,"bundles")}function IV(n){return ui(n,"namedQueries")}class yE{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new yE(e,t.uid||"")}getOverlay(e,t){return $g(e).get(yV(this.userId,t)).next(r=>r?CD(this.serializer,r):null)}getOverlays(e,t){const r=Qo();return se.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new _D(t,o);i.push(this.ht(e,a))}),se.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(ki(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push($g(e).j("collectionPathOverlayIndex",a))}),se.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Qo(),s=ki(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return $g(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const d=CD(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Qo();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $g(e).J({index:"collectionGroupOverlayIndex",range:a},(u,d,p)=>{const m=CD(this.serializer,d);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):p.done()}).next(()=>s)}ht(e,t){return $g(e).put(function(i,s,o){const[a,u,d]=yV(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Bg(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function $g(n){return ui(n,"documentOverlays")}class Xc{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Cr(e.integerValue));else if("doubleValue"in e){const r=Cr(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Tg(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=Ra(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Pa(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?aL(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):ut()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),Xe.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function sY(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function wV(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=sY(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}Xc.bt=new Xc;class oY{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=wV(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=wV(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class aY{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class uY{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Hg{constructor(){this.Gt=new oY,this.zt=new aY(this.Gt),this.jt=new uY(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Jc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Jc(this.indexId,this.documentKey,this.arrayValue,r)}}function ju(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=TV(n.arrayValue,e.arrayValue),0!==t?t:(t=TV(n.directionalValue,e.directionalValue),0!==t?t:Xe.comparator(n.documentKey,e.documentKey)))}function TV(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class bV{constructor(e){this.Yt=new Bn((t,r)=>er.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(pt(e.collectionGroup===this.collectionId),this.en)return!1;const t=eD(e);if(void 0!==t&&!this.nn(t))return!1;const r=$c(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.rn(a,u)||!this.sn(this.Zt[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new Bn(er.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Hc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Hc(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Hc(r.field,"asc"===r.dir?0:1)));return new rh(rh.UNKNOWN_ID,this.collectionId,t,ih.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function CV(n){var e,t;if(pt(n instanceof vn||n instanceof kn),n instanceof vn){if(n instanceof vL){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>vn.create(n.field,"==",s)))||[];return kn.create(i,"or")}return n}const r=n.filters.map(i=>CV(i));return kn.create(r,n.op)}function cY(n){if(0===n.getFilters().length)return[];const e=SD(CV(n));return pt(DV(e)),DD(e)||AD(e)?[e]:e.getFilters()}function DD(n){return n instanceof vn}function AD(n){return n instanceof kn&&uD(n)}function DV(n){return DD(n)||AD(n)||function(t){if(t instanceof kn&&aD(t)){for(const r of t.getFilters())if(!DD(r)&&!AD(r))return!1;return!0}return!1}(n)}function SD(n){if(pt(n instanceof vn||n instanceof kn),n instanceof vn)return n;if(1===n.filters.length)return SD(n.filters[0]);const e=n.filters.map(r=>SD(r));let t=kn.create(e,n.op);return t=vE(t),DV(t)?t:(pt(t instanceof kn),pt(ah(t)),pt(t.filters.length>1),t.filters.reduce((r,i)=>RD(r,i)))}function RD(n,e){let t;return pt(n instanceof vn||n instanceof kn),pt(e instanceof vn||e instanceof kn),t=n instanceof vn?e instanceof vn?kn.create([n,e],"and"):AV(n,e):e instanceof vn?AV(e,n):function(i,s){if(pt(i.filters.length>0&&s.filters.length>0),ah(i)&&ah(s))return mL(i,s.getFilters());const o=aD(i)?i:s,a=aD(i)?s:i,u=o.filters.map(d=>RD(d,a));return kn.create(u,"or")}(n,e),vE(t)}function AV(n,e){if(ah(e))return mL(e,n.getFilters());{const t=e.filters.map(r=>RD(n,r));return kn.create(t,"or")}}function vE(n){if(pt(n instanceof vn||n instanceof kn),n instanceof vn)return n;const e=n.getFilters();if(1===e.length)return vE(e[0]);if(pL(n))return n;const t=e.map(i=>vE(i)),r=[];return t.forEach(i=>{i instanceof vn?r.push(i):i instanceof kn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:kn.create(r,n.op)}class lY{constructor(){this._n=new PD}addToCollectionParentIndex(e,t){return this._n.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Fs.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Fs.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class PD{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Bn(yn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Bn(yn.comparator)).toArray()}}const EE=new Uint8Array(0);class dY{constructor(e,t){this.databaseId=t,this.an=new PD,this.un=new xa(r=>qc(r),(r,i)=>Rg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:ki(i)};return SV(e).put(s)}return se.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[VF(t),""],!1,!0);return SV(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Zo(o.parent))}return r})}addFieldIndex(e,t){const r=zg(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=yh(e);return s.next(a=>{o.put(vV(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=zg(e),i=yh(e),s=_h(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=zg(e),r=_h(e),i=yh(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return se.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new bV(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=_h(e);let i=!0;const s=new Map;return se.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Zt();const a=[];return se.forEach(s,(u,d)=>{var ee;Oe("IndexedDbIndexManager",`Using index ${ee=u,`id=${ee.indexId}|cg=${ee.collectionGroup}|f=${ee.fields.map(ge=>`${ge.fieldPath}:${ge.kind}`).join(",")}`} to execute ${qc(t)}`);const p=function(ee,ge){const $e=eD(ge);if(void 0===$e)return null;for(const ct of cE(ee,$e.fieldPath))switch(ct.op){case"array-contains-any":return ct.value.arrayValue.values||[];case"array-contains":return[ct.value]}return null}(d,u),m=function(ee,ge){const $e=new Map;for(const ct of $c(ge))for(const H of cE(ee,ct.fieldPath))switch(H.op){case"==":case"in":$e.set(ct.fieldPath.canonicalString(),H.value);break;case"not-in":case"!=":return $e.set(ct.fieldPath.canonicalString(),H.value),Array.from($e.values())}return null}(d,u),v=function(ee,ge){const $e=[];let ct=!0;for(const H of $c(ge)){const N=0===H.kind?EL(ee,H.fieldPath,ee.startAt):IL(ee,H.fieldPath,ee.startAt);$e.push(N.value),ct&&(ct=N.inclusive)}return new Uu($e,ct)}(d,u),T=function(ee,ge){const $e=[];let ct=!0;for(const H of $c(ge)){const N=0===H.kind?IL(ee,H.fieldPath,ee.endAt):EL(ee,H.fieldPath,ee.endAt);$e.push(N.value),ct&&(ct=N.inclusive)}return new Uu($e,ct)}(d,u),S=this.hn(u,d,v),R=this.hn(u,d,T),M=this.Pn(u,d,m),X=this.In(u.indexId,p,S,v.inclusive,R,T.inclusive,M);return se.forEach(X,j=>r.G(j,t.limit).next(ee=>{ee.forEach(ge=>{const $e=Xe.fromSegments(ge.documentKey);o.has($e)||(o=o.add($e),a.push($e))})}))}).next(()=>a)}return se.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:cY(kn.create(e.filters,"and")).map(r=>lD(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const u=(null!=t?t.length:1)*Math.max(r.length,s.length),d=u/(null!=t?t.length:1),p=[];for(let m=0;m<u;++m){const v=t?this.Tn(t[m/d]):EE,T=this.En(e,v,r[m%d],i),S=this.dn(e,v,s[m%d],o),R=a.map(M=>this.En(e,v,M,!0));p.push(...this.createRange(T,S,R))}return p}En(e,t,r,i){const s=new Jc(e,Xe.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new Jc(e,Xe.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new bV(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return se.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let d=new Bn(er.comparator),p=!1;for(const m of u.filters)for(const v of m.getFlattenedFilters())v.field.isKeyField()||("array-contains"===v.op||"array-contains-any"===v.op?p=!0:d=d.add(v.field));for(const m of u.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(p?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new Hg;for(const i of $c(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);Xc.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new Hg;return Xc.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new Hg;return Xc.bt.Pt(Gc(this.databaseId,t),r.Ht(function(s){const o=$c(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new Hg);let s=0;for(const o of $c(e)){const a=r[s++];for(const u of i)if(this.Vn(t,o.fieldPath)&&Dg(a))i=this.mn(i,o,a);else{const d=u.Ht(o.kind);Xc.bt.Pt(a,d)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Hg;u.seed(a.Wt()),Xc.bt.Pt(o,u.Ht(t.kind)),s.push(u)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof vn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=zg(e),i=yh(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return se.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(p,m){const v=m?new ih(m.sequenceNumber,new Fs(Qc(m.readTime),new Xe(Zo(m.documentKey)),m.largestBatchId)):ih.empty(),T=p.fields.map(([S,R])=>new Hc(er.fromServerFormat(S),R));return new rh(p.indexId,p.collectionGroup,T,v)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Ut(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=zg(e),s=yh(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>se.forEach(a,u=>s.put(vV(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?se.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),se.forEach(a,u=>this.pn(e,i,u).next(d=>{const p=this.yn(s,u);return d.isEqual(p)?se.resolve():this.wn(e,s,u,d,p)}))))})}Sn(e,t,r,i){return _h(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return _h(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=_h(e);let s=new Bn(ju);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new Jc(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new Bn(ju);const i=this.An(t,e);if(null==i)return r;const s=eD(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Dg(o))for(const a of o.arrayValue.values||[])r=r.add(new Jc(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new Jc(t.indexId,e.key,EE,i));return r}wn(e,t,r,i,s){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(u,d,p,m,v){const T=u.getIterator(),S=d.getIterator();let R=sh(T),M=sh(S);for(;R||M;){let X=!1,j=!1;if(R&&M){const ee=p(R,M);ee<0?j=!0:ee>0&&(X=!0)}else null!=R?j=!0:X=!0;X?(m(M),M=sh(S)):j?(v(R),R=sh(T)):(R=sh(T),M=sh(S))}}(i,s,ju,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),se.waitFor(o)}gn(e){let t=1;return yh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>ju(o,a)).filter((o,a,u)=>!a||0!==ju(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=ju(o,e),u=ju(o,t);if(0===a)i[0]=e.Jt();else if(a>0&&u<0)i.push(o),i.push(o.Jt());else if(u>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,EE,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,EE,[]]))}return s}Dn(e,t){return ju(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(RV)}getMinOffset(e,t){return se.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||ut())).next(RV)}}function SV(n){return ui(n,"collectionParents")}function _h(n){return ui(n,"indexEntries")}function zg(n){return ui(n,"indexConfiguration")}function yh(n){return ui(n,"indexState")}function RV(n){pt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;tD(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Fs(e.readTime,e.documentKey,t)}const PV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Li{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Li(e,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function MV(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const u=r.J({range:o},(p,m,v)=>(a++,v.delete()));s.push(u.next(()=>{pt(1===a)}));const d=[];for(const p of t.mutations){const m=ZF(e,p.key.path,t.batchId);s.push(i.delete(m)),d.push(p.key)}return se.waitFor(s).next(()=>d)}function IE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ut();e=n.noDocument}return JSON.stringify(e).length}Li.DEFAULT_COLLECTION_PERCENTILE=10,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Li.DEFAULT=new Li(41943040,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Li.DISABLED=new Li(-1,0,0);class wE{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){pt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new wE(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $u(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=vh(e),o=$u(e);return o.add({}).next(a=>{pt("number"==typeof a);const u=new gD(a,t,r,i),d=function(T,S,R){const M=R.baseMutations.map(j=>Bg(T.ct,j)),X=R.mutations.map(j=>Bg(T.ct,j));return{userId:S,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:M,mutations:X}}(this.serializer,this.userId,u),p=[];let m=new Bn((v,T)=>Ut(v.canonicalString(),T.canonicalString()));for(const v of i){const T=ZF(this.userId,v.key.path,a);m=m.add(v.key.path.popLast()),p.push(o.put(d)),p.push(s.put(T,eQ))}return m.forEach(v=>{p.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),se.waitFor(p).next(()=>u)})}lookupMutationBatch(e,t){return $u(e).get(t).next(r=>r?(pt(r.userId===this.userId),Yc(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?se.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return $u(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(pt(a.batchId>=r),s=Yc(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return $u(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $u(e).U("userMutationsIndex",t).next(r=>r.map(i=>Yc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=tE(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return vh(e).J({range:i},(o,a,u)=>{const[d,p,m]=o,v=Zo(p);if(d===this.userId&&t.path.isEqual(v))return $u(e).get(m).next(T=>{if(!T)throw ut();pt(T.userId===this.userId),s.push(Yc(this.serializer,T))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bn(Ut);const i=[];return t.forEach(s=>{const o=tE(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=vh(e).J({range:a},(d,p,m)=>{const[v,T,S]=d,R=Zo(T);v===this.userId&&s.path.isEqual(R)?r=r.add(S):m.done()});i.push(u)}),se.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=tE(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Bn(Ut);return vh(e).J({range:o},(u,d,p)=>{const[m,v,T]=u,S=Zo(v);m===this.userId&&r.isPrefixOf(S)?S.length===i&&(a=a.add(T)):p.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push($u(e).get(s).next(o=>{if(null===o)throw ut();pt(o.userId===this.userId),r.push(Yc(this.serializer,o))}))}),se.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return MV(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),se.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return vh(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Zo(s[1]);i.push(u)}else a.done()}).next(()=>{pt(0===i.length)})})}containsKey(e,t){return xV(e,this.userId,t)}xn(e){return NV(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xV(n,e,t){const r=tE(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return vh(n).J({range:s,H:!0},(a,u,d)=>{const[p,m,v]=a;p===e&&m===i&&(o=!0),d.done()}).next(()=>o)}function $u(n){return ui(n,"mutations")}function vh(n){return ui(n,"documentMutations")}function NV(n){return ui(n,"mutationQueues")}class el{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new el(0)}static Ln(){return new el(-1)}}class hY{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new el(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>mt.fromTimestamp(new dr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Eh(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(pt(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Eh(e).J((o,a)=>{const u=jg(a);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>se.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Eh(e).J((r,i)=>{const s=jg(i);t(s)})}Bn(e){return OV(e).get("targetGlobalKey").next(t=>(pt(null!==t),t))}kn(e,t){return OV(e).put("targetGlobalKey",t)}qn(e,t){return Eh(e).put(_V(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=qc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Eh(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const d=jg(a);Rg(t,d.target)&&(s=d,u.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Hu(e);return t.forEach(o=>{const a=ki(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),se.waitFor(i)}removeMatchingKeys(e,t,r){const i=Hu(e);return se.forEach(t,s=>{const o=ki(s.path);return se.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Hu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Hu(e);let s=Zt();return i.J({range:r,H:!0},(o,a,u)=>{const d=Zo(o[1]),p=new Xe(d);s=s.add(p)}).next(()=>s)}containsKey(e,t){const r=ki(t.path),i=IDBKeyRange.bound([r],[VF(r)],!1,!0);let s=0;return Hu(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,d)=>{0!==o&&(s++,d.done())}).next(()=>s>0)}ot(e,t){return Eh(e).get(t).next(r=>r?jg(r):null)}}function Eh(n){return ui(n,"targets")}function OV(n){return ui(n,"targetGlobal")}function Hu(n){return ui(n,"targetDocuments")}function kV([n,e],[t,r]){const i=Ut(n,t);return 0===i?Ut(e,r):i}class fY{constructor(e){this.Kn=e,this.buffer=new Bn(kV),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();kV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,he.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Nu(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield xu(r)}yield t.zn(3e5)}))}}class pY{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(Ls.oe);const r=new fY(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(PV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PV):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,u,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),th()<=qo.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-p}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${m} documents in `+(d-u)+`ms\nTotal Duration: ${d-p}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class gY{constructor(e,t){this.db=e,this.garbageCollector=function LV(n,e){return new pY(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return TE(e,r)}removeReference(e,t,r){return TE(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return TE(e,t)}er(e,t){return function(i,s){let o=!1;return NV(i).Y(a=>xV(i,a,s).next(u=>(u&&(o=!0),se.resolve(!u)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const u=this.er(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,mt.min()),Hu(e).delete([0,ki(o.path)])))});i.push(u)}}).next(()=>se.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return TE(e,t)}Xn(e,t){const r=Hu(e);let i,s=Ls.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:d})=>{0===o?(s!==Ls.oe&&t(new Xe(Zo(i)),s),s=d,i=u):s=Ls.oe}).next(()=>{s!==Ls.oe&&t(new Xe(Zo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function TE(n,e){return Hu(n).put((i=n.currentSequenceNumber,{targetId:0,path:ki(e.path),sequenceNumber:i}));var i}class VV{constructor(){this.changes=new xa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mY{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return tl(e).put(r)}removeEntry(e,t,r){return tl(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],_E(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=tr.newInvalidDocument(t);return tl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Gg(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:tr.newInvalidDocument(t)};return tl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Gg(t))},(i,s)=>{r={document:this.nr(t,s),size:IE(s)}}).next(()=>r)}getEntries(e,t){let r=Ts();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=Ts(),i=new Kn(Xe.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,IE(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return se.resolve();let i=new Bn($V);t.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Gg(i.first()),Gg(i.last())),o=i.getIterator();let a=o.getNext();return tl(e).J({index:"documentKeyIndex",range:s},(u,d,p)=>{const m=Xe.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&$V(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?p.$(Gg(a)):p.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),_E(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return tl(e).U(IDBKeyRange.bound(a,u,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let p=Ts();for(const m of d){const v=this.nr(Xe.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);v.isFoundDocument()&&(Mg(t,v)||i.has(v.key))&&(p=p.insert(v.key,v))}return p})}getAllFromCollectionGroup(e,t,r,i){let s=Ts();const o=jV(t,r),a=jV(t,Fs.max());return tl(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,d,p)=>{const m=this.nr(Xe.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(m.key,m),s.size===i&&p.done()}).next(()=>s)}newChangeBuffer(e){return new _Y(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return BV(e).get("remoteDocumentGlobalKey").next(t=>(pt(!!t),t))}tr(e,t){return BV(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function rY(n,e){let t;if(e.document)t=uV(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),i=Qc(e.noDocument.readTime);t=tr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ut();{const r=Xe.fromSegments(e.unknownDocument.path),i=Qc(e.unknownDocument.version);t=tr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new dr(i[0],i[1]);return mt.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(mt.min()))return r}return tr.newInvalidDocument(e)}}function UV(n){return new mY(n)}class _Y extends VV{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new xa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Bn((s,o)=>Ut(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=mV(this.ar.serializer,o);i=i.add(s.path.popLast());const d=IE(u);r+=d-a.size,t.push(this.ar.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=mV(this.ar.serializer,o.convertToNoDocument(mt.min()));t.push(this.ar.addEntry(e,s,u))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function BV(n){return ui(n,"remoteDocumentGlobal")}function tl(n){return ui(n,"remoteDocumentsV14")}function Gg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jV(n,e){const t=e.documentKey.path.toArray();return[n,_E(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function $V(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Ut(t[s],r[s]),i)return i;return i=Ut(t.length,r.length),i||(i=Ut(t[t.length-2],r[r.length-2]),i||Ut(t[t.length-1],r[r.length-1]))}class yY{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class HV{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&kg(r.mutation,i,ws.empty(),dr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Zt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Zt()){const i=Qo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=xg();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Qo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Zt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ts();const o=Ng(),a=Ng();return t.forEach((u,d)=>{const p=r.get(d.key);i.has(d.key)&&(void 0===p||p.mutation instanceof Na)?s=s.insert(d.key,d):void 0!==p?(o.set(d.key,p.mutation.getFieldMask()),kg(p.mutation,d,p.mutation.getFieldMask(),dr.now())):o.set(d.key,ws.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,p)=>o.set(d,p)),t.forEach((d,p)=>{var m;return a.set(d,new yY(p,null!==(m=o.get(d))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Ng();let i=new Kn((o,a)=>o-a),s=Zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=t.get(u);if(null===d)return;let p=r.get(u)||ws.empty();p=a.applyToLocalView(d,p),r.set(u,p);const m=(i.get(a.batchId)||Zt()).add(u);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,p=u.value,m=ML();p.forEach(v=>{if(!s.has(v)){const T=BL(t.get(v),r.get(v));null!==T&&m.set(v,T),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return se.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Xe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):dD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):se.resolve(Qo());let a=-1,u=s;return o.next(d=>se.forEach(d,(p,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(p)?se.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{u=u.insert(p,v)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,Zt())).next(p=>({batchId:a,changes:PL(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xe(t)).next(r=>{let i=xg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=xg();return this.indexManager.getCollectionParents(e,s).next(a=>se.forEach(a,u=>{const d=(m=t,v=u.child(s),new Ma(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,v;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,d)=>{const p=d.getKey();null===o.get(p)&&(o=o.insert(p,tr.newInvalidDocument(p)))});let a=xg();return o.forEach((u,d)=>{const p=s.get(u);void 0!==p&&kg(p.mutation,d,ws.empty(),dr.now()),Mg(t,d)&&(a=a.insert(u,d))}),a})}}class vY{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return se.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:Nr(i.createTime)}),se.resolve();var i}getNamedQuery(e,t){return se.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:bD(i.bundledQuery),readTime:Nr(i.readTime)}),se.resolve();var i}}class EY{constructor(){this.overlays=new Kn(Xe.comparator),this.hr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Qo();return se.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const i=Qo(),s=t.length+1,o=new Xe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return se.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Kn((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let p=s.get(d.largestBatchId);null===p&&(p=Qo(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const a=Qo(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>a.set(d,p)),!(a.size()>=i)););return se.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new _D(t,r));let s=this.hr.get(t);void 0===s&&(s=Zt(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}class MD{constructor(){this.Pr=new Bn(ci.Ir),this.Tr=new Bn(ci.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new ci(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new ci(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new Xe(new yn([])),r=new ci(t,e),i=new ci(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Xe(new yn([])),r=new ci(t,e),i=new ci(t,e+1);let s=Zt();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new ci(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ci{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Xe.comparator(e.key,t.key)||Ut(e.pr,t.pr)}static Er(e,t){return Ut(e.pr,t.pr)||Xe.comparator(e.key,t.key)}}class IY{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Bn(ci.Ir)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++;const o=new gD(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new ci(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return se.resolve(o)}lookupMutationBatch(e,t){return se.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),s=i<0?0:i;return se.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ci(t,0),i=new ci(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),se.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bn(Ut);return t.forEach(i=>{const s=new ci(i,0),o=new ci(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),se.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Xe.isDocumentKey(s)||(s=s.child(""));const o=new ci(new Xe(s),0);let a=new Bn(Ut);return this.wr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.pr)),!0)},o),se.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){pt(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return se.forEach(t.mutations,i=>{const s=new ci(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new ci(t,0),i=this.wr.firstAfterOrEqual(r);return se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return se.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wY{constructor(e){this.vr=e,this.docs=new Kn(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():tr.newInvalidDocument(t))}getEntries(e,t){let r=Ts();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():tr.newInvalidDocument(i))}),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ts();const o=t.path,a=new Xe(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||tD(BF(p),r)<=0||(i.has(p.key)||Mg(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return se.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ut()}Fr(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new TY(this)}getSize(e){return se.resolve(this.size)}}class TY extends VV{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class bY{constructor(e){this.persistence=e,this.Mr=new xa(t=>qc(t),Rg),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.Or=0,this.Nr=new MD,this.targetCount=0,this.Lr=el.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),se.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new el(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.qn(t),se.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),se.waitFor(s).next(()=>i)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),se.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.Nr.containsKey(t))}}class xD{constructor(e,t){this.Br={},this.overlays={},this.kr=new Ls(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new bY(this),this.indexManager=new lY,this.remoteDocumentCache=new wY(r=>this.referenceDelegate.Kr(r)),this.serializer=new gV(t),this.$r=new vY(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new EY,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new IY(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new CY(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return se.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class CY extends $F{constructor(e){super(),this.currentSequenceNumber=e}}class bE{constructor(e){this.persistence=e,this.zr=new MD,this.jr=null}static Hr(e){return new bE(e)}get Jr(){if(this.jr)return this.jr;throw ut()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),se.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Jr,r=>{const i=Xe.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,mt.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return se.or([()=>se.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class DY{constructor(e){this.serializer=e}O(e,t,r,i){const s=new eE("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",WF,{unique:!0}),u.createObjectStore("documentMutations"),zV(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=se.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),zV(e)),o=o.next(()=>function(u){const d=u.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mt.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",p)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,d){return d.store("mutations").U().next(p=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",WF,{unique:!0});const m=d.store("mutations"),v=p.map(T=>m.put(T));return se.waitFor(v)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:hQ});d.createIndex("collectionPathOverlayIndex",fQ,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",pQ,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:tQ});d.createIndex("documentKeyIndex",nQ),d.createIndex("collectionGroupIndex",rQ)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:uQ}).createIndex("sequenceNumberIndex",cQ,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:lQ}).createIndex("documentKeyIndex",dQ,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),o}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=IE(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>se.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>se.forEach(a,u=>{pt(u.userId===s.userId);const d=Yc(this.serializer,u);return MV(e,s.userId,d).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new yn(o),d=[0,ki(u)];s.push(t.get(d).next(p=>p?se.resolve():t.put({targetId:0,path:ki(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>se.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:aQ});const r=t.store("collectionParents"),i=new PD,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:ki(u)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new yn(o);return s(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,u],d)=>{const p=Zo(a);return s(p.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,i)=>{const s=jg(i),o=_V(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),u=(m=o,m.document?new Xe(yn.fromString(m.document.name).popFirst(5)):m.noDocument?Xe.fromSegments(m.noDocument.path):m.unknownDocument?Xe.fromSegments(m.unknownDocument.path):ut()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(d))}).next(()=>se.waitFor(i))}si(e,t){const r=t.store("mutations"),i=UV(this.serializer),s=new xD(bE.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var d;let p=null!==(d=a.get(u.userId))&&void 0!==d?d:Zt();Yc(this.serializer,u).keys().forEach(m=>p=p.add(m)),a.set(u.userId,p)}),se.forEach(a,(u,d)=>{const p=new ai(d),m=yE.lt(this.serializer,p),v=s.getIndexManager(p),T=wE.lt(p,this.serializer,v,s.referenceDelegate);return new HV(i,T,m,v).recalculateAndSaveOverlaysForDocumentKeys(new iD(t,Ls.oe),u).next()})})}}function zV(n){n.createObjectStore("targetDocuments",{keyPath:sQ}).createIndex("documentTargetsIndex",oQ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",iQ,{unique:!0}),n.createObjectStore("targetGlobal")}const ND="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class OD{constructor(e,t,r,i,s,o,a,u,d,p,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=d,this.ai=p,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=v=>Promise.resolve(),!OD.D())throw new Pe(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gY(this,i),this.Ti=t+"main",this.serializer=new gV(u),this.Ei=new Wo(this.Ti,this.ui,new DY(this.serializer)),this.Qr=new hY(this.referenceDelegate,this.serializer),this.remoteDocumentCache=UV(this.serializer),this.$r=new iY,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===p&&xr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(le.FAILED_PRECONDITION,ND);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Ls(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,he.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,he.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,he.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>DE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Nu(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return qg(e).get("owner").next(t=>se.resolve(this.Si(t)))}bi(e){return DE(e).delete(this.clientId)}Di(){var e=this;return(0,he.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ui(r,"clientMetadata");return i.U().next(s=>{const o=e.vi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return se.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?se.resolve(!0):qg(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Pe(le.FAILED_PRECONDITION,ND);return!1}}return!(!this.networkEnabled||!this.inForeground)||DE(e).U().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,he.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new iD(t,Ls.oe);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>DE(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return wE.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new dY(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return yE.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=16===(u=this.ui)?mQ:15===u?XF:14===u?YF:13===u?QF:12===u?gQ:11===u?KF:void ut();var u;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new iD(a,this.kr?this.kr.next():Ls.oe),"readwrite-primary"===t?this.gi(o).next(u=>!!u||this.pi(o)).next(u=>{if(!u)throw xr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Pe(le.FAILED_PRECONDITION,jF);return r(o)}).next(u=>this.wi(o).next(()=>u)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return qg(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(le.FAILED_PRECONDITION,ND)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qg(e).put("owner",t)}static D(){return Wo.D()}yi(e){const t=qg(e);return t.get("owner").next(r=>this.Si(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(xr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Yt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return xr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){xr("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function qg(n){return ui(n,"owner")}function DE(n){return ui(n,"clientMetadata")}function kD(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class FD{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=Zt(),i=Zt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new FD(e,t.fromCache,r,i)}}class AY{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class GV{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,Yt.G6)()?8:HF((0,Yt.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new AY;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(th()<=qo.in.DEBUG&&Oe("QueryEngine","SDK will not create cache indexes for query:",lh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),se.resolve()):(th()<=qo.in.DEBUG&&Oe("QueryEngine","Query:",lh(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(th()<=qo.in.DEBUG&&Oe("QueryEngine","The SDK decides to create cache indexes for query:",lh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fi(t))):se.resolve())}ji(e,t){if(TL(t))return se.resolve(null);let r=Fi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=lE(t,null,"F"),r=Fi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Zt(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Zi(t,a);return this.Xi(t,d,o,u.readTime)?this.ji(e,lE(t,null,"F")):this.es(e,d,t,u)}))})))}Hi(e,t,r,i){return TL(t)||i.isEqual(mt.min())?se.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?se.resolve(null):(th()<=qo.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),lh(t)),this.es(e,o,t,UF(i,-1)).next(a=>a))})}Zi(e,t){let r=new Bn(SL(e));return t.forEach((i,s)=>{Mg(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return th()<=qo.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",lh(t)),this.zi.getDocumentsMatchingQuery(e,t,Fs.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class SY{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new Kn(Ut),this.rs=new xa(s=>qc(s),Rg),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HV(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function qV(n,e,t,r){return new SY(n,e,t,r)}function WV(n,e){return LD.apply(this,arguments)}function LD(){return(LD=(0,he.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Zt();for(const d of i){o.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of s){a.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return t.localDocuments.getDocuments(r,u).next(d=>({us:d,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function ZV(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function KV(n,e,t){let r=Zt(),i=Zt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ts();return t.forEach((a,u)=>{const d=s.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(mt.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):Oe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{cs:o,ls:i}})}function MY(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ih(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,se.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new Oa(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function wh(n,e,t){return VD.apply(this,arguments)}function VD(){return(VD=(0,he.Z)(function*(n,e,t){const r=Ke(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Nu(o))throw o;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})).apply(this,arguments)}function AE(n,e,t){const r=Ke(n);let i=mt.min(),s=Zt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,p){const m=Ke(u),v=m.rs.get(p);return void 0!==v?se.resolve(m.ns.get(v)):m.Qr.getTargetData(d,p)}(r,o,Fi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:mt.min(),t?s:Zt())).next(a=>(XV(r,AL(e),a),{documents:a,hs:s})))}function QV(n,e){const t=Ke(n),r=Ke(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function YV(n,e){const t=Ke(n),r=t.ss.get(e)||mt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,UF(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(XV(t,e,i),i))}function XV(n,e,t){let r=n.ss.get(e)||mt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function UD(){return(UD=(0,he.Z)(function*(n,e,t,r){const i=Ke(n);let s=Zt(),o=Ts();for(const d of t){const p=e.Ps(d.metadata.name);d.document&&(s=s.add(p));const m=e.Is(d);m.setReadTime(e.Ts(d.metadata.readTime)),o=o.insert(p,m)}const a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield Ih(i,(p=r,Fi(uh(yn.fromString(`__bundle__/docs/${p}`)))));var p;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>KV(d,a,o).next(p=>(a.apply(d),p)).next(p=>i.Qr.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.Qr.addMatchingKeys(d,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,p.cs,p.ls)).next(()=>p.cs)))})).apply(this,arguments)}function NY(n,e){return BD.apply(this,arguments)}function BD(){return(BD=(0,he.Z)(function*(n,e,t=Zt()){const r=yield Ih(n,Fi(bD(e.bundledQuery))),i=Ke(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Nr(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(Yr.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})})).apply(this,arguments)}function JV(n,e){return`firestore_clients_${n}_${e}`}function e2(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function jD(n,e){return`firestore_targets_${n}_${e}`}class SE{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Pe(i.error.code,i.error.message))),o?new SE(e,t,i.state,s):(xr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Pe(r.error.code,r.error.message))),s?new Wg(e,r.state,i):(xr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class RE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=fD();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=GF(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new RE(e,s):(xr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class $D{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new $D(t.clientId,t.onlineState):(xr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class HD{constructor(){this.activeTargetIds=fD()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zD{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Kn(Ut),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=JV(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new HD),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,he.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Vs)continue;const s=e.getItem(JV(e.persistenceKey,i));if(s){const o=RE.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(jD(this.persistenceKey,e));if(r){const i=Wg.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jD(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void xr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,he.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(o){let a=Ls.oe;if(null!=o)try{const u=JSON.parse(o);pt("number"==typeof u),a=u}catch(u){xr("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Ls.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Ys(s)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new SE(this.currentUser,e,t,r),s=e2(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const t=e2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=jD(this.persistenceKey,e),s=new Wg(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return RE.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return SE.Es(new ai(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return Wg.Es(i,t)}xs(e){return $D.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,he.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=fD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class t2{constructor(){this.no=new HD,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new HD,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class OY{io(e){}shutdown(){}}class n2{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let PE=null;function GD(){return null===PE?PE=268435456+Math.round(2147483648*Math.random()):PE++,"0x"+PE.toString(16)}const kY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FY{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const Vi="WebChannelConnection";class LY extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,o){const a=GD(),u=this.vo(t,r.toUriEncodedString());Oe("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(d,s,o),this.Mo(t,u,d,i).then(p=>(Oe("RestConnection",`Received RPC '${t}' ${a}: `,p),p),p=>{throw Is("RestConnection",`RPC '${t}' ${a} failed with error: `,p,"url: ",u,"request:",i),p})}xo(t,r,i,s,o,a){return this.Co(t,r,i,s,o)}Fo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+eh,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}vo(t,r){return`${this.wo}/v1/${r}:${kY[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){const s=GD();return new Promise((o,a)=>{const u=new SF;u.setWithCredentials(!0),u.listenOnce(PF.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Jv.NO_ERROR:const p=u.getResponseJson();Oe(Vi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case Jv.TIMEOUT:Oe(Vi,`RPC '${e}' ${s} timed out`),a(new Pe(le.DEADLINE_EXCEEDED,"Request time out"));break;case Jv.HTTP_ERROR:const m=u.getStatus();if(Oe(Vi,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const T=v?.error;if(T&&T.status&&T.message){const S=function(M){const X=M.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(X)>=0?X:le.UNKNOWN}(T.status);a(new Pe(S,T.message))}else a(new Pe(le.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Pe(le.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Oe(Vi,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);Oe(Vi,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}Oo(e,t,r){const i=GD(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=NF(),a=xF(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.xmlHttpFactory=new RF({})),this.Fo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const p=s.join("");Oe(Vi,`Creating RPC '${e}' stream ${i}: ${p}`,u);const m=o.createWebChannel(p,u);let v=!1,T=!1;const S=new FY({lo:M=>{T?Oe(Vi,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(v||(Oe(Vi,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),Oe(Vi,`RPC '${e}' stream ${i} sending:`,M),m.send(M))},ho:()=>m.close()}),R=(M,X,j)=>{M.listen(X,ee=>{try{j(ee)}catch(ge){setTimeout(()=>{throw ge},0)}})};return R(m,vg.EventType.OPEN,()=>{T||(Oe(Vi,`RPC '${e}' stream ${i} transport opened.`),S.mo())}),R(m,vg.EventType.CLOSE,()=>{T||(T=!0,Oe(Vi,`RPC '${e}' stream ${i} transport closed`),S.po())}),R(m,vg.EventType.ERROR,M=>{T||(T=!0,Is(Vi,`RPC '${e}' stream ${i} transport errored:`,M),S.po(new Pe(le.UNAVAILABLE,"The operation could not be completed")))}),R(m,vg.EventType.MESSAGE,M=>{var X;if(!T){const j=M.data[0];pt(!!j);const ge=j.error||(null===(X=j[0])||void 0===X?void 0:X.error);if(ge){Oe(Vi,`RPC '${e}' stream ${i} received error:`,ge);const $e=ge.status;let ct=function(U){const Q=Br[U];if(void 0!==Q)return WL(Q)}($e),H=ge.message;void 0===ct&&(ct=le.INTERNAL,H="Unknown error status: "+$e+" with message "+ge.message),T=!0,S.po(new Pe(ct,H)),m.close()}else Oe(Vi,`RPC '${e}' stream ${i} received:`,j),S.yo(j)}}),R(a,MF.STAT_EVENT,M=>{M.stat===XC.PROXY?Oe(Vi,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===XC.NOPROXY&&Oe(Vi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.fo()},0),S}}function r2(){return typeof window<"u"?window:null}function ME(){return typeof document<"u"?document:null}function Zg(n){return new WQ(n,!0)}class qD{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class i2{constructor(e,t,r,i,s,o,a,u){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new qD(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,he.Z)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,he.Z)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,he.Z)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(xr(t.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{const i=new Pe(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){var e=this;this.state=5,this.Yo.$o((0,he.Z)(function*(){e.state=0,e.start()}))}c_(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VY extends i2{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function QQ(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:ut(),i=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(pt(void 0===p||"string"==typeof p),Yr.fromBase64String(p||"")):(pt(void 0===p||p instanceof Buffer||p instanceof Uint8Array),Yr.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const p=void 0===d.code?le.UNKNOWN:WL(d.code);return new Pe(p,d.message||"")}(o);t=new XL(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Yo(n,r.document.name),s=Nr(r.document.updateTime),o=r.document.createTime?Nr(r.document.createTime):mt.min(),a=new yi({mapValue:{fields:r.document.fields}}),u=tr.newFoundDocument(i,s,o,a);t=new gE(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Yo(n,r.document),s=r.readTime?Nr(r.readTime):mt.min(),o=tr.newNoDocument(i,s);t=new gE([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Yo(n,r.document);t=new gE([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ut();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new jQ(i,s);t=new YL(r.targetId,o)}}var d;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return mt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?mt.min():o.readTime?Nr(o.readTime):mt.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=wD(this.serializer),t.addTarget=function(s,o){let a;const u=o.target;if(a=uE(u)?{documents:cV(s,u)}:{query:mE(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=nV(s,o.resumeToken);const d=vD(s,o.expectedCount);null!==d&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(mt.min())>0){a.readTime=gh(s,o.snapshotVersion.toTimestamp());const d=vD(s,o.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function XQ(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ut()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=wD(this.serializer),t.removeTarget=e,this.i_(t)}}class UY extends i2{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function YQ(n,e){return n&&n.length>0?(pt(void 0!==e),n.map(t=>function(i,s){let o=Nr(i.updateTime?i.updateTime:s);return o.isEqual(mt.min())&&(o=Nr(s)),new VQ(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Nr(e.commitTime);return this.listener.A_(r,t)}return pt(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=wD(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Bg(this.serializer,r))};this.i_(t)}}class BY extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Pe(le.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,ID(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Pe(le.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,ID(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(le.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class jY{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(xr(t),this.y_=!1):Oe("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class $Y{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{r.enqueueAndForget((0,he.Z)(function*(){var u;zu(o)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,he.Z)(function*(p){const m=Ke(p);m.M_.add(4),yield Th(m),m.N_.set("Unknown"),m.M_.delete(4),yield Kg(m)}),function d(p){return u.apply(this,arguments)})(o))}))}),this.N_=new jY(r,i)}}function Kg(n){return WD.apply(this,arguments)}function WD(){return(WD=(0,he.Z)(function*(n){if(zu(n))for(const e of n.x_)yield e(!0)})).apply(this,arguments)}function Th(n){return ZD.apply(this,arguments)}function ZD(){return(ZD=(0,he.Z)(function*(n){for(const e of n.x_)yield e(!1)})).apply(this,arguments)}function xE(n,e){const t=Ke(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),YD(t)?QD(t):Dh(t).Xo()&&KD(t,e))}function bh(n,e){const t=Ke(n),r=Dh(t);t.F_.delete(e),r.Xo()&&s2(t,e),0===t.F_.size&&(r.Xo()?r.n_():zu(t)&&t.N_.set("Unknown"))}function KD(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(mt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Dh(n).P_(e)}function s2(n,e){n.L_.xe(e),Dh(n).I_(e)}function QD(n){n.L_=new HQ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Dh(n).start(),n.N_.w_()}function YD(n){return zu(n)&&!Dh(n).Zo()&&n.F_.size>0}function zu(n){return 0===Ke(n).M_.size}function o2(n){n.L_=void 0}function HY(n){return XD.apply(this,arguments)}function XD(){return(XD=(0,he.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function zY(n){return JD.apply(this,arguments)}function JD(){return(JD=(0,he.Z)(function*(n){n.F_.forEach((e,t)=>{KD(n,e)})})).apply(this,arguments)}function GY(n,e){return e0.apply(this,arguments)}function e0(){return(e0=(0,he.Z)(function*(n,e){o2(n),YD(n)?(n.N_.D_(e),QD(n)):n.N_.set("Unknown")})).apply(this,arguments)}function qY(n,e,t){return t0.apply(this,arguments)}function t0(){return t0=(0,he.Z)(function*(n,e,t){if(n.N_.set("Online"),e instanceof XL&&2===e.state&&e.cause)try{yield(r=(0,he.Z)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.F_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.F_.delete(u),s.L_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield NE(n,r)}else if(e instanceof gE?n.L_.Ke(e):e instanceof YL?n.L_.He(e):n.L_.We(e),!t.isEqual(mt.min()))try{const r=yield ZV(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=s.F_.get(d);p&&s.F_.set(d,p.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const p=s.F_.get(u);if(!p)return;s.F_.set(u,p.withResumeToken(Yr.EMPTY_BYTE_STRING,p.snapshotVersion)),s2(s,u);const m=new Oa(p.target,u,d,p.sequenceNumber);KD(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield NE(n,r)}var r}),t0.apply(this,arguments)}function NE(n,e,t){return n0.apply(this,arguments)}function n0(){return(n0=(0,he.Z)(function*(n,e,t){if(!Nu(e))throw e;n.M_.add(1),yield Th(n),n.N_.set("Offline"),t||(t=()=>ZV(n.localStore)),n.asyncQueue.enqueueRetryable((0,he.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield Kg(n)}))})).apply(this,arguments)}function a2(n,e){return e().catch(t=>NE(n,t,e))}function Ch(n){return r0.apply(this,arguments)}function r0(){return(r0=(0,he.Z)(function*(n){const e=Ke(n),t=Gu(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;WY(e);)try{const i=yield MY(e.localStore,r);if(null===i){0===e.v_.length&&t.n_();break}r=i.batchId,ZY(e,i)}catch(i){yield NE(e,i)}u2(e)&&c2(e)})).apply(this,arguments)}function WY(n){return zu(n)&&n.v_.length<10}function ZY(n,e){n.v_.push(e);const t=Gu(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function u2(n){return zu(n)&&!Gu(n).Zo()&&n.v_.length>0}function c2(n){Gu(n).start()}function KY(n){return s0.apply(this,arguments)}function s0(){return(s0=(0,he.Z)(function*(n){Gu(n).V_()})).apply(this,arguments)}function QY(n){return o0.apply(this,arguments)}function o0(){return(o0=(0,he.Z)(function*(n){const e=Gu(n);for(const t of n.v_)e.d_(t.mutations)})).apply(this,arguments)}function YY(n,e,t){return a0.apply(this,arguments)}function a0(){return(a0=(0,he.Z)(function*(n,e,t){const r=n.v_.shift(),i=mD.from(r,e,t);yield a2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ch(n)})).apply(this,arguments)}function XY(n,e){return u0.apply(this,arguments)}function u0(){return u0=(0,he.Z)(function*(n,e){var t;e&&Gu(n).E_&&(yield(t=(0,he.Z)(function*(i,s){if(qL(a=s.code)&&a!==le.ABORTED){const o=i.v_.shift();Gu(i).t_(),yield a2(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Ch(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),u2(n)&&c2(n)}),u0.apply(this,arguments)}function l2(n,e){return c0.apply(this,arguments)}function c0(){return(c0=(0,he.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=zu(t);t.M_.add(3),yield Th(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield Kg(t)})).apply(this,arguments)}function l0(n,e){return d0.apply(this,arguments)}function d0(){return(d0=(0,he.Z)(function*(n,e){const t=Ke(n);e?(t.M_.delete(2),yield Kg(t)):e||(t.M_.add(2),yield Th(t),t.N_.set("Unknown"))})).apply(this,arguments)}function Dh(n){return n.B_||(n.B_=function(t,r,i){const s=Ke(t);return s.f_(),new VY(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:HY.bind(null,n),To:zY.bind(null,n),Ao:GY.bind(null,n),h_:qY.bind(null,n)}),n.x_.push(function(){var e=(0,he.Z)(function*(t){t?(n.B_.t_(),YD(n)?QD(n):n.N_.set("Unknown")):(yield n.B_.stop(),o2(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function Gu(n){return n.k_||(n.k_=function(t,r,i){const s=Ke(t);return s.f_(),new UY(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:KY.bind(null,n),Ao:XY.bind(null,n),R_:QY.bind(null,n),A_:YY.bind(null,n)}),n.x_.push(function(){var e=(0,he.Z)(function*(t){t?(n.k_.t_(),yield Ch(n)):(yield n.k_.stop(),n.v_.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class h0{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new h0(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ah(n,e){if(xr("AsyncQueue",`${e}: ${n}`),Nu(n))return new Pe(le.UNAVAILABLE,`${e}: ${n}`);throw n}class Sh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=xg(),this.sortedSet=new Kn(this.comparator)}static emptySet(e){return new Sh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Sh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class d2{constructor(){this.q_=new Kn(Xe.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):ut():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Rh{constructor(e,t,r,i,s,o,a,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Rh(e,t,Sh.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class JY{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class eX{constructor(){this.queries=new xa(e=>DL(e),Pg),this.onlineState="Unknown",this.z_=new Set}}function f0(n,e){return p0.apply(this,arguments)}function p0(){return(p0=(0,he.Z)(function*(n,e){const t=Ke(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new JY,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield t.onListen(i,!0);break;case 1:s.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=Ah(o,`Initialization of query '${lh(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&_0(t)})).apply(this,arguments)}function g0(n,e){return m0.apply(this,arguments)}function m0(){return(m0=(0,he.Z)(function*(n,e){const t=Ke(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),0===s.U_.length?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function tX(n,e){const t=Ke(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&_0(t)}function nX(n,e,t){const r=Ke(n),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(t);r.queries.delete(e)}function _0(n){n.z_.forEach(e=>{e.next()})}var y0,h2;(h2=y0||(y0={})).J_="default",h2.Cache="cache";class v0{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Rh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=Rh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==y0.Cache}}class rX{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class f2{constructor(e){this.serializer=e}Ps(e){return Yo(this.serializer,e)}Is(e){return e.metadata.exists?uV(this.serializer,e.document,!1):tr.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Nr(e)}}class iX{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=p2(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=yn.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new f2(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||Zt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,he.Z)(function*(){const t=yield function xY(n,e,t,r){return UD.apply(this,arguments)}(e.localStore,new f2(e.serializer),e.documents,e.oa.id),r=e.aa(e.documents);for(const i of e.queries)yield NY(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:t}})()}}function p2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class g2{constructor(e){this.key=e}}class m2{constructor(e){this.key=e}}class _2{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Zt(),this.mutatedKeys=Zt(),this.Ia=SL(e),this.Ta=new Sh(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new d2,i=t?t.Ta:this.Ta;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,m)=>{const v=i.get(p),T=Mg(this.query,m)?m:null,S=!!v&&this.mutatedKeys.has(v.key),R=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let M=!1;v&&T?v.data.isEqual(T.data)?S!==R&&(r.track({type:3,doc:T}),M=!0):this.Ra(v,T)||(r.track({type:2,doc:T}),M=!0,(u&&this.Ia(T,u)>0||d&&this.Ia(T,d)<0)&&(a=!0)):!v&&T?(r.track({type:0,doc:T}),M=!0):v&&!T&&(r.track({type:1,doc:v}),M=!0,(u||d)&&(a=!0)),M&&(T?(o=o.add(T),s=R?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const p="F"===this.query.limitType?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((p,m)=>function(T,S){const R=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return R(T)-R(S)}(p.type,m.type)||this.Ia(p.doc,m.doc)),this.Va(r),i=null!=i&&i;const a=t&&!i?this.ma():[],u=0===this.Pa.size&&this.current&&!i?1:0,d=u!==this.ha;return this.ha=u,0!==o.length||d?{snapshot:new Rh(this.query,e.Ta,s,o,e.mutatedKeys,0===u,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new d2,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Zt(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new m2(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new g2(r))}),t}pa(e){this.la=e.hs,this.Pa=Zt();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Rh.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class sX{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class oX{constructor(e){this.key=e,this.wa=!1}}class aX{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new xa(a=>DL(a),Pg),this.Da=new Map,this.Ca=new Set,this.va=new Kn(Xe.comparator),this.Fa=new Map,this.Ma=new MD,this.xa={},this.Oa=new Map,this.Na=el.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function uX(n,e){return E0.apply(this,arguments)}function E0(){return(E0=(0,he.Z)(function*(n,e,t=!0){const r=OE(n);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield y2(r,e,t,!0),i})).apply(this,arguments)}function cX(n,e){return I0.apply(this,arguments)}function I0(){return(I0=(0,he.Z)(function*(n,e){const t=OE(n);yield y2(t,e,!0,!1)})).apply(this,arguments)}function y2(n,e,t,r){return w0.apply(this,arguments)}function w0(){return(w0=(0,he.Z)(function*(n,e,t,r){const i=yield Ih(n.localStore,Fi(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=yield T0(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&xE(n.remoteStore,i),a})).apply(this,arguments)}function T0(n,e,t,r,i){return b0.apply(this,arguments)}function b0(){return b0=(0,he.Z)(function*(n,e,t,r,i){n.Ba=(m,v,T)=>{return(S=(0,he.Z)(function*(M,X,j,ee){let ge=X.view.da(j);ge.Xi&&(ge=yield AE(M.localStore,X.query,!1).then(({documents:N})=>X.view.da(N,ge)));const $e=ee&&ee.targetChanges.get(X.targetId),ct=ee&&null!=ee.targetMismatches.get(X.targetId),H=X.view.applyChanges(ge,M.isPrimaryClient,$e,ct);return k0(M,X.targetId,H.fa),H.snapshot}),function R(M,X,j,ee){return S.apply(this,arguments)})(n,m,v,T);var S};const s=yield AE(n.localStore,e,!0),o=new _2(e,s.hs),a=o.da(s.documents),u=Vg.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),d=o.applyChanges(a,n.isPrimaryClient,u);k0(n,t,d.fa);const p=new sX(e,t,o);return n.ba.set(e,p),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),d.snapshot}),b0.apply(this,arguments)}function lX(n,e,t){return C0.apply(this,arguments)}function C0(){return(C0=(0,he.Z)(function*(n,e,t){const r=Ke(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Pg(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield wh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&bh(r.remoteStore,i.targetId),Ph(r,i.targetId)}).catch(xu))):(Ph(r,i.targetId),yield wh(r.localStore,i.targetId,!0))})).apply(this,arguments)}function dX(n,e){return D0.apply(this,arguments)}function D0(){return(D0=(0,he.Z)(function*(n,e){const t=Ke(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),bh(t.remoteStore,r.targetId))})).apply(this,arguments)}function A0(){return(A0=(0,he.Z)(function*(n,e,t){const r=q0(n);try{const i=yield function(o,a){const u=Ke(o),d=dr.now(),p=a.reduce((T,S)=>T.add(S.key),Zt());let m,v;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let S=Ts(),R=Zt();return u.os.getEntries(T,p).next(M=>{S=M,S.forEach((X,j)=>{j.isValidDocument()||(R=R.add(X))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,S)).next(M=>{m=M;const X=[];for(const j of a){const ee=BQ(j,m.get(j.key).overlayedDocument);null!=ee&&X.push(new Na(j.key,ee,lL(ee.value.mapValue),hr.exists(!0)))}return u.mutationQueue.addMutationBatch(T,d,X,a)}).next(M=>{v=M;const X=M.applyToLocalDocumentSet(m,R);return u.documentOverlayCache.saveOverlays(T,M.batchId,X)})}).then(()=>({batchId:v.batchId,changes:PL(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let d=o.xa[o.currentUser.toKey()];d||(d=new Kn(Ut)),d=d.insert(a,u),o.xa[o.currentUser.toKey()]=d}(r,i.batchId,t),yield ka(r,i.changes),yield Ch(r.remoteStore)}catch(i){const s=Ah(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function v2(n,e){return S0.apply(this,arguments)}function S0(){return(S0=(0,he.Z)(function*(n,e){const t=Ke(n);try{const r=yield function PY(n,e){const t=Ke(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((p,m)=>{const v=i.get(m);if(!v)return;a.push(t.Qr.removeMatchingKeys(s,p.removedDocuments,m).next(()=>t.Qr.addMatchingKeys(s,p.addedDocuments,m)));let T=v.withSequenceNumber(s.currentSequenceNumber);var R,M,X;null!==e.targetMismatches.get(m)?T=T.withResumeToken(Yr.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):p.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(p.resumeToken,r)),i=i.insert(m,T),M=T,X=p,(0===(R=v).resumeToken.approximateByteSize()||M.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8||X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(s,T))});let u=Ts(),d=Zt();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))}),a.push(KV(s,o,e.documentUpdates).next(p=>{u=p.cs,d=p.ls})),!r.isEqual(mt.min())){const p=t.Qr.getLastRemoteSnapshotVersion(s).next(m=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(p)}return se.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(t.ns=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Fa.get(s);o&&(pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?pt(o.wa):i.removedDocuments.size>0&&(pt(o.wa),o.wa=!1))}),yield ka(t,r,e)}catch(r){yield xu(r)}})).apply(this,arguments)}function E2(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Ke(o);u.onlineState=a;let d=!1;u.queries.forEach((p,m)=>{for(const v of m.U_)v.j_(a)&&(d=!0)}),d&&_0(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function fX(n,e,t){return R0.apply(this,arguments)}function R0(){return(R0=(0,he.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Kn(Xe.comparator);o=o.insert(s,tr.newNoDocument(s,mt.min()));const a=Zt().add(s),u=new Lg(mt.min(),new Map,new Kn(Ut),o,a);yield v2(r,u),r.va=r.va.remove(s),r.Fa.delete(e),F0(r)}else yield wh(r.localStore,e,!1).then(()=>Ph(r,e,t)).catch(xu)})).apply(this,arguments)}function pX(n,e){return P0.apply(this,arguments)}function P0(){return(P0=(0,he.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const i=yield function RY(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,u,d,p){const m=d.batch,v=m.keys();let T=se.resolve();return v.forEach(S=>{T=T.next(()=>p.getEntry(u,S)).next(R=>{const M=d.docVersions.get(S);pt(null!==M),R.version.compareTo(M)<0&&(m.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),p.addEntry(R)))})}),T.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Zt();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);O0(t,r,null),N0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ka(t,i)}catch(i){yield xu(i)}})).apply(this,arguments)}function gX(n,e,t){return M0.apply(this,arguments)}function M0(){return(M0=(0,he.Z)(function*(n,e,t){const r=Ke(n);try{const i=yield function(o,a){const u=Ke(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,a).next(m=>(pt(null!==m),p=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);O0(r,e,t),N0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ka(r,i)}catch(i){yield xu(i)}})).apply(this,arguments)}function x0(){return(x0=(0,he.Z)(function*(n,e){const t=Ke(n);zu(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Ke(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){const i=Ah(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function N0(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function O0(n,e,t){const r=Ke(n);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Ph(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||I2(n,r)})}function I2(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(bh(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),F0(n))}function k0(n,e,t){for(const r of t)r instanceof g2?(n.Ma.addReference(r.key,e),_X(n,r)):r instanceof m2?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||I2(n,r.key)):ut()}function _X(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.Ca.add(r),F0(n))}function F0(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new Xe(yn.fromString(e)),r=n.Na.next();n.Fa.set(r,new oX(t)),n.va=n.va.insert(t,r),xE(n.remoteStore,new Oa(Fi(uh(t.path)),r,"TargetPurposeLimboResolution",Ls.oe))}}function ka(n,e,t){return L0.apply(this,arguments)}function L0(){return L0=(0,he.Z)(function*(n,e,t){const r=Ke(n),i=[],s=[],o=[];var a;r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,e,t).then(d=>{if((d||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,d&&!d.fromCache?"current":"not-current"),d){i.push(d);const p=FD.Ki(u.targetId,d);s.push(p)}}))}),yield Promise.all(o),r.Sa.h_(i),yield(a=(0,he.Z)(function*(d,p){const m=Ke(d);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>se.forEach(p,T=>se.forEach(T.qi,S=>m.persistence.referenceDelegate.addReference(v,T.targetId,S)).next(()=>se.forEach(T.Qi,S=>m.persistence.referenceDelegate.removeReference(v,T.targetId,S)))))}catch(v){if(!Nu(v))throw v;Oe("LocalStore","Failed to update sequence numbers: "+v)}for(const v of p){const T=v.targetId;if(!v.fromCache){const S=m.ns.get(T),M=S.withLastLimboFreeSnapshotVersion(S.snapshotVersion);m.ns=m.ns.insert(T,M)}}}),function u(d,p){return a.apply(this,arguments)})(r.localStore,s))}),L0.apply(this,arguments)}function yX(n,e){return V0.apply(this,arguments)}function V0(){return(V0=(0,he.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield WV(t.localStore,e);t.currentUser=e,(s=t).Oa.forEach(a=>{a.forEach(u=>{u.reject(new Pe(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ka(t,r.us)}var s})).apply(this,arguments)}function vX(n,e){const t=Ke(n),r=t.Fa.get(e);if(r&&r.wa)return Zt().add(r.key);{let i=Zt();const s=t.Da.get(e);if(!s)return i;for(const o of s){const a=t.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function EX(n,e){return U0.apply(this,arguments)}function U0(){return(U0=(0,he.Z)(function*(n,e){const t=Ke(n),r=yield AE(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&k0(t,e.targetId,i.fa),i})).apply(this,arguments)}function IX(n,e){return B0.apply(this,arguments)}function B0(){return(B0=(0,he.Z)(function*(n,e){const t=Ke(n);return YV(t.localStore,e).then(r=>ka(t,r))})).apply(this,arguments)}function wX(n,e,t,r){return j0.apply(this,arguments)}function j0(){return(j0=(0,he.Z)(function*(n,e,t,r){const i=Ke(n),s=yield function(a,u){const d=Ke(a),p=Ke(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",m=>p.vn(m,u).next(v=>v?d.localDocuments.getDocuments(m,v):se.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===t?yield Ch(i.remoteStore):"acknowledged"===t||"rejected"===t?(O0(i,e,r||null),N0(i,e),u=e,Ke(Ke(i.localStore).mutationQueue).Mn(u)):ut(),yield ka(i,s)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function $0(){return($0=(0,he.Z)(function*(n,e){const t=Ke(n);if(OE(t),q0(t),!0===e&&!0!==t.La){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield w2(t,r.toArray());t.La=!0,yield l0(t.remoteStore,!0);for(const s of i)xE(t.remoteStore,s)}else if(!1===e&&!1!==t.La){const r=[];let i=Promise.resolve();t.Da.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Ph(t,o),wh(t.localStore,o,!0))),bh(t.remoteStore,o)}),yield i,yield w2(t,r),function(o){const a=Ke(o);a.Fa.forEach((u,d)=>{bh(a.remoteStore,d)}),a.Ma.mr(),a.Fa=new Map,a.va=new Kn(Xe.comparator)}(t),t.La=!1,yield l0(t.remoteStore,!1)}})).apply(this,arguments)}function w2(n,e,t){return H0.apply(this,arguments)}function H0(){return(H0=(0,he.Z)(function*(n,e,t){const r=Ke(n),i=[],s=[];for(const o of e){let a;const u=r.Da.get(o);if(u&&0!==u.length){a=yield Ih(r.localStore,Fi(u[0]));for(const d of u){const p=r.ba.get(d),m=yield EX(r,p);m.snapshot&&s.push(m.snapshot)}}else{const d=yield QV(r.localStore,o);a=yield Ih(r.localStore,d),yield T0(r,T2(d),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i})).apply(this,arguments)}function T2(n){return wL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function bX(n){return t=Ke(n).localStore,Ke(Ke(t).persistence).Bi();var t}function CX(n,e,t,r){return z0.apply(this,arguments)}function z0(){return(z0=(0,he.Z)(function*(n,e,t,r){const i=Ke(n);if(i.La)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield YV(i.localStore,AL(s[0])),a=Lg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Yr.EMPTY_BYTE_STRING);yield ka(i,o,a);break}case"rejected":yield wh(i.localStore,e,!0),Ph(i,e,r);break;default:ut()}})).apply(this,arguments)}function DX(n,e,t){return G0.apply(this,arguments)}function G0(){return(G0=(0,he.Z)(function*(n,e,t){const r=OE(n);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Oe("SyncEngine","Adding an already active target "+i);continue}const s=yield QV(r.localStore,i),o=yield Ih(r.localStore,s);yield T0(r,T2(s),o.targetId,!1,o.resumeToken),xE(r.remoteStore,o)}for(const i of t)r.Da.has(i)&&(yield wh(r.localStore,i,!1).then(()=>{bh(r.remoteStore,i),Ph(r,i)}).catch(xu))}})).apply(this,arguments)}function OE(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=v2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fX.bind(null,e),e.Sa.h_=tX.bind(null,e.eventManager),e.Sa.ka=nX.bind(null,e.eventManager),e}function q0(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gX.bind(null,e),e}class Qg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,he.Z)(function*(){t.serializer=Zg(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return qV(this.persistence,new GV,e.initialUser,this.serializer)}createPersistence(e){return new xD(bE.Hr,this.serializer)}createSharedClientState(e){return new t2}terminate(){var e=this;return(0,he.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class W0 extends Qg{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,he.Z)(function*(){yield t().call(r,e),yield r.Qa.initialize(r,e),yield q0(r.Qa.syncEngine),yield Ch(r.Qa.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return qV(this.persistence,new GV,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new FV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new XK(t,this.persistence);return new YK(e.asyncQueue,r)}createPersistence(e){const t=kD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Li.withCacheSize(this.cacheSizeBytes):Li.DEFAULT;return new OD(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,r2(),ME(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new t2}}class b2 extends W0{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,he.Z)(function*(){yield t().call(r,e);const i=r.Qa.syncEngine;r.sharedClientState instanceof zD&&(r.sharedClientState.syncEngine={Zs:wX.bind(null,i),Xs:CX.bind(null,i),eo:DX.bind(null,i),Bi:bX.bind(null,i),Ys:IX.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,he.Z)(function*(o){yield function TX(n,e){return $0.apply(this,arguments)}(r.Qa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=r2();if(!zD.D(t))throw new Pe(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=kD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zD(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Mh{initialize(e,t){var r=this;return(0,he.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>E2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=yX.bind(null,r.syncEngine),yield l0(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new eX}createDatastore(e){const t=Zg(e.databaseInfo.databaseId),r=new LY(e.databaseInfo);return new BY(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>E2(this.syncEngine,t,0),a=n2.D()?new n2:new OY,new $Y(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,u,d,p){const m=new aX(i,s,o,a,u,d);return p&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,he.Z)(function*(){var t,r;yield(r=(0,he.Z)(function*(s){const o=Ke(s);Oe("RemoteStore","RemoteStore shutting down."),o.M_.add(5),yield Th(o),o.O_.shutdown(),o.N_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function C2(n,e=10240){let t=0;return{read:()=>(0,he.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,he.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class kE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class RX{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Qr,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,he.Z)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,he.Z)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,he.Z)(function*(){const t=yield e.za();if(null===t)return null;const r=e.Wa.decode(t),i=Number(r);isNaN(i)&&e.ja(`length string (${r}) is not valid number`);const s=yield e.Ha(i);return new rX(JSON.parse(s),t.length+i)})()}Ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}za(){var e=this;return(0,he.Z)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const t=e.Ja();t<0&&e.ja("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ha(e){var t=this;return(0,he.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ya())&&t.ja("Reached the end of bundle when more is expected.");const r=t.Wa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,he.Z)(function*(){const t=yield e.Ua.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class PX{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,he.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Pe(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,he.Z)(function*(o,a){const u=Ke(o),d={documents:a.map(T=>Ug(u.serializer,T))},p=yield u.xo("BatchGetDocuments",u.serializer.databaseId,yn.emptyPath(),d,a.length),m=new Map;p.forEach(T=>{const S=function KQ(n,e){return"found"in e?function(r,i){pt(!!i.found);const s=Yo(r,i.found.name),o=Nr(i.found.updateTime),a=i.found.createTime?Nr(i.found.createTime):mt.min(),u=new yi({mapValue:{fields:i.found.fields}});return tr.newFoundDocument(s,o,a,u)}(n,e):"missing"in e?function(r,i){pt(!!i.missing),pt(!!i.readTime);const s=Yo(r,i.missing),o=Nr(i.readTime);return tr.newNoDocument(s,o)}(n,e):ut()}(u.serializer,T);m.set(S.key.toString(),S)});const v=[];return a.forEach(T=>{const S=m.get(T.toString());pt(!!S),v.push(S)}),v}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ph(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,he.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Xe.fromPath(i);e.mutations.push(new pD(s,e.precondition(s)))}),yield(r=(0,he.Z)(function*(s,o){const a=Ke(s),u={writes:o.map(d=>Bg(a.serializer,d))};yield a.Co("Commit",a.serializer.databaseId,yn.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ut();t=mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(mt.min())?hr.exists(!1):hr.updateTime(t):hr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mt.min()))throw new Pe(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hr.updateTime(t)}return hr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class MX{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new qD(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,he.Z)(function*(){const t=new PX(e.datastore),r=e.tu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.nu(s)}))}).catch(i=>{e.nu(i)})}))}tu(e){try{const t=this.updateFunction(e);return!wg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!qL(t)}return!1}}class xX{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ai.UNAUTHENTICATED,this.clientId=LF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,he.Z)(function*(a){Oe("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(Oe("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Ah(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function FE(n,e){return Z0.apply(this,arguments)}function Z0(){return Z0=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,he.Z)(function*(s){r.isEqual(s)||(yield WV(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Z0.apply(this,arguments)}function K0(n,e){return Q0.apply(this,arguments)}function Q0(){return(Q0=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Y0(n);Oe("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>l2(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>l2(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function D2(n){return"FirebaseError"===n.name?n.code===le.FAILED_PRECONDITION||n.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function Y0(n){return X0.apply(this,arguments)}function X0(){return(X0=(0,he.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Oe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield FE(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!D2(t))throw t;Is("Error using user provided cache. Falling back to memory cache: "+t),yield FE(n,new Qg)}}else Oe("FirestoreClient","Using default OfflineComponentProvider"),yield FE(n,new Qg);return n._offlineComponents})).apply(this,arguments)}function LE(n){return J0.apply(this,arguments)}function J0(){return(J0=(0,he.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Oe("FirestoreClient","Using user provided OnlineComponentProvider"),yield K0(n,n._uninitializedComponentsProvider._online)):(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield K0(n,new Mh))),n._onlineComponents})).apply(this,arguments)}function A2(n){return Y0(n).then(e=>e.persistence)}function xh(n){return Y0(n).then(e=>e.localStore)}function S2(n){return LE(n).then(e=>e.remoteStore)}function eA(n){return LE(n).then(e=>e.syncEngine)}function Nh(n){return tA.apply(this,arguments)}function tA(){return(tA=(0,he.Z)(function*(n){const e=yield LE(n),t=e.eventManager;return t.onListen=uX.bind(null,e.syncEngine),t.onUnlisten=lX.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=cX.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=dX.bind(null,e.syncEngine),t})).apply(this,arguments)}function P2(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(s,o,a,u,d){const p=new kE({next:v=>{o.enqueueAndForget(()=>g0(s,m));const T=v.docs.has(a);!T&&v.fromCache?d.reject(new Pe(le.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&v.fromCache&&u&&"server"===u.source?d.reject(new Pe(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new v0(uh(a.path),p,{includeMetadataChanges:!0,ra:!0});return f0(s,m)}(yield Nh(n),n.asyncQueue,e,t,r)})),r.promise}function M2(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(s,o,a,u,d){const p=new kE({next:v=>{o.enqueueAndForget(()=>g0(s,m)),v.fromCache&&"server"===u.source?d.reject(new Pe(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new v0(a,p,{includeMetadataChanges:!0,ra:!0});return f0(s,m)}(yield Nh(n),n.asyncQueue,e,t,r)})),r.promise}function x2(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const N2=new Map;function nA(n,e,t){if(!t)throw new Pe(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function O2(n,e,t,r){if(!0===e&&!0===r)throw new Pe(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function k2(n){if(!Xe.isDocumentKey(n))throw new Pe(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function F2(n){if(Xe.isDocumentKey(n))throw new Pe(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function VE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":ut()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=VE(n);throw new Pe(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function L2(n,e){if(e<=0)throw new Pe(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class V2{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}O2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=x2(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Pe(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Pe(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Pe(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yg{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new V2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Pe(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new V2(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new UK;switch(r.type){case"firstParty":return new HK(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Pe(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=N2.get(t);r&&(Oe("ComponentProvider","Removing Datastore"),N2.delete(t),r.terminate())}(this),Promise.resolve()}}class vi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vi(this.firestore,e,this._query)}}class nr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nr(this.firestore,e,this._key)}}class Xo extends vi{constructor(e,t,r){super(e,t,uh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nr(this.firestore,null,new Xe(e))}withConverter(e){return new Xo(this.firestore,e,this._path)}}function B2(n,e,...t){if(n=(0,Yt.m9)(n),nA("collection","path",e),n instanceof Yg){const r=yn.fromString(e,...t);return F2(r),new Xo(n,null,r)}{if(!(n instanceof nr||n instanceof Xo))throw new Pe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yn.fromString(e,...t));return F2(r),new Xo(n.firestore,null,r)}}function UE(n,e,...t){if(n=(0,Yt.m9)(n),1===arguments.length&&(e=LF.newId()),nA("doc","path",e),n instanceof Yg){const r=yn.fromString(e,...t);return k2(r),new nr(n,null,new Xe(r))}{if(!(n instanceof nr||n instanceof Xo))throw new Pe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yn.fromString(e,...t));return k2(r),new nr(n.firestore,n instanceof Xo?n.converter:null,new Xe(r))}}function j2(n,e){return n=(0,Yt.m9)(n),e=(0,Yt.m9)(e),(n instanceof nr||n instanceof Xo)&&(e instanceof nr||e instanceof Xo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function rA(n,e){return n=(0,Yt.m9)(n),e=(0,Yt.m9)(e),n instanceof vi&&e instanceof vi&&n.firestore===e.firestore&&Pg(n._query,e._query)&&n.converter===e.converter}class GX{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new qD(this,"async_queue_retry"),this.hu=()=>{const t=ME();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=ME();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=ME();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new Qr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,he.Z)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!Nu(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,xr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=h0.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&ut()}verifyOperationInProgress(){}du(){var e=this;return(0,he.Z)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function iA(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class qX{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class jn extends Yg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new GX,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||$2(this),this._firestoreClient.terminate()}}function fr(n){return n._firestoreClient||$2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function $2(n){var e,t,r;const i=n._freezeSettings(),s=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new vQ(n._databaseId,u,n._persistenceKey,(p=i).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,x2(p.experimentalLongPollingOptions),p.useFetchStreams));var u,p;n._firestoreClient=new xX(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function H2(n,e,t){const r=new Qr;return n.asyncQueue.enqueue((0,he.Z)(function*(){try{yield FE(n,t),yield K0(n,e),r.resolve()}catch(i){const s=i;if(!D2(s))throw s;Is("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function z2(n){if(n._initialized||n._terminated)throw new Pe(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Jo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jo(Yr.fromBase64String(e))}catch(t){throw new Pe(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jo(Yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Fa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class nl{constructor(e){this._methodName=e}}class BE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}const rJ=/^__.*__$/;class iJ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Na(e,this.data,this.fieldMask,t,this.fieldTransforms):new fh(e,this.data,t,this.fieldTransforms)}}class G2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Na(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function q2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class jE{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new jE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return zE(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(q2(this.fu)&&rJ.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class sJ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Zg(e)}Fu(e,t,r,i=!1){return new jE({fu:e,methodName:t,vu:r,path:er.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rl(n){const e=n._freezeSettings(),t=Zg(n._databaseId);return new sJ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $E(n,e,t,r,i,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);dA("Data must be an object, but it was:",o,r);const a=K2(r,o);let u,d;if(s.merge)u=new ws(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const v=em(e,m,t);if(!o.contains(v))throw new Pe(le.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);Y2(p,v)||p.push(v)}u=new ws(p),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new iJ(new yi(a),u,d)}class Jg extends nl{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jg}}function W2(n,e,t){return new jE({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class sA extends nl{_toFieldTransform(e){return new Og(e.path,new dh)}isEqual(e){return e instanceof sA}}class oA extends nl{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=W2(this,e,!0),r=this.Mu.map(s=>il(s,t)),i=new Wc(r);return new Og(e.path,i)}isEqual(e){return e instanceof oA&&(0,Yt.vZ)(this.Mu,e.Mu)}}class aA extends nl{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=W2(this,e,!0),r=this.Mu.map(s=>il(s,t)),i=new Zc(r);return new Og(e.path,i)}isEqual(e){return e instanceof aA&&(0,Yt.vZ)(this.Mu,e.Mu)}}class uA extends nl{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new hh(e.serializer,OL(e.serializer,this.xu));return new Og(e.path,t)}isEqual(e){return e instanceof uA&&this.xu===e.xu}}function cA(n,e,t,r){const i=n.Fu(1,e,t);dA("Data must be an object, but it was:",i,r);const s=[],o=yi.empty();Ou(r,(u,d)=>{const p=HE(e,u,t);d=(0,Yt.m9)(d);const m=i.Su(p);if(d instanceof Jg)s.push(p);else{const v=il(d,m);null!=v&&(s.push(p),o.set(p,v))}});const a=new ws(s);return new G2(o,a,i.fieldTransforms)}function lA(n,e,t,r,i,s){const o=n.Fu(1,e,t),a=[em(e,r,t)],u=[i];if(s.length%2!=0)throw new Pe(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)a.push(em(e,s[v])),u.push(s[v+1]);const d=[],p=yi.empty();for(let v=a.length-1;v>=0;--v)if(!Y2(d,a[v])){const T=a[v];let S=u[v];S=(0,Yt.m9)(S);const R=o.Su(T);if(S instanceof Jg)d.push(T);else{const M=il(S,R);null!=M&&(d.push(T),p.set(T,M))}}const m=new ws(d);return new G2(p,m,o.fieldTransforms)}function Z2(n,e,t,r=!1){return il(t,n.Fu(r?4:3,e))}function il(n,e){if(Q2(n=(0,Yt.m9)(n)))return dA("Unsupported field value:",e,n),K2(n,e);if(n instanceof nl)return function(r,i){if(!q2(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=il(a,i.bu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,Yt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return OL(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=dr.fromDate(r);return{timestampValue:gh(i.serializer,s)}}if(r instanceof dr){const s=new dr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gh(i.serializer,s)}}if(r instanceof BE)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jo)return{bytesValue:nV(i.serializer,r._byteString)};if(r instanceof nr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ED(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${VE(r)}`)}(n,e)}function K2(n,e){const t={};return tL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ou(n,(r,i)=>{const s=il(i,e.pu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function Q2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof dr||n instanceof BE||n instanceof Jo||n instanceof nr||n instanceof nl)}function dA(n,e,t){if(!Q2(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=VE(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var i}function em(n,e,t){if((e=(0,Yt.m9)(e))instanceof Fa)return e._internalPath;if("string"==typeof e)return HE(n,e);throw zE("Field path arguments must be of type string or ",n,!1,void 0,t)}const oJ=new RegExp("[~\\*/\\[\\]]");function HE(n,e,t){if(e.search(oJ)>=0)throw zE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fa(...e.split("."))._internalPath}catch{throw zE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zE(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Pe(le.INVALID_ARGUMENT,a+n+u)}function Y2(n,e){return n.some(t=>t.isEqual(e))}class tm{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new nr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new aJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(GE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class aJ extends tm{data(){return super.data()}}function GE(n,e){return"string"==typeof e?HE(n,e):e instanceof Fa?e._internalPath:e._delegate._internalPath}function X2(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hA{}class nm extends hA{}function qu(n,e,...t){let r=[];e instanceof hA&&r.push(e),r=r.concat(t),function(s){const o=s.filter(u=>u instanceof Oh).length,a=s.filter(u=>u instanceof rm).length;if(o>1||o>0&&a>0)throw new Pe(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class rm extends nm{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new rm(e,t,r)}_apply(e){const t=this._parse(e);return nU(e._query,t),new vi(e.firestore,e.converter,hD(e._query,t))}_parse(e){const t=rl(e.firestore);return function(s,o,a,u,d,p,m){let v;if(d.isKeyField()){if("array-contains"===p||"array-contains-any"===p)throw new Pe(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if("in"===p||"not-in"===p){tU(m,p);const T=[];for(const S of m)T.push(eU(u,s,S));v={arrayValue:{values:T}}}else v=eU(u,s,m)}else"in"!==p&&"not-in"!==p&&"array-contains-any"!==p||tU(m,p),v=Z2(a,"where",m,"in"===p||"not-in"===p);return vn.create(d,p,v)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Oh extends hA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Oh(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:kn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)nU(o,u),o=hD(o,u)}(e._query,t),new vi(e.firestore,e.converter,hD(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class fA extends nm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fA(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new Pe(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Pe(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sg(s,o)}(e._query,this._field,this._direction);return new vi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ma(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class qE extends nm{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new qE(e,t,r)}_apply(e){return new vi(e.firestore,e.converter,lE(e._query,this._limit,this._limitType))}}class WE extends nm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new WE(e,t,r)}_apply(e){const t=J2(e,this.type,this._docOrFields,this._inclusive);return new vi(e.firestore,e.converter,(s=t,new Ma((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class ZE extends nm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ZE(e,t,r)}_apply(e){const t=J2(e,this.type,this._docOrFields,this._inclusive);return new vi(e.firestore,e.converter,(s=t,new Ma((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function J2(n,e,t,r){if(t[0]=(0,Yt.m9)(t[0]),t[0]instanceof tm)return function(s,o,a,u,d){if(!u)throw new Pe(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const p=[];for(const m of ch(s))if(m.field.isKeyField())p.push(Gc(o,u.key));else{const v=u.data.field(m.field);if(rE(v))throw new Pe(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===v){const T=m.field.canonicalString();throw new Pe(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${T}' (used as the orderBy) does not exist.`)}p.push(v)}return new Uu(p,d)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=rl(n.firestore);return function(o,a,u,d,p,m){const v=o.explicitOrderBy;if(p.length>v.length)throw new Pe(le.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const T=[];for(let S=0;S<p.length;S++){const R=p[S];if(v[S].field.isKeyField()){if("string"!=typeof R)throw new Pe(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof R}`);if(!dD(o)&&-1!==R.indexOf("/"))throw new Pe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${R}' contains a slash.`);const M=o.path.child(yn.fromString(R));if(!Xe.isDocumentKey(M))throw new Pe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const X=new Xe(M);T.push(Gc(a,X))}else{const M=Z2(u,d,R);T.push(M)}}return new Uu(T,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function eU(n,e,t){if("string"==typeof(t=(0,Yt.m9)(t))){if(""===t)throw new Pe(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dD(e)&&-1!==t.indexOf("/"))throw new Pe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(yn.fromString(t));if(!Xe.isDocumentKey(r))throw new Pe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gc(n,new Xe(r))}if(t instanceof nr)return Gc(n,t._key);throw new Pe(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${VE(t)}.`)}function tU(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nU(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Pe(le.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class pA{convertValue(e,t="none"){switch(Lu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ut()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ou(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new BE(Cr(e.latitude),Cr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=iE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(bg(e));default:return null}}convertTimestamp(e){const t=Ra(e);return new dr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=yn.fromString(e);pt(pV(r));const i=new ku(r.get(1),r.get(3)),s=new Xe(r.popFirst(5));return i.isEqual(t)||xr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function KE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class mJ extends pA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}class sl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class La extends tm{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new im(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(GE("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class im extends La{data(e={}){return super.data(e)}}class Wu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new sl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new im(this._firestore,this._userDataWriter,r.key,r,new sl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new im(i._firestore,i._userDataWriter,a.doc.key,a.doc,new sl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new im(i._firestore,i._userDataWriter,a.doc.key,a.doc,new sl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,p=-1;return 0!==a.type&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),p=o.indexOf(a.doc.key)),{type:yJ(a.type),doc:u,oldIndex:d,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function yJ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function iU(n,e){return n instanceof La&&e instanceof La?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Wu&&e instanceof Wu&&n._firestore===e._firestore&&rA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Zu extends pA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}function sU(n,e,t){n=sn(n,nr);const r=sn(n.firestore,jn),i=KE(n.converter,e,t);return kh(r,[$E(rl(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,hr.none())])}function oU(n,e,t,...r){n=sn(n,nr);const i=sn(n.firestore,jn),s=rl(i);let o;return o="string"==typeof(e=(0,Yt.m9)(e))||e instanceof Fa?lA(s,"updateDoc",n._key,e,t,r):cA(s,"updateDoc",n._key,e),kh(i,[o.toMutation(n._key,hr.exists(!0))])}function aU(n,...e){var t,r,i;n=(0,Yt.m9)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||iA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(iA(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let u,d,p;if(n instanceof nr)d=sn(n.firestore,jn),p=uh(n._key.path),u={next:m=>{e[o]&&e[o](gA(d,n,m))},error:e[o+1],complete:e[o+2]};else{const m=sn(n,vi);d=sn(m.firestore,jn),p=m._query;const v=new Zu(d);u={next:T=>{e[o]&&e[o](new Wu(d,v,m,T))},error:e[o+1],complete:e[o+2]},X2(n._query)}return function(v,T,S,R){const M=new kE(R),X=new v0(T,M,S);return v.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return f0(yield Nh(v),X)})),()=>{M.$a(),v.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return g0(yield Nh(v),X)}))}}(fr(d),p,a,u)}function kh(n,e){return function(r,i){const s=new Qr;return r.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function hX(n,e,t){return A0.apply(this,arguments)}(yield eA(r),i,s)})),s.promise}(fr(n),e)}function gA(n,e,t){const r=t.docs.get(e._key),i=new Zu(n);return new La(n,i,e._key,r,new sl(t.hasPendingWrites,t.fromCache),e.converter)}const FJ={maxAttempts:5};class uU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=rl(e)}set(e,t,r){this._verifyNotCommitted();const i=Ku(e,this._firestore),s=KE(i.converter,t,r),o=$E(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,hr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Ku(e,this._firestore);let o;return o="string"==typeof(t=(0,Yt.m9)(t))||t instanceof Fa?lA(this._dataReader,"WriteBatch.update",s._key,t,r,i):cA(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,hr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ku(e,this._firestore);return this._mutations=this._mutations.concat(new ph(t._key,hr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ku(n,e){if((n=(0,Yt.m9)(n)).firestore!==e)throw new Pe(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class LJ extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=rl(t)}get(t){const r=Ku(t,this._firestore),i=new mJ(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return ut();const o=s[0];if(o.isFoundDocument())return new tm(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new tm(this._firestore,i,r._key,null,r.converter);throw ut()})}set(t,r,i){const s=Ku(t,this._firestore),o=KE(s.converter,r,i),a=$E(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Ku(t,this._firestore);let a;return a="string"==typeof(r=(0,Yt.m9)(r))||r instanceof Fa?lA(this._dataReader,"Transaction.update",o._key,r,i,s):cA(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Ku(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ku(e,this._firestore),r=new Zu(this._firestore);return super.get(e).then(i=>new La(this._firestore,r,t._key,i._document,new sl(!1,!1),t.converter))}}function _A(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function hU(){if(typeof Uint8Array>"u")throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function fU(){if(!function _Q(){return typeof atob<"u"}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){eh=zo.SDK_VERSION,(0,zo._registerComponent)(new Yv.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new jn(new jK(r.getProvider("auth-internal")),new zK(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Pe(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ku(d.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,zo.registerVersion)(OF,"4.6.3",e),(0,zo.registerVersion)(OF,"4.6.3","esm2017")}();class sm{constructor(e){this._delegate=e}static fromBase64String(e){return fU(),new sm(Jo.fromBase64String(e))}static fromUint8Array(e){return hU(),new sm(Jo.fromUint8Array(e))}toBase64(){return fU(),this._delegate.toBase64()}toUint8Array(){return hU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function yA(n){return function WJ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class ZJ{enableIndexedDbPersistence(e,t){return function ZX(n,e){z2(n=sn(n,jn));const t=fr(n);if(t._uninitializedComponentsProvider)throw new Pe(le.FAILED_PRECONDITION,"SDK cache is already specified.");Is("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Mh;return H2(t,i,new W0(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function KX(n){z2(n=sn(n,jn));const e=fr(n);if(e._uninitializedComponentsProvider)throw new Pe(le.FAILED_PRECONDITION,"SDK cache is already specified.");Is("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Mh;return H2(e,r,new b2(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function QX(n){if(n._initialized&&!n._terminated)throw new Pe(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{yield(t=(0,he.Z)(function*(i){if(!Wo.D())return Promise.resolve();const s=i+"main";yield Wo.delete(s)}),function r(i){return t.apply(this,arguments)})(kD(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class pU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ku||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Is("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function U2(n,e,t,r={}){var i;const s=(n=sn(n,Yg))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Is("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=ai.MOCK_USER;else{a=(0,Yt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Pe(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ai(d)}n._authCredentials=new BK(new kF(a,u))}}(this._delegate,e,t,r)}enableNetwork(){return function XX(n){return function NX(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield A2(n),t=yield S2(n);return e.setNetworkEnabled(!0),function(i){const s=Ke(i);return s.M_.delete(0),Kg(s)}(t)}))}(fr(n=sn(n,jn)))}(this._delegate)}disableNetwork(){return function JX(n){return function OX(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield A2(n),t=yield S2(n);return e.setNetworkEnabled(!1),(r=(0,he.Z)(function*(s){const o=Ke(s);o.M_.add(0),yield Th(o),o.N_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(fr(n=sn(n,jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,O2("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function YX(n){return function(t){const r=new Qr;return t.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function mX(n,e){return x0.apply(this,arguments)}(yield eA(t),r)})),r.promise}(fr(n=sn(n,jn)))}(this._delegate)}onSnapshotsInSync(e){return function AJ(n,e){return function VX(n,e){const t=new kE(e);return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return i=yield Nh(n),s=t,Ke(i).z_.add(s),void s.next();var i,s})),()=>{t.$a(),n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return i=yield Nh(n),s=t,void Ke(i).z_.delete(s);var i,s}))}}(fr(n=sn(n,jn)),iA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Fh(this,B2(this._delegate,e))}catch(t){throw ns(t,"collection()","Firestore.collection()")}}doc(e){try{return new Js(this,UE(this._delegate,e))}catch(t){throw ns(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new rs(this,function zX(n,e){if(n=sn(n,Yg),nA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vi(n,null,(r=e,new Ma(yn.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw ns(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function VJ(n,e,t){n=sn(n,jn);const r=Object.assign(Object.assign({},FJ),t);return function(s){if(s.maxAttempts<1)throw new Pe(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new Qr;return s.asyncQueue.enqueueAndForget((0,he.Z)(function*(){const d=yield function R2(n){return LE(n).then(e=>e.datastore)}(s);new MX(s.asyncQueue,d,a,o,u).Xa()})),u.promise}(fr(n),i=>e(new LJ(n,i)),r)}(this._delegate,t=>e(new gU(this,t)))}batch(){return fr(this._delegate),new mU(new uU(this._delegate,e=>kh(this._delegate,e)))}loadBundle(e){return function eJ(n,e){const t=fr(n=sn(n,jn)),r=new qX;return function UX(n,e,t,r){const i=function(o,a){let u;return u="string"==typeof o?ZL().encode(o):o,p=function(p,m){if(p instanceof Uint8Array)return C2(p,m);if(p instanceof ArrayBuffer)return C2(new Uint8Array(p),m);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new RX(p,a);var p}(t,Zg(e));n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){!function AX(n,e,t){const r=Ke(n);var i;(i=(0,he.Z)(function*(o,a,u){try{const d=yield a.getMetadata();if(yield function(S,R){const M=Ke(S),X=Nr(R.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",j=>M.$r.getBundleMetadata(j,R.id)).then(j=>!!j&&j.createTime.compareTo(X)>=0)}(o.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(S=d).totalDocuments,bytesLoaded:S.totalBytes,totalDocuments:S.totalDocuments,totalBytes:S.totalBytes}),Promise.resolve(new Set);u._updateProgress(p2(d));const p=new iX(d,o.localStore,a.serializer);let m=yield a.qa();for(;m;){const T=yield p._a(m);T&&u._updateProgress(T),m=yield a.qa()}const v=yield p.complete();return yield ka(o,v.ca,void 0),yield function(S,R){const M=Ke(S);return M.persistence.runTransaction("Save bundle","readwrite",X=>M.$r.saveBundleMetadata(X,R))}(o.localStore,d),u._completeWith(v.progress),Promise.resolve(v.ua)}catch(d){return Is("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var S}),function s(o,a,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield eA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function tJ(n,e){return function BX(n,e){return n.asyncQueue.enqueue((0,he.Z)(function*(){return function(r,i){const s=Ke(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield xh(n),e)}))}(fr(n=sn(n,jn)),e).then(t=>t?new vi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new rs(this,t):null)}}class YE extends pA{constructor(e){super(),this.firestore=e}convertBytes(e){return new sm(new Jo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Js.forKey(t,this.firestore,null)}}class gU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new YE(e)}get(e){const t=al(e);return this._delegate.get(t).then(r=>new om(this._firestore,new La(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=al(e);return r?(_A("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=al(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=al(e);return this._delegate.delete(t),this}}class mU{constructor(e){this._delegate=e}set(e,t,r){const i=al(e);return r?(_A("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=al(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=al(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ol{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new im(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new am(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ol.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new ol(e,new YE(e),t),i.set(t,s)),s}}ol.INSTANCES=new WeakMap;class Js{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new YE(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Js(t,new nr(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new Js(t,new nr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Fh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Fh(this.firestore,B2(this._delegate,e))}catch(t){throw ns(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Yt.m9)(e))instanceof nr&&j2(this._delegate,e)}set(e,t){t=_A("DocumentReference.set",t);try{return t?sU(this._delegate,e,t):sU(this._delegate,e)}catch(r){throw ns(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?oU(this._delegate,e):oU(this._delegate,e,t,...r)}catch(i){throw ns(i,"updateDoc()","DocumentReference.update()")}}delete(){return function CJ(n){return kh(sn(n.firestore,jn),[new ph(n._key,hr.none())])}(this._delegate)}onSnapshot(...e){const t=_U(e),r=yU(e,i=>new om(this.firestore,new La(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return aU(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function EJ(n){n=sn(n,nr);const e=sn(n.firestore,jn),t=fr(e),r=new Zu(e);return function kX(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(r=(0,he.Z)(function*(s,o,a){try{const u=yield function(p,m){const v=Ke(p);return v.persistence.runTransaction("read document","readonly",T=>v.localDocuments.getDocument(T,m))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new Pe(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=Ah(u,`Failed to get document '${o} from cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield xh(n),e,t);var r})),t.promise}(t,n._key).then(i=>new La(e,r,n._key,i,new sl(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function IJ(n){n=sn(n,nr);const e=sn(n.firestore,jn);return P2(fr(e),n._key,{source:"server"}).then(t=>gA(e,n,t))}(this._delegate):function vJ(n){n=sn(n,nr);const e=sn(n.firestore,jn);return P2(fr(e),n._key).then(t=>gA(e,n,t))}(this._delegate),t.then(r=>new om(this.firestore,new La(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Js(this.firestore,this._delegate.withConverter(e?ol.getInstance(this.firestore,e):null))}}function ns(n,e,t){return n.message=n.message.replace(e,t),n}function _U(n){for(const e of n)if("object"==typeof e&&!yA(e))return e;return{}}function yU(n,e){var t,r;let i;return i=yA(n[0])?n[0]:yA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class om{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Js(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return iU(this._delegate,e._delegate)}}class am extends om{data(e){const t=this._delegate.data(e);return this._delegate._converter||function VK(n,e){n||ut()}(void 0!==t),t}}class rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new YE(e)}where(e,t,r){try{return new rs(this.firestore,qu(this._delegate,function uJ(n,e,t){const r=e,i=GE("where",n);return rm._create(i,r,t)}(e,t,r)))}catch(i){throw ns(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new rs(this.firestore,qu(this._delegate,function cJ(n,e="asc"){const t=e,r=GE("orderBy",n);return fA._create(r,t)}(e,t)))}catch(r){throw ns(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new rs(this.firestore,qu(this._delegate,function lJ(n){return L2("limit",n),qE._create("limit",n,"F")}(e)))}catch(t){throw ns(t,"limit()","Query.limit()")}}limitToLast(e){try{return new rs(this.firestore,qu(this._delegate,function dJ(n){return L2("limitToLast",n),qE._create("limitToLast",n,"L")}(e)))}catch(t){throw ns(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new rs(this.firestore,qu(this._delegate,function hJ(...n){return WE._create("startAt",n,!0)}(...e)))}catch(t){throw ns(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new rs(this.firestore,qu(this._delegate,function fJ(...n){return WE._create("startAfter",n,!1)}(...e)))}catch(t){throw ns(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new rs(this.firestore,qu(this._delegate,function pJ(...n){return ZE._create("endBefore",n,!1)}(...e)))}catch(t){throw ns(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new rs(this.firestore,qu(this._delegate,function gJ(...n){return ZE._create("endAt",n,!0)}(...e)))}catch(t){throw ns(t,"endAt()","Query.endAt()")}}isEqual(e){return rA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function TJ(n){n=sn(n,vi);const e=sn(n.firestore,jn),t=fr(e),r=new Zu(e);return function FX(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(r=(0,he.Z)(function*(s,o,a){try{const u=yield AE(s,o,!0),d=new _2(o,u.hs),p=d.da(u.documents),m=d.applyChanges(p,!1);a.resolve(m.snapshot)}catch(u){const d=Ah(u,`Failed to execute query '${o} against cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield xh(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Wu(e,r,n,i))}(this._delegate):"server"===e?.source?function bJ(n){n=sn(n,vi);const e=sn(n.firestore,jn),t=fr(e),r=new Zu(e);return M2(t,n._query,{source:"server"}).then(i=>new Wu(e,r,n,i))}(this._delegate):function wJ(n){n=sn(n,vi);const e=sn(n.firestore,jn),t=fr(e),r=new Zu(e);return X2(n._query),M2(t,n._query).then(i=>new Wu(e,r,n,i))}(this._delegate),t.then(r=>new vA(this.firestore,new Wu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=_U(e),r=yU(e,i=>new vA(this.firestore,new Wu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return aU(this._delegate,t,r)}withConverter(e){return new rs(this.firestore,this._delegate.withConverter(e?ol.getInstance(this.firestore,e):null))}}class QJ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new am(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new am(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new QJ(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new am(this._firestore,r))})}isEqual(e){return iU(this._delegate,e._delegate)}}class Fh extends rs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Js(this.firestore,e):null}doc(e){try{return new Js(this.firestore,void 0===e?UE(this._delegate):UE(this._delegate,e))}catch(t){throw ns(t,"doc()","CollectionReference.doc()")}}add(e){return function DJ(n,e){const t=sn(n.firestore,jn),r=UE(n),i=KE(n.converter,e);return kh(t,[$E(rl(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,hr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Js(this.firestore,t))}isEqual(e){return j2(this._delegate,e._delegate)}withConverter(e){return new Fh(this.firestore,this._delegate.withConverter(e?ol.getInstance(this.firestore,e):null))}}function al(n){return sn(n,nr)}class EA{constructor(...e){this._delegate=new Fa(...e)}static documentId(){return new EA(er.keyField().canonicalString())}isEqual(e){return(e=(0,Yt.m9)(e))instanceof Fa&&this._delegate._internalPath.isEqual(e._internalPath)}}class ul{constructor(e){this._delegate=e}static serverTimestamp(){const e=function BJ(){return new sA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ul(e)}static delete(){const e=function UJ(){return new Jg("deleteField")}();return e._methodName="FieldValue.delete",new ul(e)}static arrayUnion(...e){const t=function jJ(...n){return new oA("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ul(t)}static arrayRemove(...e){const t=function $J(...n){return new aA("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ul(t)}static increment(e){const t=function HJ(n){return new uA("increment",n)}(e);return t._methodName="FieldValue.increment",new ul(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const YJ={Firestore:pU,GeoPoint:BE,Timestamp:dr,Blob:sm,Transaction:gU,WriteBatch:mU,DocumentReference:Js,DocumentSnapshot:om,Query:rs,QueryDocumentSnapshot:am,QuerySnapshot:vA,CollectionReference:Fh,FieldPath:EA,FieldValue:ul,setLogLevel:function KJ(n){!function LK(n){Mu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function vU(n,e){return function eee(n,e=qC){return new ue(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function IA(n,e){return vU(n,e).pipe(ze(t=>({payload:t,type:"query"})))}!function JJ(n){(function XJ(n,e){n.INTERNAL.registerComponent(new Yv.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},YJ)))})(n,(e,t)=>new pU(e,t,new ZJ)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(Go.Z);class EU{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=DU(r,t);return new TU(i,s,this.afs)}snapshotChanges(){return function tee(n,e){return vU(n,e).pipe(hv(void 0),YC(),ze(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ts)}valueChanges(e={}){return this.snapshotChanges().pipe(ze(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return L(this.ref.get(e)).pipe(ts)}}function XE(n,e){return IA(n,e).pipe(hv(void 0),YC(),ze(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=s.find(m=>m.doc.ref.isEqual(a.ref)),p=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&p&&JSON.stringify(p.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function IU(n,e,t){return XE(n,t).pipe(pv((r,i)=>function nee(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function ree(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return wA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return wA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return wA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Ir(),ze(r=>r.map(i=>({type:i.type,payload:i}))))}function wA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function wU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class TU{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=XE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(ze(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(hv(void 0),YC(),Ys(([r,i])=>i.length>0||!r),ze(([,r])=>r),ts)}auditTrail(e){return this.stateChanges(e).pipe(pv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wU(e);return IU(this.query,t,this.afs.schedulers.outsideAngular).pipe(ts)}valueChanges(e={}){return IA(this.query,this.afs.schedulers.outsideAngular).pipe(ze(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),ts)}get(e){return L(this.query.get(e)).pipe(ts)}add(e){return this.ref.add(e)}doc(e){return new EU(this.ref.doc(e),this.afs)}}class iee{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?XE(this.query,this.afs.schedulers.outsideAngular).pipe(ze(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ys(t=>t.length>0),ts):XE(this.query,this.afs.schedulers.outsideAngular).pipe(ts)}auditTrail(e){return this.stateChanges(e).pipe(pv((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wU(e);return IU(this.query,t,this.afs.schedulers.outsideAngular).pipe(ts)}valueChanges(e={}){return IA(this.query,this.afs.schedulers.outsideAngular).pipe(ze(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),ts)}get(e){return L(this.query.get(e)).pipe(ts)}}const bU=new Ue("angularfire2.enableFirestorePersistence"),CU=new Ue("angularfire2.firestore.persistenceSettings"),see=new Ue("angularfire2.firestore.settings"),oee=new Ue("angularfire2.firestore.use-emulator");function DU(n,e=(t=>t)){return{query:e(n),ref:n}}let TA=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,u,d,p,m,v,T,S,R,M,X,j){this.schedulers=u;const ee=Qv(t,a,r),ge=p;m&&bF(ee,a,v,S,R,M,T,X),[this.firestore,this.persistenceEnabled$]=KC(`${ee.name}.firestore`,"AngularFirestore",ee.name,()=>{const $e=a.runOutsideAngular(()=>ee.firestore());if(s&&$e.settings(s),ge&&$e.useEmulator(...ge),i&&!av(o)){const ct=()=>{try{return L($e.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(H){return typeof console<"u"&&console.warn(H),me(!1)}};return[$e,a.runOutsideAngular(ct)]}return[$e,me(!1)]},[s,ge,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=DU(i,r),a=this.schedulers.ngZone.run(()=>s);return new TU(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new iee(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new EU(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(Ne(_g),Ne(yg,8),Ne(bU,8),Ne(see,8),Ne(po),Ne(Sn),Ne(ZC),Ne(CU,8),Ne(oee,8),Ne(QC,8),Ne(yF,8),Ne(vF,8),Ne(EF,8),Ne(IF,8),Ne(wF,8),Ne(TF,8),Ne(WC,8))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),aee=(()=>{class n{constructor(){Go.Z.registerVersion("angularfire",Kv.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:bU,useValue:!0},{provide:CU,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ri({type:n});static \u0275inj=Ie({providers:[TA]})}return n})(),uee=(()=>{class n{constructor(t){this.firestore=t,this.collectionName="documentos"}createDocumento(t){const r=this.firestore.createId();return t.id=r,this.firestore.collection(this.collectionName).doc(r).set(this.mapDocumentoToPlainObject(t))}getDocumento(t){return this.firestore.collection(this.collectionName).doc(t).snapshotChanges().pipe(ze(r=>{const i=r.payload.data();if(i)return new Wv(i.id,i.egresadoId,new gg(i.tipoDocumento),i.contenido,i.imagenUrl)}))}getDocumentosByEgresadoId(t){return this.firestore.collection(this.collectionName,r=>r.where("egresadoId","==",t)).snapshotChanges().pipe(ze(r=>r.map(i=>{const s=i.payload.doc.data();return new Wv(i.payload.doc.id,s.egresadoId,new gg(s.tipoDocumento),s.contenido,s.imagenUrl)})))}updateDocumento(t){return this.firestore.collection(this.collectionName).doc(t.id).update(this.mapDocumentoToPlainObject(t))}deleteDocumento(t){return this.firestore.collection(this.collectionName).doc(t).delete()}mapDocumentoToPlainObject(t){return{id:t.id,egresadoId:t.egresadoId,tipoDocumento:t.tipoDocumento.getValue(),contenido:t.consultarContenido(),imagenUrl:t.consultarImagenUrl()}}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(TA))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cee(n,e){if(1&n&&(Re(0,"option",19),qe(1),be()),2&n){const t=e.$implicit;zt("value",t),Nt(1),yu(t)}}function lee(n,e){if(1&n&&(Re(0,"li"),qe(1),be()),2&n){const t=e.$implicit;Nt(1),VT(" ",t.tipoDocumento.getValue()," - ",t.consultarContenido()," - ",t.consultarImagenUrl()," ")}}function dee(n,e){if(1&n&&(Re(0,"div",20)(1,"h3"),qe(2,"Documentos del Egresado:"),be(),Re(3,"ul"),Vr(4,lee,2,3,"li",21),be()()),2&n){const t=Zs();Nt(4),zt("ngForOf",t.documentos)}}let hee=(()=>{class n{constructor(t){this.documentoRepository=t,this.documentos=[],this.newDocumentoId="",this.newEgresadoId="",this.newTipoDocumento="",this.newContenido="",this.newImagenUrl="",this.tiposDocumentos=gg.tiposValidos}ngOnInit(){}loadDocumentosByEgresadoId(){this.documentoRepository.getDocumentosByEgresadoId(this.newEgresadoId).subscribe(t=>{this.documentos=t})}createDocumento(){const t=new Wv("",this.newEgresadoId,new gg(this.newTipoDocumento),this.newContenido,this.newImagenUrl);this.documentoRepository.createDocumento(t).then(()=>{console.log("Documento creado con \xe9xito")})}getDocumento(){this.documentoRepository.getDocumento(this.newDocumentoId).subscribe(t=>{t?console.log("Documento obtenido:",t):console.log("Documento no encontrado")})}updateDocumento(){const t=new Wv(this.newDocumentoId,this.newEgresadoId,new gg(this.newTipoDocumento),this.newContenido,this.newImagenUrl);this.documentoRepository.updateDocumento(t).then(()=>{console.log("Documento actualizado con \xe9xito")})}deleteDocumento(){this.documentoRepository.deleteDocumento(this.newDocumentoId).then(()=>{console.log("Documento eliminado con \xe9xito")})}static#e=this.\u0275fac=function(r){return new(r||n)(ke(uee))};static#t=this.\u0275cmp=Ki({type:n,selectors:[["app-doc-firestore"]],decls:35,vars:7,consts:[[1,"container"],[1,"form-group"],["for","documentoId"],["type","text","id","documentoId",1,"form-control",3,"ngModel","ngModelChange"],["for","egresadoCedula"],["type","text","id","egresadoId",1,"form-control",3,"ngModel","ngModelChange"],["for","tipoDocumento"],["id","tipoDocumento",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","contenido"],["id","contenido",1,"form-control",3,"ngModel","ngModelChange"],["for","imagenUrl"],["type","text","id","imagenUrl",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-success","mt-3",3,"click"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"btn","btn-warning","mt-3",3,"click"],[1,"btn","btn-danger","mt-3",3,"click"],[1,"btn","btn-info","mt-3",3,"click"],["class","mt-3",4,"ngIf"],[3,"value"],[1,"mt-3"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(Re(0,"div",0)(1,"h1"),qe(2,"Gesti\xf3n de Documentos"),be(),Re(3,"div",1)(4,"label",2),qe(5,"ID del Documento:"),be(),Re(6,"input",3),Bt("ngModelChange",function(o){return i.newDocumentoId=o}),be()(),Re(7,"div",1)(8,"label",4),qe(9,"ID del Egresado:"),be(),Re(10,"input",5),Bt("ngModelChange",function(o){return i.newEgresadoId=o}),be()(),Re(11,"div",1)(12,"label",6),qe(13,"Tipo de Documento:"),be(),Re(14,"select",7),Bt("ngModelChange",function(o){return i.newTipoDocumento=o}),Vr(15,cee,2,2,"option",8),be()(),Re(16,"div",1)(17,"label",9),qe(18,"Contenido:"),be(),Re(19,"textarea",10),Bt("ngModelChange",function(o){return i.newContenido=o}),be()(),Re(20,"div",1)(21,"label",11),qe(22,"URL de la Imagen:"),be(),Re(23,"input",12),Bt("ngModelChange",function(o){return i.newImagenUrl=o}),be()(),Re(24,"button",13),Bt("click",function(){return i.createDocumento()}),qe(25,"Crear Documento"),be(),Re(26,"button",14),Bt("click",function(){return i.getDocumento()}),qe(27,"Obtener Documento"),be(),Re(28,"button",15),Bt("click",function(){return i.updateDocumento()}),qe(29,"Actualizar Documento"),be(),Re(30,"button",16),Bt("click",function(){return i.deleteDocumento()}),qe(31,"Eliminar Documento"),be(),Re(32,"button",17),Bt("click",function(){return i.loadDocumentosByEgresadoId()}),qe(33,"Cargar Documentos por Egresado ID"),be(),Vr(34,dee,5,1,"div",18),be()),2&r&&(Nt(6),zt("ngModel",i.newDocumentoId),Nt(4),zt("ngModel",i.newEgresadoId),Nt(4),zt("ngModel",i.newTipoDocumento),Nt(1),zt("ngForOf",i.tiposDocumentos),Nt(4),zt("ngModel",i.newContenido),Nt(4),zt("ngModel",i.newImagenUrl),Nt(11),zt("ngIf",i.documentos.length>0))},dependencies:[$p,Iu,X1,eF,Kd,qv,Lv,pg],styles:[".container[_ngcontent-%COMP%]{max-width:600px;margin-top:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}button[_ngcontent-%COMP%]{margin-right:10px}"]})}return n})();class Lh{constructor(e,t){this.cedula=e,this.nombreCompleto=t}getNombre(){return this.nombreCompleto.getNombre()}getApellido(){return this.nombreCompleto.getApellido()}getNombreCompleto(){return this.nombreCompleto}}class cl{constructor(e){if(!this.validate(e))throw new Error("Invalid cedula");this.value=e}validate(e){return i1(e)}getValue(){return this.value}equals(e){return this.value===e.value}}class Vh{constructor(e,t){if(!this.validarNombre(e))throw new Error("Nombre inv\xe1lido");if(!this.validarApellido(t))throw new Error("Apellido inv\xe1lido");this.nombre=e,this.apellido=t}validarNombre(e){return e.length>0&&e.length<=50}validarApellido(e){return e.length>0&&e.length<=50}getNombre(){return this.nombre}getApellido(){return this.apellido}equals(e){return this.nombre===e.nombre&&this.apellido===e.apellido}}let fee=(()=>{class n{constructor(t){this.firestore=t,this.collectionName="egresados"}registrarEgresado(t){const r=this.firestore.createId();return this.firestore.collection(this.collectionName).doc(r).set(this.mapEgresadoToPlainObject(t))}consultarEgresadoPorCedula(t){return this.firestore.collection(this.collectionName,r=>r.where("cedula","==",t.getValue())).snapshotChanges().pipe(ze(r=>{const i=r.map(s=>s.payload.doc.data());return i.length?new Lh(new cl(i[0].cedula),new Vh(i[0].nombre,i[0].apellido)):null}))}consultarEgresadoPorNombre(t){return this.firestore.collection(this.collectionName,r=>r.where("nombre","==",t)).snapshotChanges().pipe(ze(r=>{const i=r.map(s=>s.payload.doc.data());return i.length?new Lh(i[0].cedula?new cl(i[0].cedula):null,new Vh(i[0].nombre,i[0].apellido)):null}))}consultarEgresadoPorApellido(t){return this.firestore.collection(this.collectionName,r=>r.where("apellido","==",t)).snapshotChanges().pipe(ze(r=>{const i=r.map(s=>s.payload.doc.data());return i.length?new Lh(i[0].cedula?new cl(i[0].cedula):null,new Vh(i[0].nombre,i[0].apellido)):null}))}consultarEgresados(){return this.firestore.collection(this.collectionName).snapshotChanges().pipe(ze(t=>t.map(r=>{const i=r.payload.doc.data();return new Lh(i.cedula?new cl(i.cedula):null,new Vh(i.nombre,i.apellido))})))}actualizarEgresado(t,r){return t?this.firestore.collection(this.collectionName).doc(t).update(this.mapEgresadoToPlainObject(r)):Promise.reject("ID no proporcionado")}mapEgresadoToPlainObject(t){return{cedula:t.cedula?t.cedula.getValue():null,nombre:t.getNombre(),apellido:t.getApellido()}}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(TA))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pee(n,e){if(1&n&&(Re(0,"li"),qe(1),be()),2&n){const t=e.$implicit;Nt(1),UT(" ID: ",t.id," - ",t.cedula?t.cedula.getValue():"Sin C\xe9dula"," - ",t.getNombre()," ",t.getApellido()," ")}}function gee(n,e){if(1&n&&(Re(0,"div",14)(1,"h3"),qe(2,"Lista de Egresados:"),be(),Re(3,"ul"),Vr(4,pee,2,4,"li",15),be()()),2&n){const t=Zs();Nt(4),zt("ngForOf",t.egresados)}}let mee=(()=>{class n{constructor(t){this.egresadoRepository=t,this.egresados=[],this.selectedId="",this.newCedula="",this.newNombre="",this.newApellido=""}ngOnInit(){this.loadEgresados()}loadEgresados(){this.egresadoRepository.consultarEgresados().subscribe(t=>{this.egresados=t})}registrarEgresado(){const t=new Lh(this.newCedula?new cl(this.newCedula):null,new Vh(this.newNombre,this.newApellido));this.egresadoRepository.registrarEgresado(t).then(()=>{console.log("Egresado registrado con \xe9xito"),this.loadEgresados()})}buscarEgresadoPorCedula(){if(this.newCedula){const t=new cl(this.newCedula);this.egresadoRepository.consultarEgresadoPorCedula(t).subscribe(r=>{r?(console.log("Egresado encontrado:",r),this.selectedId=r.id??"",this.newNombre=r.getNombre(),this.newApellido=r.getApellido()):console.log("Egresado no encontrado")})}else console.log("Por favor, proporcione una c\xe9dula.")}actualizarEgresado(){const t=this.newCedula?new cl(this.newCedula):null,r=new Lh(t,new Vh(this.newNombre,this.newApellido));t?this.egresadoRepository.actualizarEgresado(this.selectedId,r).then(()=>{console.log("Egresado actualizado con \xe9xito"),this.loadEgresados()}).catch(i=>{console.log("Error actualizando el egresado:",i)}):console.log("Por favor, proporcione una c\xe9dula para actualizar.")}static#e=this.\u0275fac=function(r){return new(r||n)(ke(fee))};static#t=this.\u0275cmp=Ki({type:n,selectors:[["app-egresado-firestore"]],decls:26,vars:5,consts:[[1,"container"],[1,"form-group"],["for","id"],["type","text","id","id",1,"form-control",3,"ngModel","ngModelChange"],["for","cedula"],["type","text","id","cedula",1,"form-control",3,"ngModel","ngModelChange"],["for","nombre"],["type","text","id","nombre",1,"form-control",3,"ngModel","ngModelChange"],["for","apellido"],["type","text","id","apellido",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-success","mt-3",3,"click"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"btn","btn-warning","mt-3",3,"click"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(Re(0,"div",0)(1,"h1"),qe(2,"Gesti\xf3n de Egresados"),be(),Re(3,"div",1)(4,"label",2),qe(5,"ID del Egresado:"),be(),Re(6,"input",3),Bt("ngModelChange",function(o){return i.selectedId=o}),be()(),Re(7,"div",1)(8,"label",4),qe(9,"C\xe9dula del Egresado:"),be(),Re(10,"input",5),Bt("ngModelChange",function(o){return i.newCedula=o}),be()(),Re(11,"div",1)(12,"label",6),qe(13,"Nombre del Egresado:"),be(),Re(14,"input",7),Bt("ngModelChange",function(o){return i.newNombre=o}),be()(),Re(15,"div",1)(16,"label",8),qe(17,"Apellido del Egresado:"),be(),Re(18,"input",9),Bt("ngModelChange",function(o){return i.newApellido=o}),be()(),Re(19,"button",10),Bt("click",function(){return i.registrarEgresado()}),qe(20,"Registrar Egresado"),be(),Re(21,"button",11),Bt("click",function(){return i.buscarEgresadoPorCedula()}),qe(22,"Buscar Egresado por C\xe9dula"),be(),Re(23,"button",12),Bt("click",function(){return i.actualizarEgresado()}),qe(24,"Actualizar Egresado"),be(),Vr(25,gee,5,1,"div",13),be()),2&r&&(Nt(6),zt("ngModel",i.selectedId),Nt(4),zt("ngModel",i.newCedula),Nt(4),zt("ngModel",i.newNombre),Nt(4),zt("ngModel",i.newApellido),Nt(7),zt("ngIf",i.egresados.length>0))},dependencies:[$p,Iu,Kd,Lv,pg],styles:[".container[_ngcontent-%COMP%]{max-width:600px;margin-top:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}button[_ngcontent-%COMP%]{margin-right:10px}"]})}return n})();const AU="firebasestorage.googleapis.com",SU="storageBucket";class yr extends Yt.ZR{constructor(e,t,r=0){super(bA(e),`Firebase Storage: ${t} (${bA(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var pr=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(pr||{});function bA(n){return"storage/"+n}function CA(){return new yr(pr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function RU(){return new yr(pr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function PU(){return new yr(pr.CANCELED,"User canceled the upload/download.")}function MU(){return new yr(pr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Uh(n){return new yr(pr.INVALID_ARGUMENT,n)}function xU(){return new yr(pr.APP_DELETED,"The Firebase app was deleted.")}function NU(n){return new yr(pr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function um(n,e){return new yr(pr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function cm(n){throw new yr(pr.INTERNAL_ERROR,"Internal error: "+n)}class Ui{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ui.makeFromUrl(e,t)}catch{return new Ui(e,"")}if(""===r.path)return r;throw function Aee(n){return new yr(pr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function d(ge){ge.path_=decodeURIComponent(ge.path)}const m=t.replace(/[.]/g,"\\."),ee=[{regex:a,indices:{bucket:1,path:3},postModify:function s(ge){"/"===ge.path.charAt(ge.path.length-1)&&(ge.path_=ge.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${m}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:d},{regex:new RegExp(`^https?://${t===AU?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:d}];for(let ge=0;ge<ee.length;ge++){const $e=ee[ge],ct=$e.regex.exec(e);if(ct){let N=ct[$e.indices.path];N||(N=""),r=new Ui(ct[$e.indices.bucket],N),$e.postModify(r);break}}if(null==r)throw function Dee(n){return new yr(pr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class xee{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function JE(n){return"string"==typeof n||n instanceof String}function OU(n){return DA()&&n instanceof Blob}function DA(){return typeof Blob<"u"}function AA(n,e,t,r){if(r<e)throw Uh(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Uh(`Invalid value for '${n}'. Expected ${t} or less.`)}function Va(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function kU(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Bh=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Bh||{});function FU(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class Vee{constructor(e,t,r,i,s,o,a,u,d,p,m,v=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=p,this.connectionFactory_=m,this.retry=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,S)=>{this.resolve_=T,this.reject_=S,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());!function kee(n){return void 0!==n}(u)?s():s(u)}catch(u){o(u)}else if(null!==a){const u=CA();u.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,u):u)}else o(i.canceled?this.appDelete_?xU():PU():RU())};this.canceled_?t(0,new eI(!1,null,!0)):this.backoffId_=function Nee(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function u(){return 2===a}let d=!1;function p(...M){d||(d=!0,e.apply(null,M))}function m(M){i=setTimeout(()=>{i=null,n(T,u())},M)}function v(){s&&clearTimeout(s)}function T(M,...X){if(d)return void v();if(M)return v(),void p.call(null,M,...X);if(u()||o)return v(),void p.call(null,M,...X);let ee;r<64&&(r*=2),1===a?(a=2,ee=0):ee=1e3*(r+Math.random()),m(ee)}let S=!1;function R(M){S||(S=!0,v(),!d&&(null!==i?(M||(a=2),clearTimeout(i),m(0)):M||(a=1)))}return m(0),s=setTimeout(()=>{o=!0,R(!0)},t),R}((r,i)=>{if(i)return void r(!1,new eI(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Bh.NO_ERROR,u=s.getStatus();if(!a||FU(u,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===Bh.ABORT;return void r(!1,new eI(!1,null,p))}const d=-1!==this.successCodes_.indexOf(u);r(!0,new eI(d,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Oee(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class eI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Gee(...n){const e=function zee(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(DA())return new Blob(n);throw new yr(pr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Vs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class SA{constructor(e,t){this.data=e,this.contentType=t||null}}function RA(n,e){switch(n){case Vs.RAW:return new SA(LU(e));case Vs.BASE64:case Vs.BASE64URL:return new SA(VU(n,e));case Vs.DATA_URL:return new SA(function Kee(n){const e=new UU(n);return e.base64?VU(Vs.BASE64,e.rest):function Zee(n){let e;try{e=decodeURIComponent(n)}catch{throw um(Vs.DATA_URL,"Malformed data URL.")}return LU(e)}(e.rest)}(e),function Qee(n){return new UU(n).contentType}(e))}throw CA()}function LU(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function VU(n,e){switch(n){case Vs.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw um(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Vs.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw um(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Wee(n){if(typeof atob>"u")throw function Mee(n){return new yr(pr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:um(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class UU{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw um(Vs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Yee(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ea{constructor(e,t){let r=0,i="";OU(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(OU(this.data_)){const i=function qee(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new ea(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ea(r,!0)}}static getBlob(...e){if(DA()){const t=e.map(r=>r instanceof ea?r.data_:r);return new ea(Gee.apply(null,t))}{const t=e.map(o=>JE(o)?RA(Vs.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new ea(i,!0)}}uploadData(){return this.data_}}function PA(n){let e;try{e=JSON.parse(n)}catch{return null}return function Lee(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function BU(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function ete(n,e){return e}class is{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||ete}}let tI=null;function lm(){if(tI)return tI;const n=[];n.push(new is("bucket")),n.push(new is("generation")),n.push(new is("metageneration")),n.push(new is("name","fullPath",!0));const t=new is("name");t.xform=function e(s,o){return function tte(n){return!JE(n)||n.length<2?n:BU(n)}(o)},n.push(t);const i=new is("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new is("timeCreated")),n.push(new is("updated")),n.push(new is("md5Hash",null,!0)),n.push(new is("cacheControl",null,!0)),n.push(new is("contentDisposition",null,!0)),n.push(new is("contentEncoding",null,!0)),n.push(new is("contentLanguage",null,!0)),n.push(new is("contentType",null,!0)),n.push(new is("metadata","customMetadata",!0)),tI=n,tI}function jU(n,e,t){const r=PA(e);return null===r?null:function rte(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function nte(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Ui(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function MA(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const $U="prefixes",HU="items";class ta{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function na(n){if(!n)throw CA()}function nI(n,e){return function t(r,i){const s=jU(n,i,e);return na(null!==s),s}}function jh(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function bee(){return new yr(pr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Tee(){return new yr(pr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function wee(n){return new yr(pr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Cee(n){return new yr(pr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function dm(n){const e=jh(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function Iee(n){return new yr(pr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function zU(n,e,t){const i=Va(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new ta(i,"GET",nI(n,t),o);return a.errorHandler=dm(e),a}function cte(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=Va(e.bucketOnlyServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,p=new ta(a,"GET",function ate(n,e){return function t(r,i){const s=function ote(n,e,t){const r=PA(t);return null===r?null:function ste(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[$U])for(const i of t[$U]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new Ui(e,s));r.prefixes.push(o)}if(t[HU])for(const i of t[HU]){const s=n._makeStorageReference(new Ui(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return na(null!==s),s}}(n,e.bucket),d);return p.urlParams=s,p.errorHandler=jh(e),p}function qU(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function fte(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class rI{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function xA(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{na(!1)}return na(!!t&&-1!==(e||["active"]).indexOf(t)),t}const _te={STATE_CHANGED:"state_changed"},ss={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function NA(n){switch(n){case"running":case"pausing":case"canceling":return ss.RUNNING;case"paused":return ss.PAUSED;case"success":return ss.SUCCESS;case"canceled":return ss.CANCELED;default:return ss.ERROR}}class yte{constructor(e,t,r){if(function Fee(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function $h(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let KU=null;class vte{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Bh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Bh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw cm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cm("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cm("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw cm("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cm("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Ete extends vte{initXhr(){this.xhr_.responseType="text"}}function Io(){return KU?KU():new Ete}class QU{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=lm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(pr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(FU(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=RU()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(pr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function pte(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=qU(e,r,i),a={name:o.fullPath},u=Va(s,n.host,n._protocol),p={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=MA(o,t),S=new ta(u,"POST",function T(R){let M;xA(R);try{M=R.getResponseHeader("X-Goog-Upload-URL")}catch{na(!1)}return na(JE(M)),M},n.maxUploadRetryTime);return S.urlParams=a,S.headers=p,S.body=m,S.errorHandler=jh(e),S}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Io,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function gte(n,e,t,r){const u=new ta(t,"POST",function s(d){const p=xA(d,["active","final"]);let m=null;try{m=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{na(!1)}m||na(!1);const v=Number(m);return na(!isNaN(v)),new rI(v,r.size(),"final"===p)},n.maxUploadRetryTime);return u.headers={"X-Goog-Upload-Command":"query"},u.errorHandler=jh(e),u}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Io,t,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new rI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function mte(n,e,t,r,i,s,o,a){const u=new rI(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw function Ree(){return new yr(pr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const d=u.total-u.current;let p=d;i>0&&(p=Math.min(p,i));const m=u.current;let T="";T=0===p?"finalize":d===p?"upload, finalize":"upload";const S={"X-Goog-Upload-Command":T,"X-Goog-Upload-Offset":`${u.current}`},R=r.slice(m,m+p);if(null===R)throw MU();const ee=new ta(t,"POST",function M(ge,$e){const ct=xA(ge,["active","final"]),H=u.current+p,N=r.size();let U;return U="final"===ct?nI(e,s)(ge,$e):null,new rI(H,N,"final"===ct,U)},e.maxUploadRetryTime);return ee.headers=S,ee.body=R.uploadData(),ee.progressCallback=a||null,ee.errorHandler=jh(n),ee}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(u){return this._error=u,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Io,i,s,!1);this._request=a,a.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=zU(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Io,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function WU(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},u=function a(){let ee="";for(let ge=0;ge<2;ge++)ee+=Math.random().toString().slice(2);return ee}();o["Content-Type"]="multipart/related; boundary="+u;const d=qU(e,r,i),p=MA(d,t),T=ea.getBlob("--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+p+"\r\n--"+u+"\r\nContent-Type: "+d.contentType+"\r\n\r\n",r,"\r\n--"+u+"--");if(null===T)throw MU();const S={name:d.fullPath},R=Va(s,n.host,n._protocol),X=n.maxUploadRetryTime,j=new ta(R,"POST",nI(n,t),X);return j.urlParams=S,j.headers=o,j.body=T.uploadData(),j.errorHandler=jh(e),j}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Io,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=PU(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=NA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new yte(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(NA(this._state)){case ss.SUCCESS:$h(this._resolve.bind(null,this.snapshot))();break;case ss.CANCELED:case ss.ERROR:$h(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(NA(this._state)){case ss.RUNNING:case ss.PAUSED:e.next&&$h(e.next.bind(e,this.snapshot))();break;case ss.SUCCESS:e.complete&&$h(e.complete.bind(e))();break;default:e.error&&$h(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class ll{constructor(e,t){this._service=e,this._location=t instanceof Ui?t:Ui.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ll(e,t)}get root(){const e=new Ui(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return BU(this._location.path)}get storage(){return this._service}get parent(){const e=function Xee(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ui(this._location.bucket,e);return new ll(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw NU(e)}}function XU(n,e,t){return OA.apply(this,arguments)}function OA(){return(OA=(0,he.Z)(function*(n,e,t){const i=yield JU(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield XU(n,e,i.nextPageToken))})).apply(this,arguments)}function JU(n,e){null!=e&&"number"==typeof e.maxResults&&AA("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=cte(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Io)}function xte(n){n._throwIfRoot("getDownloadURL");const e=function lte(n,e,t){const i=Va(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new ta(i,"GET",function ute(n,e){return function t(r,i){const s=jU(n,i,e);return na(null!==s),function ite(n,e,t,r){const i=PA(e);if(null===i||!JE(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(d=>{const m=n.fullPath;return Va("/b/"+o(n.bucket)+"/o/"+o(m),t,r)+kU({alt:"media",token:d})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return a.errorHandler=dm(e),a}(n.storage,n._location,lm());return n.storage.makeRequestWithTokens(e,Io).then(t=>{if(null===t)throw function Pee(){return new yr(pr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function eB(n,e){const t=function Jee(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ui(n._location.bucket,t);return new ll(n.storage,r)}function tB(n,e){if(n instanceof kA){const t=n;if(null==t._bucket)throw function See(){return new yr(pr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+SU+"' property when initializing the app?")}();const r=new ll(t,t._bucket);return null!=e?tB(r,e):r}return void 0!==e?eB(n,e):n}function Fte(n,e){if(e&&function Ote(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof kA)return function kte(n,e){return new ll(n,e)}(n,e);throw Uh("To use ref(service, url), the first argument must be a Storage instance.")}return tB(n,e)}function nB(n,e){const t=e?.[SU];return null==t?null:Ui.makeFromBucketSpec(t,n)}class kA{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=AU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ui.makeFromBucketSpec(i,this._host):nB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ui.makeFromBucketSpec(this._url,e):nB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){AA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){AA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,he.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,he.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ll(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new xee(xU());{const o=function Hee(n,e,t,r,i,s,o=!0){const a=kU(n.urlParams),u=n.url+a,d=Object.assign({},n.headers);return function jee(n,e){e&&(n["X-Firebase-GMPID"]=e)}(d,e),function Uee(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(d,t),function Bee(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(d,s),function $ee(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(d,r),new Vee(u,n.method,d,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,he.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const rB="@firebase/storage";function oB(n,e){return Fte(n=(0,Yt.m9)(n),e)}function qte(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new kA(t,r,i,e,zo.SDK_VERSION)}!function Wte(){(0,zo._registerComponent)(new Yv.wA("storage",qte,"PUBLIC").setMultipleInstances(!0)),(0,zo.registerVersion)(rB,"0.12.5",""),(0,zo.registerVersion)(rB,"0.12.5","esm2017")}();class iI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class uB{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new iI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new iI(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?o=>t(new iI(o,this,this._ref)):{next:t.next?o=>t.next(new iI(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class cB{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ua(e,this._service))}get items(){return this._delegate.items.map(e=>new Ua(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ua{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Gte(n,e){return eB(n,e)}(this._delegate,e);return new Ua(t,this.storage)}get root(){return new Ua(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ua(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new uB(function Vte(n,e,t){return function Ate(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new QU(n,new ea(e),t)}(n=(0,Yt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Vs.RAW,r){this._throwIfRoot("putString");const i=RA(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new uB(new QU(this._delegate,new ea(i.data,!0),s),this)}listAll(){return function $te(n){return function Rte(n){const e={prefixes:[],items:[]};return XU(n,e).then(()=>e)}(n=(0,Yt.m9)(n))}(this._delegate).then(e=>new cB(e,this.storage))}list(e){return function jte(n,e){return JU(n=(0,Yt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new cB(t,this.storage))}getMetadata(){return function Ute(n){return function Pte(n){n._throwIfRoot("getMetadata");const e=zU(n.storage,n._location,lm());return n.storage.makeRequestWithTokens(e,Io)}(n=(0,Yt.m9)(n))}(this._delegate)}updateMetadata(e){return function Bte(n,e){return function Mte(n,e){n._throwIfRoot("updateMetadata");const t=function dte(n,e,t,r){const s=Va(e.fullServerUrl(),n.host,n._protocol),a=MA(t,r),d=n.maxOperationRetryTime,p=new ta(s,"PATCH",nI(n,r),d);return p.headers={"Content-Type":"application/json; charset=utf-8"},p.body=a,p.errorHandler=dm(e),p}(n.storage,n._location,e,lm());return n.storage.makeRequestWithTokens(t,Io)}(n=(0,Yt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Hte(n){return xte(n=(0,Yt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function zte(n){return function Nte(n){n._throwIfRoot("deleteObject");const e=function hte(n,e){const r=Va(e.fullServerUrl(),n.host,n._protocol),a=new ta(r,"DELETE",function o(u,d){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=dm(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Io)}(n=(0,Yt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw NU(e)}}class lB{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(dB(e))throw Uh("ref() expected a child path but got a URL, use refFromURL instead.");return new Ua(oB(this._delegate,e),this)}refFromURL(e){if(!dB(e))throw Uh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ui.makeFromUrl(e,this._delegate.host)}catch{throw Uh("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ua(oB(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function aB(n,e,t,r={}){!function Lte(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Yt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function dB(n){return/^[A-Za-z]+:\/\//.test(n)}function Yte(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new lB(t,r)}function hB(n){const e=function Jte(n){return new ue(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(function _ee(n,e=qC){return oe((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const d=s;s=null,r.next(d)}};function u(){const d=o+n,p=e.now();if(p<d)return i=this.schedule(void 0,d-p),void r.add(i);a()}t.subscribe(De(r,d=>{s=d,o=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(ze(t=>t.bytesTransferred/t.totalBytes*100))}}function sI(n){return{getDownloadURL:()=>me(void 0).pipe(fF,bt(()=>n.getDownloadURL()),ts),getMetadata:()=>me(void 0).pipe(fF,bt(()=>n.getMetadata()),ts),delete:()=>L(n.delete()),child:e=>sI(n.child(e)),updateMetadata:e=>L(n.updateMetadata(e)),put:(e,t)=>hB(n.put(e,t)),putString:(e,t,r)=>hB(n.putString(e,t,r)),list:e=>L(n.list(e)),listAll:()=>L(n.listAll())}}!function Xte(n){const e={TaskState:ss,TaskEvent:_te,StringFormat:Vs,Storage:lB,Reference:Ua};n.INTERNAL.registerComponent(new Yv.wA("storage-compat",Yte,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.8")}(Go.Z);const ene=new Ue("angularfire2.storageBucket"),tne=new Ue("angularfire2.storage.maxUploadRetryTime"),nne=new Ue("angularfire2.storage.maxOperationRetryTime"),rne=new Ue("angularfire2.storage.use-emulator");let ine=(()=>{class n{storage;constructor(t,r,i,s,o,a,u,d,p,m){const v=Qv(t,o,r);this.storage=KC(`${v.name}.storage.${i}`,"AngularFireStorage",v.name,()=>{const T=o.runOutsideAngular(()=>v.storage(i||void 0)),S=p;return S&&T.useEmulator(...S),u&&T.setMaxUploadRetryTime(u),d&&T.setMaxOperationRetryTime(d),T},[u,d])}ref(t){return sI(this.storage.ref(t))}refFromURL(t){return sI(this.storage.refFromURL(t))}upload(t,r,i){return sI(this.storage.ref(t)).put(r,i)}static \u0275fac=function(r){return new(r||n)(Ne(_g),Ne(yg,8),Ne(ene,8),Ne(po),Ne(Sn),Ne(ZC),Ne(tne,8),Ne(nne,8),Ne(rne,8),Ne(WC,8))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),sne=(()=>{class n{constructor(t){this.storage=t}uploadImage(t,r){const i=this.storage.ref(t),s=this.storage.upload(t,r);return new ue(o=>{s.snapshotChanges().pipe(Ld(()=>{i.getDownloadURL().subscribe(a=>{o.next(a),o.complete()})})).subscribe()})}getImages(){return this.storage.ref("/").listAll().pipe(ze(r=>{const i=[];return r.items.forEach(s=>{s.getDownloadURL().then(o=>i.push(o))}),i}))}static#e=this.\u0275fac=function(r){return new(r||n)(Ne(ine))};static#t=this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function one(n,e){if(1&n&&(Re(0,"div",9)(1,"div",10),va(2,"img",11),be()()),2&n){const t=e.$implicit;Nt(2),zt("src",t,fp)}}function ane(n,e){if(1&n&&(Re(0,"div",6)(1,"h3"),qe(2,"Im\xe1genes Subidas:"),be(),Re(3,"div",7),Vr(4,one,3,1,"div",8),be()()),2&n){const t=Zs();Nt(4),zt("ngForOf",t.images)}}const une=[{path:"",component:dK},{path:"ocr",component:pZ},{path:"camara",component:wZ},{path:"image-editor",component:AZ},{path:"info-detection",component:lK},{path:"doc-firestore",component:hee},{path:"egresado-firestore",component:mee},{path:"image-storage",component:(()=>{class n{constructor(t){this.storageService=t,this.selectedFile=null,this.images=[]}ngOnInit(){this.loadImages()}onFileSelected(t){const r=t.target.files[0];r&&(this.selectedFile=r)}uploadImage(){this.selectedFile&&this.storageService.uploadImage(`${this.selectedFile.name}`,this.selectedFile).subscribe(r=>{console.log("Image uploaded, URL:",r),this.loadImages()})}loadImages(){this.storageService.getImages().subscribe(t=>{this.images=t})}static#e=this.\u0275fac=function(r){return new(r||n)(ke(sne))};static#t=this.\u0275cmp=Ki({type:n,selectors:[["app-image-storage"]],decls:10,vars:1,consts:[[1,"container"],[1,"form-group"],["for","file"],["type","file","id","file",1,"form-control",3,"change"],[1,"btn","btn-success","mt-3",3,"click"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"card","mb-4"],["alt","Imagen subida",1,"card-img-top",3,"src"]],template:function(r,i){1&r&&(Re(0,"div",0)(1,"h1"),qe(2,"Gesti\xf3n de Im\xe1genes"),be(),Re(3,"div",1)(4,"label",2),qe(5,"Seleccionar Imagen:"),be(),Re(6,"input",3),Bt("change",function(o){return i.onFileSelected(o)}),be()(),Re(7,"button",4),Bt("click",function(){return i.uploadImage()}),qe(8,"Subir Imagen"),be(),Vr(9,ane,5,1,"div",5),be()),2&r&&(Nt(9),zt("ngIf",i.images.length>0))},dependencies:[$p,Iu],styles:[".container[_ngcontent-%COMP%]{margin-top:50px}.card[_ngcontent-%COMP%]{box-shadow:0 4px 8px #0000001a;transition:transform .3s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}"]})}return n})()},{path:"**",redirectTo:""}];let cne=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=ri({type:n});static#n=this.\u0275inj=Ie({imports:[Bk.forRoot(une),Bk]})}return n})();const Qu=function(){return{exact:!0}};let lne=(()=>{class n{constructor(){this.title="app-web-gda-core-16"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ki({type:n,selectors:[["app-root"]],decls:34,vars:16,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","/","routerLinkActive","active-link",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/ocr","routerLinkActive","active-link",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/camara","routerLinkActive","active-link",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/image-editor","routerLinkActive","active-link",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/info-detection","routerLinkActive","active-link",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/doc-firestore","routerLinkActive","active-link",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/egresado-firestore","routerLinkActive","active-link",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/image-storage","routerLinkActive","active-link",1,"nav-link",3,"routerLinkActiveOptions"],[1,"container","mt-4"]],template:function(r,i){1&r&&(Re(0,"nav",0)(1,"div",1)(2,"a",2),qe(3,"SGDA"),be(),Re(4,"button",3),va(5,"span",4),be(),Re(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),qe(10,"Inicio"),be()(),Re(11,"li",7)(12,"a",9),qe(13,"OCR"),be()(),Re(14,"li",7)(15,"a",10),qe(16,"C\xe1mara"),be()(),Re(17,"li",7)(18,"a",11),qe(19,"Editor de Fotos"),be()(),Re(20,"li",7)(21,"a",12),qe(22,"Info Detecci\xf3n"),be()(),Re(23,"li",7)(24,"a",13),qe(25,"Doc Firestore"),be()(),Re(26,"li",7)(27,"a",14),qe(28,"Egresado Firestore"),be()(),Re(29,"li",7)(30,"a",15),qe(31,"Image Storage"),be()()()()()(),Re(32,"div",16),va(33,"router-outlet"),be()),2&r&&(Nt(9),zt("routerLinkActiveOptions",Ea(8,Qu)),Nt(3),zt("routerLinkActiveOptions",Ea(9,Qu)),Nt(3),zt("routerLinkActiveOptions",Ea(10,Qu)),Nt(3),zt("routerLinkActiveOptions",Ea(11,Qu)),Nt(3),zt("routerLinkActiveOptions",Ea(12,Qu)),Nt(3),zt("routerLinkActiveOptions",Ea(13,Qu)),Nt(3),zt("routerLinkActiveOptions",Ea(14,Qu)),Nt(3),zt("routerLinkActiveOptions",Ea(15,Qu)))},dependencies:[fC,ag,xk],styles:[".navbar-dark[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%], .navbar-dark[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#fff}.navbar-dark[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#ddd}.active-link[_ngcontent-%COMP%]{color:gold!important}.container[_ngcontent-%COMP%]{margin-top:20px}"]})}return n})();const dne_firebase={apiKey:"AIzaSyDHRY4yM_VpnWgS03rzE23qSpFXGtHz7PU",authDomain:"app-web-gda-core.firebaseapp.com",projectId:"app-web-gda-core",storageBucket:"app-web-gda-core.appspot.com",messagingSenderId:"639073132209",appId:"1:639073132209:web:d2a7dc9cb22b7a7b660c90"};let hne=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=ri({type:n,bootstrap:[lne]});static#n=this.\u0275inj=Ie({imports:[D5,cne,uO,YZ,nK,MK.initializeApp(dne_firebase),aee,FK]})}return n})();b5().bootstrapModule(hne).catch(n=>console.error(n))},61:function(lt){lt.exports=function(){"use strict";function dt(x,I){var C=Object.keys(x);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(x);I&&(w=w.filter(function(Z){return Object.getOwnPropertyDescriptor(x,Z).enumerable})),C.push.apply(C,w)}return C}function ye(x){for(var I=1;I<arguments.length;I++){var C=null!=arguments[I]?arguments[I]:{};I%2?dt(Object(C),!0).forEach(function(w){rt(x,w,C[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(C)):dt(Object(C)).forEach(function(w){Object.defineProperty(x,w,Object.getOwnPropertyDescriptor(C,w))})}return x}function Ve(x){var I=function D(x,I){if("object"!=typeof x||!x)return x;var C=x[Symbol.toPrimitive];if(void 0!==C){var w=C.call(x,I||"default");if("object"!=typeof w)return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===I?String:Number)(x)}(x,"string");return"symbol"==typeof I?I:I+""}function Te(x){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(I){return typeof I}:function(I){return I&&"function"==typeof Symbol&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I})(x)}function je(x,I){for(var C=0;C<I.length;C++){var w=I[C];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(x,Ve(w.key),w)}}function rt(x,I,C){return(I=Ve(I))in x?Object.defineProperty(x,I,{value:C,enumerable:!0,configurable:!0,writable:!0}):x[I]=C,x}function yt(x){return function nt(x){if(Array.isArray(x))return Ye(x)}(x)||function fe(x){if(typeof Symbol<"u"&&null!=x[Symbol.iterator]||null!=x["@@iterator"])return Array.from(x)}(x)||function xe(x,I){if(x){if("string"==typeof x)return Ye(x,I);var C=Object.prototype.toString.call(x).slice(8,-1);if("Object"===C&&x.constructor&&(C=x.constructor.name),"Map"===C||"Set"===C)return Array.from(x);if("Arguments"===C||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return Ye(x,I)}}(x)||function Dt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(x,I){(null==I||I>x.length)&&(I=x.length);for(var C=0,w=new Array(I);C<I;C++)w[C]=x[C];return w}var Ot=typeof window<"u"&&typeof window.document<"u",Gt=Ot?window:{},wt=!(!Ot||!Gt.document.documentElement)&&"ontouchstart"in Gt.document.documentElement,gt=!!Ot&&"PointerEvent"in Gt,He="cropper",an="n",Xt="ne",we="nw",tn="se",Jt="sw",Qn="".concat(He,"-crop"),vr="".concat(He,"-disabled"),ue="".concat(He,"-hidden"),Se="".concat(He,"-hide"),Ge="".concat(He,"-invisible"),$="".concat(He,"-modal"),G="".concat(He,"-move"),te="".concat(He,"Action"),ce="".concat(He,"Preview"),Ce="crop",kt="crop",ze="cropend",st="cropmove",Pt="cropstart",Dn="dblclick",Fn=gt?"pointerdown":wt?"touchstart":"mousedown",gr=gt?"pointermove":wt?"touchmove":"mousemove",Er=gt?"pointerup pointercancel":wt?"touchend touchcancel":"mouseup",$n="zoom",Mn="image/jpeg",jr=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Or=/^data:/,bs=/^data:image\/jpeg;base64,/,kr=/^img|canvas$/i,wi={viewMode:0,dragMode:Ce,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Ti=Number.isNaN||Gt.isNaN;function _t(x){return"number"==typeof x&&!Ti(x)}var To=function(I){return I>0&&I<1/0};function us(x){return typeof x>"u"}function zi(x){return"object"===Te(x)&&null!==x}var Jr=Object.prototype.hasOwnProperty;function bi(x){if(!zi(x))return!1;try{var I=x.constructor,C=I.prototype;return I&&C&&Jr.call(C,"isPrototypeOf")}catch{return!1}}function _n(x){return"function"==typeof x}var bo=Array.prototype.slice;function $r(x){return Array.from?Array.from(x):bo.call(x)}function ln(x,I){return x&&_n(I)&&(Array.isArray(x)||_t(x.length)?$r(x).forEach(function(C,w){I.call(x,C,w,x)}):zi(x)&&Object.keys(x).forEach(function(C){I.call(x,x[C],C,x)})),x}var En=Object.assign||function(I){for(var C=arguments.length,w=new Array(C>1?C-1:0),Z=1;Z<C;Z++)w[Z-1]=arguments[Z];return zi(I)&&w.length>0&&w.forEach(function(F){zi(F)&&Object.keys(F).forEach(function(W){I[W]=F[W]})}),I},Ha=/\.\d*(?:0|9){12}\d*$/;function Gi(x){var I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return Ha.test(x)?Math.round(x*I)/I:x}var ra=/^width|height|left|top|marginLeft|marginTop$/;function Hr(x,I){var C=x.style;ln(I,function(w,Z){ra.test(Z)&&_t(w)&&(w="".concat(w,"px")),C[Z]=w})}function P(x,I){if(I){if(_t(x.length))return void ln(x,function(w){P(w,I)});if(x.classList)return void x.classList.add(I);var C=x.className.trim();C?C.indexOf(I)<0&&(x.className="".concat(C," ").concat(I)):x.className=I}}function L(x,I){if(I){if(_t(x.length))return void ln(x,function(C){L(C,I)});if(x.classList)return void x.classList.remove(I);x.className.indexOf(I)>=0&&(x.className=x.className.replace(I,""))}}function ve(x,I,C){if(I){if(_t(x.length))return void ln(x,function(w){ve(w,I,C)});C?P(x,I):L(x,I)}}var ne=/([a-z\d])([A-Z])/g;function me(x){return x.replace(ne,"$1-$2").toLowerCase()}function ht(x,I){return zi(x[I])?x[I]:x.dataset?x.dataset[I]:x.getAttribute("data-".concat(me(I)))}function un(x,I,C){zi(C)?x[I]=C:x.dataset?x.dataset[I]=C:x.setAttribute("data-".concat(me(I)),C)}var Ir=/\s\s*/,sr=function(){var x=!1;if(Ot){var I=!1,C=function(){},w=Object.defineProperty({},"once",{get:function(){return x=!0,I},set:function(F){I=F}});Gt.addEventListener("test",C,w),Gt.removeEventListener("test",C,w)}return x}();function Ze(x,I,C){var w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},Z=C;I.trim().split(Ir).forEach(function(F){if(!sr){var W=x.listeners;W&&W[F]&&W[F][C]&&(Z=W[F][C],delete W[F][C],0===Object.keys(W[F]).length&&delete W[F],0===Object.keys(W).length&&delete x.listeners)}x.removeEventListener(F,Z,w)})}function cn(x,I,C){var w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},Z=C;I.trim().split(Ir).forEach(function(F){if(w.once&&!sr){var W=x.listeners,z=void 0===W?{}:W;Z=function(){delete z[F][C],x.removeEventListener(F,Z,w);for(var Ie=arguments.length,pe=new Array(Ie),Ee=0;Ee<Ie;Ee++)pe[Ee]=arguments[Ee];C.apply(x,pe)},z[F]||(z[F]={}),z[F][C]&&x.removeEventListener(F,z[F][C],w),z[F][C]=Z,x.listeners=z}x.addEventListener(F,Z,w)})}function dn(x,I,C){var w;return _n(Event)&&_n(CustomEvent)?w=new CustomEvent(I,{detail:C,bubbles:!0,cancelable:!0}):(w=document.createEvent("CustomEvent")).initCustomEvent(I,!0,!0,C),x.dispatchEvent(w)}function Cs(x){var I=x.getBoundingClientRect();return{left:I.left+(window.pageXOffset-document.documentElement.clientLeft),top:I.top+(window.pageYOffset-document.documentElement.clientTop)}}var eo=Gt.location,bn=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Et(x){var I=x.match(bn);return null!==I&&(I[1]!==eo.protocol||I[2]!==eo.hostname||I[3]!==eo.port)}function cs(x){var I="timestamp=".concat((new Date).getTime());return x+(-1===x.indexOf("?")?"?":"&")+I}function ls(x){var I=x.rotate,C=x.scaleX,w=x.scaleY,Z=x.translateX,F=x.translateY,W=[];_t(Z)&&0!==Z&&W.push("translateX(".concat(Z,"px)")),_t(F)&&0!==F&&W.push("translateY(".concat(F,"px)")),_t(I)&&0!==I&&W.push("rotate(".concat(I,"deg)")),_t(C)&&1!==C&&W.push("scaleX(".concat(C,")")),_t(w)&&1!==w&&W.push("scaleY(".concat(w,")"));var z=W.length?W.join(" "):"none";return{WebkitTransform:z,msTransform:z,transform:z}}function Ci(x,I){var C=x.pageX,w=x.pageY,Z={endX:C,endY:w};return I?Z:ye({startX:C,startY:w},Z)}function K(x){var I=x.aspectRatio,C=x.height,w=x.width,Z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",F=To(w),W=To(C);if(F&&W){var z=C*I;"contain"===Z&&z>w||"cover"===Z&&z<w?C=w/I:w=C*I}else F?C=w/I:W&&(w=C*I);return{width:w,height:C}}var St=String.fromCharCode;var $t=/^data:.*,/;function Di(x){var C,I=new DataView(x);try{var w,Z,F;if(255===I.getUint8(0)&&216===I.getUint8(1))for(var W=I.byteLength,z=2;z+1<W;){if(255===I.getUint8(z)&&225===I.getUint8(z+1)){Z=z;break}z+=1}if(Z){var Ie=Z+10;if("Exif"===function xt(x,I,C){var w="";C+=I;for(var Z=I;Z<C;Z+=1)w+=St(x.getUint8(Z));return w}(I,Z+4,4)){var pe=I.getUint16(Ie);if(((w=18761===pe)||19789===pe)&&42===I.getUint16(Ie+2,w)){var Ee=I.getUint32(Ie+4,w);Ee>=8&&(F=Ie+Ee)}}}if(F){var nn,Ht,Le=I.getUint16(F,w);for(Ht=0;Ht<Le;Ht+=1)if(274===I.getUint16(nn=F+12*Ht+2,w)){C=I.getUint16(nn+=8,w),I.setUint16(nn,1,w);break}}}catch{C=1}return C}var gl={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var I=this.element,C=this.options,w=this.container,Z=this.cropper,F=Number(C.minContainerWidth),W=Number(C.minContainerHeight);P(Z,ue),L(I,ue);var z={width:Math.max(w.offsetWidth,F>=0?F:200),height:Math.max(w.offsetHeight,W>=0?W:100)};this.containerData=z,Hr(Z,{width:z.width,height:z.height}),P(I,ue),L(Z,ue)},initCanvas:function(){var I=this.containerData,C=this.imageData,w=this.options.viewMode,Z=Math.abs(C.rotate)%180==90,F=Z?C.naturalHeight:C.naturalWidth,W=Z?C.naturalWidth:C.naturalHeight,z=F/W,Be=I.width,Ie=I.height;I.height*z>I.width?3===w?Be=I.height*z:Ie=I.width/z:3===w?Ie=I.width/z:Be=I.height*z;var pe={aspectRatio:z,naturalWidth:F,naturalHeight:W,width:Be,height:Ie};this.canvasData=pe,this.limited=1===w||2===w,this.limitCanvas(!0,!0),pe.width=Math.min(Math.max(pe.width,pe.minWidth),pe.maxWidth),pe.height=Math.min(Math.max(pe.height,pe.minHeight),pe.maxHeight),pe.left=(I.width-pe.width)/2,pe.top=(I.height-pe.height)/2,pe.oldLeft=pe.left,pe.oldTop=pe.top,this.initialCanvasData=En({},pe)},limitCanvas:function(I,C){var w=this.options,Z=this.containerData,F=this.canvasData,W=this.cropBoxData,z=w.viewMode,Be=F.aspectRatio,Ie=this.cropped&&W;if(I){var pe=Number(w.minCanvasWidth)||0,Ee=Number(w.minCanvasHeight)||0;z>1?(pe=Math.max(pe,Z.width),Ee=Math.max(Ee,Z.height),3===z&&(Ee*Be>pe?pe=Ee*Be:Ee=pe/Be)):z>0&&(pe?pe=Math.max(pe,Ie?W.width:0):Ee?Ee=Math.max(Ee,Ie?W.height:0):Ie&&((Ee=W.height)*Be>(pe=W.width)?pe=Ee*Be:Ee=pe/Be));var Le=K({aspectRatio:Be,width:pe,height:Ee});Ee=Le.height,F.minWidth=pe=Le.width,F.minHeight=Ee,F.maxWidth=1/0,F.maxHeight=1/0}if(C)if(z>(Ie?0:1)){var nn=Z.width-F.width,Ht=Z.height-F.height;F.minLeft=Math.min(0,nn),F.minTop=Math.min(0,Ht),F.maxLeft=Math.max(0,nn),F.maxTop=Math.max(0,Ht),Ie&&this.limited&&(F.minLeft=Math.min(W.left,W.left+(W.width-F.width)),F.minTop=Math.min(W.top,W.top+(W.height-F.height)),F.maxLeft=W.left,F.maxTop=W.top,2===z&&(F.width>=Z.width&&(F.minLeft=Math.min(0,nn),F.maxLeft=Math.max(0,nn)),F.height>=Z.height&&(F.minTop=Math.min(0,Ht),F.maxTop=Math.max(0,Ht))))}else F.minLeft=-F.width,F.minTop=-F.height,F.maxLeft=Z.width,F.maxTop=Z.height},renderCanvas:function(I,C){var w=this.canvasData,Z=this.imageData;if(C){var F=function ie(x){var I=x.width,C=x.height,w=x.degree;if(90==(w=Math.abs(w)%180))return{width:C,height:I};var Z=w%90*Math.PI/180,F=Math.sin(Z),W=Math.cos(Z),z=I*W+C*F,Be=I*F+C*W;return w>90?{width:Be,height:z}:{width:z,height:Be}}({width:Z.naturalWidth*Math.abs(Z.scaleX||1),height:Z.naturalHeight*Math.abs(Z.scaleY||1),degree:Z.rotate||0}),W=F.width,z=F.height,Be=w.width*(W/w.naturalWidth),Ie=w.height*(z/w.naturalHeight);w.left-=(Be-w.width)/2,w.top-=(Ie-w.height)/2,w.width=Be,w.height=Ie,w.aspectRatio=W/z,w.naturalWidth=W,w.naturalHeight=z,this.limitCanvas(!0,!1)}(w.width>w.maxWidth||w.width<w.minWidth)&&(w.left=w.oldLeft),(w.height>w.maxHeight||w.height<w.minHeight)&&(w.top=w.oldTop),w.width=Math.min(Math.max(w.width,w.minWidth),w.maxWidth),w.height=Math.min(Math.max(w.height,w.minHeight),w.maxHeight),this.limitCanvas(!1,!0),w.left=Math.min(Math.max(w.left,w.minLeft),w.maxLeft),w.top=Math.min(Math.max(w.top,w.minTop),w.maxTop),w.oldLeft=w.left,w.oldTop=w.top,Hr(this.canvas,En({width:w.width,height:w.height},ls({translateX:w.left,translateY:w.top}))),this.renderImage(I),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(I){var C=this.canvasData,w=this.imageData,Z=w.naturalWidth*(C.width/C.naturalWidth),F=w.naturalHeight*(C.height/C.naturalHeight);En(w,{width:Z,height:F,left:(C.width-Z)/2,top:(C.height-F)/2}),Hr(this.image,En({width:w.width,height:w.height},ls(En({translateX:w.left,translateY:w.top},w)))),I&&this.output()},initCropBox:function(){var I=this.options,C=this.canvasData,w=I.aspectRatio||I.initialAspectRatio,Z=Number(I.autoCropArea)||.8,F={width:C.width,height:C.height};w&&(C.height*w>C.width?F.height=F.width/w:F.width=F.height*w),this.cropBoxData=F,this.limitCropBox(!0,!0),F.width=Math.min(Math.max(F.width,F.minWidth),F.maxWidth),F.height=Math.min(Math.max(F.height,F.minHeight),F.maxHeight),F.width=Math.max(F.minWidth,F.width*Z),F.height=Math.max(F.minHeight,F.height*Z),F.left=C.left+(C.width-F.width)/2,F.top=C.top+(C.height-F.height)/2,F.oldLeft=F.left,F.oldTop=F.top,this.initialCropBoxData=En({},F)},limitCropBox:function(I,C){var w=this.options,Z=this.containerData,F=this.canvasData,W=this.cropBoxData,z=this.limited,Be=w.aspectRatio;if(I){var Ie=Number(w.minCropBoxWidth)||0,pe=Number(w.minCropBoxHeight)||0,Ee=z?Math.min(Z.width,F.width,F.width+F.left,Z.width-F.left):Z.width,Le=z?Math.min(Z.height,F.height,F.height+F.top,Z.height-F.top):Z.height;Ie=Math.min(Ie,Z.width),pe=Math.min(pe,Z.height),Be&&(Ie&&pe?pe*Be>Ie?pe=Ie/Be:Ie=pe*Be:Ie?pe=Ie/Be:pe&&(Ie=pe*Be),Le*Be>Ee?Le=Ee/Be:Ee=Le*Be),W.minWidth=Math.min(Ie,Ee),W.minHeight=Math.min(pe,Le),W.maxWidth=Ee,W.maxHeight=Le}C&&(z?(W.minLeft=Math.max(0,F.left),W.minTop=Math.max(0,F.top),W.maxLeft=Math.min(Z.width,F.left+F.width)-W.width,W.maxTop=Math.min(Z.height,F.top+F.height)-W.height):(W.minLeft=0,W.minTop=0,W.maxLeft=Z.width-W.width,W.maxTop=Z.height-W.height))},renderCropBox:function(){var I=this.options,C=this.containerData,w=this.cropBoxData;(w.width>w.maxWidth||w.width<w.minWidth)&&(w.left=w.oldLeft),(w.height>w.maxHeight||w.height<w.minHeight)&&(w.top=w.oldTop),w.width=Math.min(Math.max(w.width,w.minWidth),w.maxWidth),w.height=Math.min(Math.max(w.height,w.minHeight),w.maxHeight),this.limitCropBox(!1,!0),w.left=Math.min(Math.max(w.left,w.minLeft),w.maxLeft),w.top=Math.min(Math.max(w.top,w.minTop),w.maxTop),w.oldLeft=w.left,w.oldTop=w.top,I.movable&&I.cropBoxMovable&&un(this.face,te,w.width>=C.width&&w.height>=C.height?"move":"all"),Hr(this.cropBox,En({width:w.width,height:w.height},ls({translateX:w.left,translateY:w.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),dn(this.element,kt,this.getData())}},In={initPreview:function(){var I=this.element,C=this.crossOrigin,w=this.options.preview,Z=C?this.crossOriginUrl:this.url,F=I.alt||"The image to preview",W=document.createElement("img");if(C&&(W.crossOrigin=C),W.src=Z,W.alt=F,this.viewBox.appendChild(W),this.viewBoxImage=W,w){var z=w;"string"==typeof w?z=I.ownerDocument.querySelectorAll(w):w.querySelector&&(z=[w]),this.previews=z,ln(z,function(Be){var Ie=document.createElement("img");un(Be,ce,{width:Be.offsetWidth,height:Be.offsetHeight,html:Be.innerHTML}),C&&(Ie.crossOrigin=C),Ie.src=Z,Ie.alt=F,Ie.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',Be.innerHTML="",Be.appendChild(Ie)})}},resetPreview:function(){ln(this.previews,function(I){var C=ht(I,ce);Hr(I,{width:C.width,height:C.height}),I.innerHTML=C.html,function bt(x,I){if(zi(x[I]))try{delete x[I]}catch{x[I]=void 0}else if(x.dataset)try{delete x.dataset[I]}catch{x.dataset[I]=void 0}else x.removeAttribute("data-".concat(me(I)))}(I,ce)})},preview:function(){var I=this.imageData,C=this.canvasData,w=this.cropBoxData,Z=w.width,F=w.height,W=I.width,z=I.height,Be=w.left-C.left-I.left,Ie=w.top-C.top-I.top;!this.cropped||this.disabled||(Hr(this.viewBoxImage,En({width:W,height:z},ls(En({translateX:-Be,translateY:-Ie},I)))),ln(this.previews,function(pe){var Ee=ht(pe,ce),Le=Ee.width,nn=Ee.height,Ht=Le,An=nn,hn=1;Z&&(An=F*(hn=Le/Z)),F&&An>nn&&(Ht=Z*(hn=nn/F),An=nn),Hr(pe,{width:Ht,height:An}),Hr(pe.getElementsByTagName("img")[0],En({width:W*hn,height:z*hn},ls(En({translateX:-Be*hn,translateY:-Ie*hn},I))))}))}},Wh={bind:function(){var I=this.element,C=this.options,w=this.cropper;_n(C.cropstart)&&cn(I,Pt,C.cropstart),_n(C.cropmove)&&cn(I,st,C.cropmove),_n(C.cropend)&&cn(I,ze,C.cropend),_n(C.crop)&&cn(I,kt,C.crop),_n(C.zoom)&&cn(I,$n,C.zoom),cn(w,Fn,this.onCropStart=this.cropStart.bind(this)),C.zoomable&&C.zoomOnWheel&&cn(w,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),C.toggleDragModeOnDblclick&&cn(w,Dn,this.onDblclick=this.dblclick.bind(this)),cn(I.ownerDocument,gr,this.onCropMove=this.cropMove.bind(this)),cn(I.ownerDocument,Er,this.onCropEnd=this.cropEnd.bind(this)),C.responsive&&cn(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var I=this.element,C=this.options,w=this.cropper;_n(C.cropstart)&&Ze(I,Pt,C.cropstart),_n(C.cropmove)&&Ze(I,st,C.cropmove),_n(C.cropend)&&Ze(I,ze,C.cropend),_n(C.crop)&&Ze(I,kt,C.crop),_n(C.zoom)&&Ze(I,$n,C.zoom),Ze(w,Fn,this.onCropStart),C.zoomable&&C.zoomOnWheel&&Ze(w,"wheel",this.onWheel,{passive:!1,capture:!0}),C.toggleDragModeOnDblclick&&Ze(w,Dn,this.onDblclick),Ze(I.ownerDocument,gr,this.onCropMove),Ze(I.ownerDocument,Er,this.onCropEnd),C.responsive&&Ze(window,"resize",this.onResize)}},Ga={resize:function(){if(!this.disabled){var z,Be,I=this.options,C=this.container,w=this.containerData,Z=C.offsetWidth/w.width,F=C.offsetHeight/w.height,W=Math.abs(Z-1)>Math.abs(F-1)?Z:F;1!==W&&(I.restore&&(z=this.getCanvasData(),Be=this.getCropBoxData()),this.render(),I.restore&&(this.setCanvasData(ln(z,function(Ie,pe){z[pe]=Ie*W})),this.setCropBoxData(ln(Be,function(Ie,pe){Be[pe]=Ie*W}))))}},dblclick:function(){this.disabled||"none"===this.options.dragMode||this.setDragMode(function V(x,I){return x.classList?x.classList.contains(I):x.className.indexOf(I)>-1}(this.dragBox,Qn)?"move":Ce)},wheel:function(I){var C=this,w=Number(this.options.wheelZoomRatio)||.1,Z=1;this.disabled||(I.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){C.wheeling=!1},50),I.deltaY?Z=I.deltaY>0?1:-1:I.wheelDelta?Z=-I.wheelDelta/120:I.detail&&(Z=I.detail>0?1:-1),this.zoom(-Z*w,I)))},cropStart:function(I){var C=I.buttons,w=I.button;if(!(this.disabled||("mousedown"===I.type||"pointerdown"===I.type&&"mouse"===I.pointerType)&&(_t(C)&&1!==C||_t(w)&&0!==w||I.ctrlKey))){var W,Z=this.options,F=this.pointers;I.changedTouches?ln(I.changedTouches,function(z){F[z.identifier]=Ci(z)}):F[I.pointerId||0]=Ci(I),W=Object.keys(F).length>1&&Z.zoomable&&Z.zoomOnTouch?"zoom":ht(I.target,te),jr.test(W)&&!1!==dn(this.element,Pt,{originalEvent:I,action:W})&&(I.preventDefault(),this.action=W,this.cropping=!1,"crop"===W&&(this.cropping=!0,P(this.dragBox,$)))}},cropMove:function(I){var C=this.action;if(!this.disabled&&C){var w=this.pointers;I.preventDefault(),!1!==dn(this.element,st,{originalEvent:I,action:C})&&(I.changedTouches?ln(I.changedTouches,function(Z){En(w[Z.identifier]||{},Ci(Z,!0))}):En(w[I.pointerId||0]||{},Ci(I,!0)),this.change(I))}},cropEnd:function(I){if(!this.disabled){var C=this.action,w=this.pointers;I.changedTouches?ln(I.changedTouches,function(Z){delete w[Z.identifier]}):delete w[I.pointerId||0],C&&(I.preventDefault(),Object.keys(w).length||(this.action=""),this.cropping&&(this.cropping=!1,ve(this.dragBox,$,this.cropped&&this.options.modal)),dn(this.element,ze,{originalEvent:I,action:C}))}}},Mm={change:function(I){var li,w=this.canvasData,Z=this.containerData,F=this.cropBoxData,W=this.pointers,z=this.action,Be=this.options.aspectRatio,Ie=F.left,pe=F.top,Ee=F.width,Le=F.height,nn=Ie+Ee,Ht=pe+Le,An=0,hn=0,or=Z.width,Hn=Z.height,ft=!0;!Be&&I.shiftKey&&(Be=Ee&&Le?Ee/Le:1),this.limited&&(hn=F.minTop,or=(An=F.minLeft)+Math.min(Z.width,w.width,w.left+w.width),Hn=hn+Math.min(Z.height,w.height,w.top+w.height));var ei=W[Object.keys(W)[0]],Fe={x:ei.endX-ei.startX,y:ei.endY-ei.startY},wn=function(Kt){switch(Kt){case"e":nn+Fe.x>or&&(Fe.x=or-nn);break;case"w":Ie+Fe.x<An&&(Fe.x=An-Ie);break;case an:pe+Fe.y<hn&&(Fe.y=hn-pe);break;case"s":Ht+Fe.y>Hn&&(Fe.y=Hn-Ht)}};switch(z){case"all":Ie+=Fe.x,pe+=Fe.y;break;case"e":if(Fe.x>=0&&(nn>=or||Be&&(pe<=hn||Ht>=Hn))){ft=!1;break}wn("e"),(Ee+=Fe.x)<0&&(z="w",Ie-=Ee=-Ee),Be&&(pe+=(F.height-(Le=Ee/Be))/2);break;case an:if(Fe.y<=0&&(pe<=hn||Be&&(Ie<=An||nn>=or))){ft=!1;break}wn(an),pe+=Fe.y,(Le-=Fe.y)<0&&(z="s",pe-=Le=-Le),Be&&(Ie+=(F.width-(Ee=Le*Be))/2);break;case"w":if(Fe.x<=0&&(Ie<=An||Be&&(pe<=hn||Ht>=Hn))){ft=!1;break}wn("w"),Ie+=Fe.x,(Ee-=Fe.x)<0&&(z="e",Ie-=Ee=-Ee),Be&&(pe+=(F.height-(Le=Ee/Be))/2);break;case"s":if(Fe.y>=0&&(Ht>=Hn||Be&&(Ie<=An||nn>=or))){ft=!1;break}wn("s"),(Le+=Fe.y)<0&&(z=an,pe-=Le=-Le),Be&&(Ie+=(F.width-(Ee=Le*Be))/2);break;case Xt:if(Be){if(Fe.y<=0&&(pe<=hn||nn>=or)){ft=!1;break}wn(an),pe+=Fe.y,Ee=(Le-=Fe.y)*Be}else wn(an),wn("e"),Fe.x>=0?nn<or?Ee+=Fe.x:Fe.y<=0&&pe<=hn&&(ft=!1):Ee+=Fe.x,Fe.y<=0?pe>hn&&(Le-=Fe.y,pe+=Fe.y):(Le-=Fe.y,pe+=Fe.y);Ee<0&&Le<0?(z=Jt,pe-=Le=-Le,Ie-=Ee=-Ee):Ee<0?(z=we,Ie-=Ee=-Ee):Le<0&&(z=tn,pe-=Le=-Le);break;case we:if(Be){if(Fe.y<=0&&(pe<=hn||Ie<=An)){ft=!1;break}wn(an),pe+=Fe.y,Ie+=F.width-(Ee=(Le-=Fe.y)*Be)}else wn(an),wn("w"),Fe.x<=0?Ie>An?(Ee-=Fe.x,Ie+=Fe.x):Fe.y<=0&&pe<=hn&&(ft=!1):(Ee-=Fe.x,Ie+=Fe.x),Fe.y<=0?pe>hn&&(Le-=Fe.y,pe+=Fe.y):(Le-=Fe.y,pe+=Fe.y);Ee<0&&Le<0?(z=tn,pe-=Le=-Le,Ie-=Ee=-Ee):Ee<0?(z=Xt,Ie-=Ee=-Ee):Le<0&&(z=Jt,pe-=Le=-Le);break;case Jt:if(Be){if(Fe.x<=0&&(Ie<=An||Ht>=Hn)){ft=!1;break}wn("w"),Ie+=Fe.x,Le=(Ee-=Fe.x)/Be}else wn("s"),wn("w"),Fe.x<=0?Ie>An?(Ee-=Fe.x,Ie+=Fe.x):Fe.y>=0&&Ht>=Hn&&(ft=!1):(Ee-=Fe.x,Ie+=Fe.x),Fe.y>=0?Ht<Hn&&(Le+=Fe.y):Le+=Fe.y;Ee<0&&Le<0?(z=Xt,pe-=Le=-Le,Ie-=Ee=-Ee):Ee<0?(z=tn,Ie-=Ee=-Ee):Le<0&&(z=we,pe-=Le=-Le);break;case tn:if(Be){if(Fe.x>=0&&(nn>=or||Ht>=Hn)){ft=!1;break}wn("e"),Le=(Ee+=Fe.x)/Be}else wn("s"),wn("e"),Fe.x>=0?nn<or?Ee+=Fe.x:Fe.y>=0&&Ht>=Hn&&(ft=!1):Ee+=Fe.x,Fe.y>=0?Ht<Hn&&(Le+=Fe.y):Le+=Fe.y;Ee<0&&Le<0?(z=we,pe-=Le=-Le,Ie-=Ee=-Ee):Ee<0?(z=Jt,Ie-=Ee=-Ee):Le<0&&(z=Xt,pe-=Le=-Le);break;case"move":this.move(Fe.x,Fe.y),ft=!1;break;case"zoom":this.zoom(function za(x){var I=ye({},x),C=0;return ln(x,function(w,Z){delete I[Z],ln(I,function(F){var W=Math.abs(w.startX-F.startX),z=Math.abs(w.startY-F.startY),Be=Math.abs(w.endX-F.endX),Ie=Math.abs(w.endY-F.endY),pe=Math.sqrt(W*W+z*z),Le=(Math.sqrt(Be*Be+Ie*Ie)-pe)/pe;Math.abs(Le)>Math.abs(C)&&(C=Le)})}),C}(W),I),ft=!1;break;case"crop":if(!Fe.x||!Fe.y){ft=!1;break}li=Cs(this.cropper),Ie=ei.startX-li.left,pe=ei.startY-li.top,Ee=F.minWidth,Le=F.minHeight,Fe.x>0?z=Fe.y>0?tn:Xt:Fe.x<0&&(Ie-=Ee,z=Fe.y>0?Jt:we),Fe.y<0&&(pe-=Le),this.cropped||(L(this.cropBox,ue),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}ft&&(F.width=Ee,F.height=Le,F.left=Ie,F.top=pe,this.action=z,this.renderCropBox()),ln(W,function(ar){ar.startX=ar.endX,ar.startY=ar.endY})}},ml={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&P(this.dragBox,$),L(this.cropBox,ue),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=En({},this.initialImageData),this.canvasData=En({},this.initialCanvasData),this.cropBoxData=En({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(En(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),L(this.dragBox,$),P(this.cropBox,ue)),this},replace:function(I){var C=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&I&&(this.isImg&&(this.element.src=I),C?(this.url=I,this.image.src=I,this.ready&&(this.viewBoxImage.src=I,ln(this.previews,function(w){w.getElementsByTagName("img")[0].src=I}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(I))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,L(this.cropper,vr)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,P(this.cropper,vr)),this},destroy:function(){var I=this.element;return I[He]?(I[He]=void 0,this.isImg&&this.replaced&&(I.src=this.originalUrl),this.uncreate(),this):this},move:function(I){var C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I,w=this.canvasData,Z=w.left,F=w.top;return this.moveTo(us(I)?I:Z+Number(I),us(C)?C:F+Number(C))},moveTo:function(I){var C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I,w=this.canvasData,Z=!1;return I=Number(I),C=Number(C),this.ready&&!this.disabled&&this.options.movable&&(_t(I)&&(w.left=I,Z=!0),_t(C)&&(w.top=C,Z=!0),Z&&this.renderCanvas(!0)),this},zoom:function(I,C){var w=this.canvasData;return I=Number(I),this.zoomTo(w.width*(I=I<0?1/(1-I):1+I)/w.naturalWidth,null,C)},zoomTo:function(I,C,w){var Z=this.options,F=this.canvasData,W=F.width,z=F.height,Be=F.naturalWidth,Ie=F.naturalHeight;if((I=Number(I))>=0&&this.ready&&!this.disabled&&Z.zoomable){var pe=Be*I,Ee=Ie*I;if(!1===dn(this.element,$n,{ratio:I,oldRatio:W/Be,originalEvent:w}))return this;if(w){var Le=this.pointers,nn=Cs(this.cropper),Ht=Le&&Object.keys(Le).length?function O(x){var I=0,C=0,w=0;return ln(x,function(Z){I+=Z.startX,C+=Z.startY,w+=1}),{pageX:I/=w,pageY:C/=w}}(Le):{pageX:w.pageX,pageY:w.pageY};F.left-=(Ht.pageX-nn.left-F.left)/W*(pe-W),F.top-=(Ht.pageY-nn.top-F.top)/z*(Ee-z)}else bi(C)&&_t(C.x)&&_t(C.y)?(F.left-=(C.x-F.left)/W*(pe-W),F.top-=(C.y-F.top)/z*(Ee-z)):(F.left-=(pe-W)/2,F.top-=(Ee-z)/2);F.width=pe,F.height=Ee,this.renderCanvas(!0)}return this},rotate:function(I){return this.rotateTo((this.imageData.rotate||0)+Number(I))},rotateTo:function(I){return _t(I=Number(I))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=I%360,this.renderCanvas(!0,!0)),this},scaleX:function(I){var C=this.imageData.scaleY;return this.scale(I,_t(C)?C:1)},scaleY:function(I){var C=this.imageData.scaleX;return this.scale(_t(C)?C:1,I)},scale:function(I){var C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I,w=this.imageData,Z=!1;return I=Number(I),C=Number(C),this.ready&&!this.disabled&&this.options.scalable&&(_t(I)&&(w.scaleX=I,Z=!0),_t(C)&&(w.scaleY=C,Z=!0),Z&&this.renderCanvas(!0,!0)),this},getData:function(){var W,I=arguments.length>0&&void 0!==arguments[0]&&arguments[0],C=this.options,w=this.imageData,Z=this.canvasData,F=this.cropBoxData;if(this.ready&&this.cropped){var z=w.width/w.naturalWidth;if(ln(W={x:F.left-Z.left,y:F.top-Z.top,width:F.width,height:F.height},function(pe,Ee){W[Ee]=pe/z}),I){var Be=Math.round(W.y+W.height),Ie=Math.round(W.x+W.width);W.x=Math.round(W.x),W.y=Math.round(W.y),W.width=Ie-W.x,W.height=Be-W.y}}else W={x:0,y:0,width:0,height:0};return C.rotatable&&(W.rotate=w.rotate||0),C.scalable&&(W.scaleX=w.scaleX||1,W.scaleY=w.scaleY||1),W},setData:function(I){var C=this.options,w=this.imageData,Z=this.canvasData,F={};if(this.ready&&!this.disabled&&bi(I)){var W=!1;C.rotatable&&_t(I.rotate)&&I.rotate!==w.rotate&&(w.rotate=I.rotate,W=!0),C.scalable&&(_t(I.scaleX)&&I.scaleX!==w.scaleX&&(w.scaleX=I.scaleX,W=!0),_t(I.scaleY)&&I.scaleY!==w.scaleY&&(w.scaleY=I.scaleY,W=!0)),W&&this.renderCanvas(!0,!0);var z=w.width/w.naturalWidth;_t(I.x)&&(F.left=I.x*z+Z.left),_t(I.y)&&(F.top=I.y*z+Z.top),_t(I.width)&&(F.width=I.width*z),_t(I.height)&&(F.height=I.height*z),this.setCropBoxData(F)}return this},getContainerData:function(){return this.ready?En({},this.containerData):{}},getImageData:function(){return this.sized?En({},this.imageData):{}},getCanvasData:function(){var I=this.canvasData,C={};return this.ready&&ln(["left","top","width","height","naturalWidth","naturalHeight"],function(w){C[w]=I[w]}),C},setCanvasData:function(I){var C=this.canvasData,w=C.aspectRatio;return this.ready&&!this.disabled&&bi(I)&&(_t(I.left)&&(C.left=I.left),_t(I.top)&&(C.top=I.top),_t(I.width)?(C.width=I.width,C.height=I.width/w):_t(I.height)&&(C.height=I.height,C.width=I.height*w),this.renderCanvas(!0)),this},getCropBoxData:function(){var C,I=this.cropBoxData;return this.ready&&this.cropped&&(C={left:I.left,top:I.top,width:I.width,height:I.height}),C||{}},setCropBoxData:function(I){var Z,F,C=this.cropBoxData,w=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&bi(I)&&(_t(I.left)&&(C.left=I.left),_t(I.top)&&(C.top=I.top),_t(I.width)&&I.width!==C.width&&(Z=!0,C.width=I.width),_t(I.height)&&I.height!==C.height&&(F=!0,C.height=I.height),w&&(Z?C.height=C.width/w:F&&(C.width=C.height*w)),this.renderCropBox()),this},getCroppedCanvas:function(){var I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var C=this.canvasData,w=function Me(x,I,C,w){var Z=I.aspectRatio,F=I.naturalWidth,W=I.naturalHeight,z=I.rotate,Be=void 0===z?0:z,Ie=I.scaleX,pe=void 0===Ie?1:Ie,Ee=I.scaleY,Le=void 0===Ee?1:Ee,nn=C.aspectRatio,Ht=C.naturalWidth,An=C.naturalHeight,hn=w.fillColor,or=void 0===hn?"transparent":hn,Hn=w.imageSmoothingEnabled,ft=void 0===Hn||Hn,li=w.imageSmoothingQuality,ei=void 0===li?"low":li,Fe=w.maxWidth,wn=void 0===Fe?1/0:Fe,ar=w.maxHeight,Kt=void 0===ar?1/0:ar,ds=w.minWidth,Co=void 0===ds?0:ds,Ue=w.minHeight,di=void 0===Ue?0:Ue,ti=document.createElement("canvas"),zr=ti.getContext("2d"),qi=K({aspectRatio:nn,width:wn,height:Kt}),qa=K({aspectRatio:nn,width:Co,height:di},"cover"),no=Math.min(qi.width,Math.max(qa.width,Ht)),_l=Math.min(qi.height,Math.max(qa.height,An)),tc=K({aspectRatio:Z,width:wn,height:Kt}),Qh=K({aspectRatio:Z,width:Co,height:di},"cover"),nc=Math.min(tc.width,Math.max(Qh.width,F)),Yh=Math.min(tc.height,Math.max(Qh.height,W)),ro=[-nc/2,-Yh/2,nc,Yh];return ti.width=Gi(no),ti.height=Gi(_l),zr.fillStyle=or,zr.fillRect(0,0,no,_l),zr.save(),zr.translate(no/2,_l/2),zr.rotate(Be*Math.PI/180),zr.scale(pe,Le),zr.imageSmoothingEnabled=ft,zr.imageSmoothingQuality=ei,zr.drawImage.apply(zr,[x].concat(yt(ro.map(function(rc){return Math.floor(Gi(rc))})))),zr.restore(),ti}(this.image,this.imageData,C,I);if(!this.cropped)return w;var Z=this.getData(I.rounded),F=Z.x,W=Z.y,z=Z.width,Be=Z.height,Ie=w.width/Math.floor(C.naturalWidth);1!==Ie&&(F*=Ie,W*=Ie,z*=Ie,Be*=Ie);var pe=z/Be,Ee=K({aspectRatio:pe,width:I.maxWidth||1/0,height:I.maxHeight||1/0}),Le=K({aspectRatio:pe,width:I.minWidth||0,height:I.minHeight||0},"cover"),nn=K({aspectRatio:pe,width:I.width||(1!==Ie?w.width:z),height:I.height||(1!==Ie?w.height:Be)}),Ht=nn.width,An=nn.height;Ht=Math.min(Ee.width,Math.max(Le.width,Ht)),An=Math.min(Ee.height,Math.max(Le.height,An));var hn=document.createElement("canvas"),or=hn.getContext("2d");hn.width=Gi(Ht),hn.height=Gi(An),or.fillStyle=I.fillColor||"transparent",or.fillRect(0,0,Ht,An);var Hn=I.imageSmoothingEnabled,li=I.imageSmoothingQuality;or.imageSmoothingEnabled=void 0===Hn||Hn,li&&(or.imageSmoothingQuality=li);var Kt,ds,Co,Ue,di,ti,ei=w.width,Fe=w.height,wn=F,ar=W;wn<=-z||wn>ei?(wn=0,Kt=0,Co=0,di=0):wn<=0?(Co=-wn,wn=0,di=Kt=Math.min(ei,z+wn)):wn<=ei&&(Co=0,di=Kt=Math.min(z,ei-wn)),Kt<=0||ar<=-Be||ar>Fe?(ar=0,ds=0,Ue=0,ti=0):ar<=0?(Ue=-ar,ar=0,ti=ds=Math.min(Fe,Be+ar)):ar<=Fe&&(Ue=0,ti=ds=Math.min(Be,Fe-ar));var zr=[wn,ar,Kt,ds];if(di>0&&ti>0){var qi=Ht/z;zr.push(Co*qi,Ue*qi,di*qi,ti*qi)}return or.drawImage.apply(or,[w].concat(yt(zr.map(function(qa){return Math.floor(Gi(qa))})))),hn},setAspectRatio:function(I){var C=this.options;return!this.disabled&&!us(I)&&(C.aspectRatio=Math.max(0,I)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(I){var C=this.options,w=this.dragBox,Z=this.face;if(this.ready&&!this.disabled){var F=I===Ce,W=C.movable&&"move"===I;C.dragMode=I=F||W?I:"none",un(w,te,I),ve(w,Qn,F),ve(w,G,W),C.cropBoxMovable||(un(Z,te,I),ve(Z,Qn,F),ve(Z,G,W))}return this}},Zh=Gt.Cropper,Kh=function(){function x(I){var C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function q(x,I){if(!(x instanceof I))throw new TypeError("Cannot call a class as a function")}(this,x),!I||!kr.test(I.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=I,this.options=En({},wi,bi(C)&&C),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return function tt(x,I,C){return I&&je(x.prototype,I),C&&je(x,C),Object.defineProperty(x,"prototype",{writable:!1}),x}(x,[{key:"init",value:function(){var Z,C=this.element,w=C.tagName.toLowerCase();if(!C[He]){if(C[He]=this,"img"===w){if(this.isImg=!0,Z=C.getAttribute("src")||"",this.originalUrl=Z,!Z)return;Z=C.src}else"canvas"===w&&window.HTMLCanvasElement&&(Z=C.toDataURL());this.load(Z)}}},{key:"load",value:function(C){var w=this;if(C){this.url=C,this.imageData={};var Z=this.element,F=this.options;if(!F.rotatable&&!F.scalable&&(F.checkOrientation=!1),!F.checkOrientation||!window.ArrayBuffer)return void this.clone();if(Or.test(C))return void(bs.test(C)?this.read(function xn(x){var I=x.replace($t,""),C=atob(I),w=new ArrayBuffer(C.length),Z=new Uint8Array(w);return ln(Z,function(F,W){Z[W]=C.charCodeAt(W)}),w}(C)):this.clone());var W=new XMLHttpRequest,z=this.clone.bind(this);this.reloading=!0,this.xhr=W,W.onabort=z,W.onerror=z,W.ontimeout=z,W.onprogress=function(){W.getResponseHeader("content-type")!==Mn&&W.abort()},W.onload=function(){w.read(W.response)},W.onloadend=function(){w.reloading=!1,w.xhr=null},F.checkCrossOrigin&&Et(C)&&Z.crossOrigin&&(C=cs(C)),W.open("GET",C,!0),W.responseType="arraybuffer",W.withCredentials="use-credentials"===Z.crossOrigin,W.send()}}},{key:"read",value:function(C){var w=this.options,Z=this.imageData,F=Di(C),W=0,z=1,Be=1;if(F>1){this.url=function qt(x,I){for(var C=[],Z=new Uint8Array(x);Z.length>0;)C.push(St.apply(null,$r(Z.subarray(0,8192)))),Z=Z.subarray(8192);return"data:".concat(I,";base64,").concat(btoa(C.join("")))}(C,Mn);var Ie=function to(x){var I=0,C=1,w=1;switch(x){case 2:C=-1;break;case 3:I=-180;break;case 4:w=-1;break;case 5:I=90,w=-1;break;case 6:I=90;break;case 7:I=90,C=-1;break;case 8:I=-90}return{rotate:I,scaleX:C,scaleY:w}}(F);W=Ie.rotate,z=Ie.scaleX,Be=Ie.scaleY}w.rotatable&&(Z.rotate=W),w.scalable&&(Z.scaleX=z,Z.scaleY=Be),this.clone()}},{key:"clone",value:function(){var C=this.element,w=this.url,Z=C.crossOrigin,F=w;this.options.checkCrossOrigin&&Et(w)&&(Z||(Z="anonymous"),F=cs(w)),this.crossOrigin=Z,this.crossOriginUrl=F;var W=document.createElement("img");Z&&(W.crossOrigin=Z),W.src=F||w,W.alt=C.alt||"The image to crop",this.image=W,W.onload=this.start.bind(this),W.onerror=this.stop.bind(this),P(W,Se),C.parentNode.insertBefore(W,C.nextSibling)}},{key:"start",value:function(){var C=this,w=this.image;w.onload=null,w.onerror=null,this.sizing=!0;var Z=Gt.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Gt.navigator.userAgent),F=function(Ie,pe){En(C.imageData,{naturalWidth:Ie,naturalHeight:pe,aspectRatio:Ie/pe}),C.initialImageData=En({},C.imageData),C.sizing=!1,C.sized=!0,C.build()};if(!w.naturalWidth||Z){var W=document.createElement("img"),z=document.body||document.documentElement;this.sizingImage=W,W.onload=function(){F(W.width,W.height),Z||z.removeChild(W)},W.src=w.src,Z||(W.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",z.appendChild(W))}else F(w.naturalWidth,w.naturalHeight)}},{key:"stop",value:function(){var C=this.image;C.onload=null,C.onerror=null,C.parentNode.removeChild(C),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var C=this.element,w=this.options,Z=this.image,F=C.parentNode,W=document.createElement("div");W.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var z=W.querySelector(".".concat(He,"-container")),Be=z.querySelector(".".concat(He,"-canvas")),Ie=z.querySelector(".".concat(He,"-drag-box")),pe=z.querySelector(".".concat(He,"-crop-box")),Ee=pe.querySelector(".".concat(He,"-face"));this.container=F,this.cropper=z,this.canvas=Be,this.dragBox=Ie,this.cropBox=pe,this.viewBox=z.querySelector(".".concat(He,"-view-box")),this.face=Ee,Be.appendChild(Z),P(C,ue),F.insertBefore(z,C.nextSibling),L(Z,Se),this.initPreview(),this.bind(),w.initialAspectRatio=Math.max(0,w.initialAspectRatio)||NaN,w.aspectRatio=Math.max(0,w.aspectRatio)||NaN,w.viewMode=Math.max(0,Math.min(3,Math.round(w.viewMode)))||0,P(pe,ue),w.guides||P(pe.getElementsByClassName("".concat(He,"-dashed")),ue),w.center||P(pe.getElementsByClassName("".concat(He,"-center")),ue),w.background&&P(z,"".concat(He,"-bg")),w.highlight||P(Ee,Ge),w.cropBoxMovable&&(P(Ee,G),un(Ee,te,"all")),w.cropBoxResizable||(P(pe.getElementsByClassName("".concat(He,"-line")),ue),P(pe.getElementsByClassName("".concat(He,"-point")),ue)),this.render(),this.ready=!0,this.setDragMode(w.dragMode),w.autoCrop&&this.crop(),this.setData(w.data),_n(w.ready)&&cn(C,"ready",w.ready,{once:!0}),dn(C,"ready")}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var C=this.cropper.parentNode;C&&C.removeChild(this.cropper),L(this.element,ue)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Zh,x}},{key:"setDefaults",value:function(C){En(wi,bi(C)&&C)}}])}();return En(Kh.prototype,gl,In,Wh,Ga,Mm,ml),Kh}()},833:lt=>{lt.exports=function dt(){return!!(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}},303:lt=>{var dt=function(ye){"use strict";var q,D=Object.prototype,Ve=D.hasOwnProperty,Te=Object.defineProperty||function(ue,Se,Ge){ue[Se]=Ge.value},je="function"==typeof Symbol?Symbol:{},tt=je.iterator||"@@iterator",rt=je.asyncIterator||"@@asyncIterator",yt=je.toStringTag||"@@toStringTag";function nt(ue,Se,Ge){return Object.defineProperty(ue,Se,{value:Ge,enumerable:!0,configurable:!0,writable:!0}),ue[Se]}try{nt({},"")}catch{nt=function(Se,Ge,$){return Se[Ge]=$}}function fe(ue,Se,Ge,$){var te=Object.create((Se&&Se.prototype instanceof gt?Se:gt).prototype),ce=new Jt($||[]);return Te(te,"_invoke",{value:an(ue,Ge,ce)}),te}function xe(ue,Se,Ge){try{return{type:"normal",arg:ue.call(Se,Ge)}}catch($){return{type:"throw",arg:$}}}ye.wrap=fe;var Ye="suspendedStart",Dt="suspendedYield",Ot="executing",Gt="completed",wt={};function gt(){}function He(){}function Rt(){}var pn={};nt(pn,tt,function(){return this});var on=Object.getPrototypeOf,vt=on&&on(on(Qn([])));vt&&vt!==D&&Ve.call(vt,tt)&&(pn=vt);var At=Rt.prototype=gt.prototype=Object.create(pn);function gn(ue){["next","throw","return"].forEach(function(Se){nt(ue,Se,function(Ge){return this._invoke(Se,Ge)})})}function it(ue,Se){function Ge(te,ce,Ce,oe){var De=xe(ue[te],ue,ce);if("throw"!==De.type){var kt=De.arg,ze=kt.value;return ze&&"object"==typeof ze&&Ve.call(ze,"__await")?Se.resolve(ze.__await).then(function(st){Ge("next",st,Ce,oe)},function(st){Ge("throw",st,Ce,oe)}):Se.resolve(ze).then(function(st){kt.value=st,Ce(kt)},function(st){return Ge("throw",st,Ce,oe)})}oe(De.arg)}var $;Te(this,"_invoke",{value:function G(te,ce){function Ce(){return new Se(function(oe,De){Ge(te,ce,oe,De)})}return $=$?$.then(Ce,Ce):Ce()}})}function an(ue,Se,Ge){var $=Ye;return function(te,ce){if($===Ot)throw new Error("Generator is already running");if($===Gt){if("throw"===te)throw ce;return vr()}for(Ge.method=te,Ge.arg=ce;;){var Ce=Ge.delegate;if(Ce){var oe=Xt(Ce,Ge);if(oe){if(oe===wt)continue;return oe}}if("next"===Ge.method)Ge.sent=Ge._sent=Ge.arg;else if("throw"===Ge.method){if($===Ye)throw $=Gt,Ge.arg;Ge.dispatchException(Ge.arg)}else"return"===Ge.method&&Ge.abrupt("return",Ge.arg);$=Ot;var De=xe(ue,Se,Ge);if("normal"===De.type){if($=Ge.done?Gt:Dt,De.arg===wt)continue;return{value:De.arg,done:Ge.done}}"throw"===De.type&&($=Gt,Ge.method="throw",Ge.arg=De.arg)}}}function Xt(ue,Se){var Ge=Se.method,$=ue.iterator[Ge];if($===q)return Se.delegate=null,"throw"===Ge&&ue.iterator.return&&(Se.method="return",Se.arg=q,Xt(ue,Se),"throw"===Se.method)||"return"!==Ge&&(Se.method="throw",Se.arg=new TypeError("The iterator does not provide a '"+Ge+"' method")),wt;var G=xe($,ue.iterator,Se.arg);if("throw"===G.type)return Se.method="throw",Se.arg=G.arg,Se.delegate=null,wt;var te=G.arg;return te?te.done?(Se[ue.resultName]=te.value,Se.next=ue.nextLoc,"return"!==Se.method&&(Se.method="next",Se.arg=q),Se.delegate=null,wt):te:(Se.method="throw",Se.arg=new TypeError("iterator result is not an object"),Se.delegate=null,wt)}function we(ue){var Se={tryLoc:ue[0]};1 in ue&&(Se.catchLoc=ue[1]),2 in ue&&(Se.finallyLoc=ue[2],Se.afterLoc=ue[3]),this.tryEntries.push(Se)}function tn(ue){var Se=ue.completion||{};Se.type="normal",delete Se.arg,ue.completion=Se}function Jt(ue){this.tryEntries=[{tryLoc:"root"}],ue.forEach(we,this),this.reset(!0)}function Qn(ue){if(ue){var Se=ue[tt];if(Se)return Se.call(ue);if("function"==typeof ue.next)return ue;if(!isNaN(ue.length)){var Ge=-1,$=function G(){for(;++Ge<ue.length;)if(Ve.call(ue,Ge))return G.value=ue[Ge],G.done=!1,G;return G.value=q,G.done=!0,G};return $.next=$}}return{next:vr}}function vr(){return{value:q,done:!0}}return He.prototype=Rt,Te(At,"constructor",{value:Rt,configurable:!0}),Te(Rt,"constructor",{value:He,configurable:!0}),He.displayName=nt(Rt,yt,"GeneratorFunction"),ye.isGeneratorFunction=function(ue){var Se="function"==typeof ue&&ue.constructor;return!!Se&&(Se===He||"GeneratorFunction"===(Se.displayName||Se.name))},ye.mark=function(ue){return Object.setPrototypeOf?Object.setPrototypeOf(ue,Rt):(ue.__proto__=Rt,nt(ue,yt,"GeneratorFunction")),ue.prototype=Object.create(At),ue},ye.awrap=function(ue){return{__await:ue}},gn(it.prototype),nt(it.prototype,rt,function(){return this}),ye.AsyncIterator=it,ye.async=function(ue,Se,Ge,$,G){void 0===G&&(G=Promise);var te=new it(fe(ue,Se,Ge,$),G);return ye.isGeneratorFunction(Se)?te:te.next().then(function(ce){return ce.done?ce.value:te.next()})},gn(At),nt(At,yt,"Generator"),nt(At,tt,function(){return this}),nt(At,"toString",function(){return"[object Generator]"}),ye.keys=function(ue){var Se=Object(ue),Ge=[];for(var $ in Se)Ge.push($);return Ge.reverse(),function G(){for(;Ge.length;){var te=Ge.pop();if(te in Se)return G.value=te,G.done=!1,G}return G.done=!0,G}},ye.values=Qn,Jt.prototype={constructor:Jt,reset:function(ue){if(this.prev=0,this.next=0,this.sent=this._sent=q,this.done=!1,this.delegate=null,this.method="next",this.arg=q,this.tryEntries.forEach(tn),!ue)for(var Se in this)"t"===Se.charAt(0)&&Ve.call(this,Se)&&!isNaN(+Se.slice(1))&&(this[Se]=q)},stop:function(){this.done=!0;var Se=this.tryEntries[0].completion;if("throw"===Se.type)throw Se.arg;return this.rval},dispatchException:function(ue){if(this.done)throw ue;var Se=this;function Ge(oe,De){return te.type="throw",te.arg=ue,Se.next=oe,De&&(Se.method="next",Se.arg=q),!!De}for(var $=this.tryEntries.length-1;$>=0;--$){var G=this.tryEntries[$],te=G.completion;if("root"===G.tryLoc)return Ge("end");if(G.tryLoc<=this.prev){var ce=Ve.call(G,"catchLoc"),Ce=Ve.call(G,"finallyLoc");if(ce&&Ce){if(this.prev<G.catchLoc)return Ge(G.catchLoc,!0);if(this.prev<G.finallyLoc)return Ge(G.finallyLoc)}else if(ce){if(this.prev<G.catchLoc)return Ge(G.catchLoc,!0)}else{if(!Ce)throw new Error("try statement without catch or finally");if(this.prev<G.finallyLoc)return Ge(G.finallyLoc)}}}},abrupt:function(ue,Se){for(var Ge=this.tryEntries.length-1;Ge>=0;--Ge){var $=this.tryEntries[Ge];if($.tryLoc<=this.prev&&Ve.call($,"finallyLoc")&&this.prev<$.finallyLoc){var G=$;break}}G&&("break"===ue||"continue"===ue)&&G.tryLoc<=Se&&Se<=G.finallyLoc&&(G=null);var te=G?G.completion:{};return te.type=ue,te.arg=Se,G?(this.method="next",this.next=G.finallyLoc,wt):this.complete(te)},complete:function(ue,Se){if("throw"===ue.type)throw ue.arg;return"break"===ue.type||"continue"===ue.type?this.next=ue.arg:"return"===ue.type?(this.rval=this.arg=ue.arg,this.method="return",this.next="end"):"normal"===ue.type&&Se&&(this.next=Se),wt},finish:function(ue){for(var Se=this.tryEntries.length-1;Se>=0;--Se){var Ge=this.tryEntries[Se];if(Ge.finallyLoc===ue)return this.complete(Ge.completion,Ge.afterLoc),tn(Ge),wt}},catch:function(ue){for(var Se=this.tryEntries.length-1;Se>=0;--Se){var Ge=this.tryEntries[Se];if(Ge.tryLoc===ue){var $=Ge.completion;if("throw"===$.type){var G=$.arg;tn(Ge)}return G}}throw new Error("illegal catch attempt")},delegateYield:function(ue,Se,Ge){return this.delegate={iterator:Qn(ue),resultName:Se,nextLoc:Ge},"next"===this.method&&(this.arg=q),wt}},ye}(lt.exports);try{regeneratorRuntime=dt}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=dt:Function("r","regeneratorRuntime = r")(dt)}},843:(lt,dt,ye)=>{var D=ye(156).default;const Ve=ye(178);lt.exports={recognize:function(){var je=D(function*(tt,rt,yt){const nt=yield Ve(rt,1,yt);return nt.recognize(tt).finally(D(function*(){yield nt.terminate()}))});return function(rt,yt,nt){return je.apply(this,arguments)}}(),detect:function(){var je=D(function*(tt,rt){const yt=yield Ve("osd",0,rt);return yt.detect(tt).finally(D(function*(){yield yt.terminate()}))});return function(rt,yt){return je.apply(this,arguments)}}()}},147:lt=>{lt.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},55:lt=>{lt.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}},988:lt=>{lt.exports={workerBlobURL:!0,logger:()=>{}}},504:lt=>{lt.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}},447:(lt,dt,ye)=>{const D=ye(240);let Ve=0;lt.exports=({id:Te,action:q,payload:je={}})=>{let tt=Te;return typeof tt>"u"&&(tt=D("Job",Ve),Ve+=1),{id:tt,action:q,payload:je}}},890:function(lt,dt,ye){var D=ye(156).default,Ve=this;const Te=ye(447),{log:q}=ye(2),je=ye(240);let tt=0;lt.exports=()=>{const rt=je("Scheduler",tt),yt={},nt={};let fe=[];tt+=1;const Ye=()=>Object.keys(yt).length,Dt=()=>{if(0!==fe.length){const He=Object.keys(yt);for(let Rt=0;Rt<He.length;Rt+=1)if(typeof nt[He[Rt]]>"u"){fe[0](yt[He[Rt]]);break}}},Ot=(He,Rt)=>new Promise((pn,on)=>{const vt=Te({action:He,payload:Rt});fe.push(function(){var At=D(function*(gn){fe.shift(),nt[gn.id]=vt;try{pn(yield gn[He].apply(Ve,[...Rt,vt.id]))}catch(it){on(it)}finally{delete nt[gn.id],Dt()}});return function(gn){return At.apply(this,arguments)}}()),q(`[${rt}]: Add ${vt.id} to JobQueue`),q(`[${rt}]: JobQueue length=${fe.length}`),Dt()});return{addWorker:He=>(yt[He.id]=He,q(`[${rt}]: Add ${He.id}`),q(`[${rt}]: Number of workers=${Ye()}`),Dt(),He.id),addJob:function(){var He=D(function*(Rt,...pn){if(0===Ye())throw Error(`[${rt}]: You need to have at least one worker before adding jobs`);return Ot(Rt,pn)});return function(pn){return He.apply(this,arguments)}}(),terminate:function(){var He=D(function*(){Object.keys(yt).forEach(function(){var Rt=D(function*(pn){yield yt[pn].terminate()});return function(pn){return Rt.apply(this,arguments)}}()),fe=[]});return function(){return He.apply(this,arguments)}}(),getQueueLen:()=>fe.length,getNumWorkers:Ye}}},178:(lt,dt,ye)=>{var D=ye(156).default;const Ve=ye(380),Te=ye(793),q=ye(447),{log:je}=ye(2),tt=ye(240),rt=ye(147),{defaultOptions:yt,spawnWorker:nt,terminateWorker:fe,onMessage:xe,loadImage:Ye,send:Dt}=ye(312);let Ot=0;lt.exports=D(function*(Gt="eng",wt=rt.LSTM_ONLY,gt={},He={}){const Rt=tt("Worker",Ot),{logger:pn,errorHandler:on,...vt}=Ve({...yt,...gt}),At={},gn={},it="string"==typeof Gt?Gt.split("+"):Gt;let an=wt,Xt=He;const we=[rt.DEFAULT,rt.LSTM_ONLY].includes(wt)&&!vt.legacyCore;let tn,Jt;const Qn=new Promise((It,Tt)=>{Jt=It,tn=Tt});let ue=nt(vt);ue.onerror=It=>{tn(It.message)},Ot+=1;const Se=(It,Tt)=>{At[It]=Tt},Ge=(It,Tt)=>{gn[It]=Tt},$=({id:It,action:Tt,payload:Ft})=>new Promise(($n,Mn)=>{je(`[${Rt}]: Start ${It}, action=${Tt}`);const jr=`${Tt}-${It}`;Se(jr,$n),Ge(jr,Mn),Dt(ue,{workerId:Rt,jobId:It,action:Tt,payload:Ft})}),ze=(It,Tt)=>$(q({id:Tt,action:"loadLanguage",payload:{langs:It,options:{langPath:vt.langPath,dataPath:vt.dataPath,cachePath:vt.cachePath,cacheMethod:vt.cacheMethod,gzip:vt.gzip,lstmOnly:[rt.LSTM_ONLY,rt.TESSERACT_LSTM_COMBINED].includes(an)&&!vt.legacyLang}}})),Pt=(It,Tt,Ft,$n)=>$(q({id:$n,action:"initialize",payload:{langs:It,oem:Tt,config:Ft}})),mn=function(){var It=D(function*(Tt,Ft={},$n={blocks:!0,text:!0,hocr:!0,tsv:!0},Mn){return $(q({id:Mn,action:"recognize",payload:{image:yield Ye(Tt),options:Ft,output:$n}}))});return function(Ft){return It.apply(this,arguments)}}(),Fn=function(){var It=D(function*(Tt,Ft){if(we)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return $(q({id:Ft,action:"detect",payload:{image:yield Ye(Tt)}}))});return function(Ft,$n){return It.apply(this,arguments)}}(),gr=function(){var It=D(function*(){return null!==ue&&(fe(ue),ue=null),Promise.resolve()});return function(){return It.apply(this,arguments)}}();xe(ue,({workerId:It,jobId:Tt,status:Ft,action:$n,data:Mn})=>{const jr=`${$n}-${Tt}`;if("resolve"===Ft){je(`[${It}]: Complete ${Tt}`);let Or=Mn;"recognize"===$n?Or=Te(Mn):"getPDF"===$n&&(Or=Array.from({...Mn,length:Object.keys(Mn).length})),At[jr]({jobId:Tt,data:Or})}else if("reject"===Ft){if(gn[jr](Mn),"load"===$n&&tn(Mn),!on)throw Error(Mn);on(Mn)}else"progress"===Ft&&pn({...Mn,userJobId:Tt})});const Er={id:Rt,worker:ue,setResolve:Se,setReject:Ge,load:()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),writeText:(It,Tt,Ft)=>$(q({id:Ft,action:"FS",payload:{method:"writeFile",args:[It,Tt]}})),readText:(It,Tt)=>$(q({id:Tt,action:"FS",payload:{method:"readFile",args:[It,{encoding:"utf8"}]}})),removeFile:(It,Tt)=>$(q({id:Tt,action:"FS",payload:{method:"unlink",args:[It]}})),FS:(It,Tt,Ft)=>$(q({id:Ft,action:"FS",payload:{method:It,args:Tt}})),loadLanguage:()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),initialize:()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),reinitialize:(It="eng",Tt,Ft,$n)=>{if(we&&[rt.TESSERACT_ONLY,rt.TESSERACT_LSTM_COMBINED].includes(Tt))throw Error("Legacy model requested but code missing.");const Mn=Tt||an;an=Mn;const jr=Ft||Xt;Xt=jr;const bs=("string"==typeof It?It.split("+"):It).filter(kr=>!it.includes(kr));return it.push(...bs),bs.length>0?ze(bs,$n).then(()=>Pt(It,Mn,jr,$n)):Pt(It,Mn,jr,$n)},setParameters:(It={},Tt)=>$(q({id:Tt,action:"setParameters",payload:{params:It}})),recognize:mn,getPDF:(It="Tesseract OCR Result",Tt=!1,Ft)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),$(q({id:Ft,action:"getPDF",payload:{title:It,textonly:Tt}}))),detect:Fn,terminate:gr};return $(q({id:undefined,action:"load",payload:{options:{lstmOnly:we,corePath:vt.corePath,logging:vt.logging}}})).then(()=>ze(Gt)).then(()=>Pt(Gt,wt,He)).then(()=>Jt(Er)).catch(()=>{}),Qn})},778:(lt,dt,ye)=>{ye(303);const D=ye(890),Ve=ye(178),Te=ye(843),q=ye(504),je=ye(147),tt=ye(55),{setLogging:rt}=ye(2);lt.exports={languages:q,OEM:je,PSM:tt,createScheduler:D,createWorker:Ve,setLogging:rt,...Te}},793:lt=>{lt.exports=dt=>{const ye=[],D=[],Ve=[],Te=[],q=[];return dt.blocks&&dt.blocks.forEach(je=>{je.paragraphs.forEach(tt=>{tt.lines.forEach(rt=>{rt.words.forEach(yt=>{yt.symbols.forEach(nt=>{q.push({...nt,page:dt,block:je,paragraph:tt,line:rt,word:yt})}),Te.push({...yt,page:dt,block:je,paragraph:tt,line:rt})}),Ve.push({...rt,page:dt,block:je,paragraph:tt})}),D.push({...tt,page:dt,block:je})}),ye.push({...je,page:dt})}),{...dt,blocks:ye,paragraphs:D,lines:Ve,words:Te,symbols:q}}},648:(lt,dt,ye)=>{const D=ye(833);lt.exports=Ve=>{const Te={};return typeof WorkerGlobalScope<"u"?Te.type="webworker":D()?Te.type="electron":"object"==typeof document?Te.type="browser":"object"==typeof process&&(Te.type="node"),typeof Ve>"u"?Te:Te[Ve]}},240:lt=>{lt.exports=(dt,ye)=>`${dt}-${ye}-${Math.random().toString(16).slice(3,8)}`},2:function(lt,dt){let ye=!1;dt.logging=ye,dt.setLogging=D=>{ye=D},dt.log=(...D)=>ye?console.log.apply(this,D):null},380:(lt,dt,ye)=>{const Ve="browser"===ye(648)("type")?Te=>new URL(Te,window.location.href).href:Te=>Te;lt.exports=Te=>{const q={...Te};return["corePath","workerPath","langPath"].forEach(je=>{Te[je]&&(q[je]=Ve(q[je]))}),q}},1:(lt,dt,ye)=>{const D=ye(547).i8,Ve=ye(988);lt.exports={...Ve,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${D}/dist/worker.min.js`}},312:(lt,dt,ye)=>{const D=ye(1),Ve=ye(383),Te=ye(917),q=ye(671),je=ye(782),tt=ye(374);lt.exports={defaultOptions:D,spawnWorker:Ve,terminateWorker:Te,onMessage:q,send:je,loadImage:tt}},374:(lt,dt,ye)=>{var D=ye(156).default;const Ve=q=>new Promise((je,tt)=>{const rt=new FileReader;rt.onload=()=>{je(rt.result)},rt.onerror=({target:{error:{code:yt}}})=>{tt(Error(`File could not be read! Code=${yt}`))},rt.readAsArrayBuffer(q)}),Te=function(){var q=D(function*(je){let tt=je;if(typeof je>"u")return"undefined";if("string"==typeof je)tt=/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(je)?atob(je.split(",")[1]).split("").map(rt=>rt.charCodeAt(0)):yield(yield fetch(je)).arrayBuffer();else if(typeof HTMLElement<"u"&&je instanceof HTMLElement)"IMG"===je.tagName&&(tt=yield Te(je.src)),"VIDEO"===je.tagName&&(tt=yield Te(je.poster)),"CANVAS"===je.tagName&&(yield new Promise(rt=>{je.toBlob(function(){var yt=D(function*(nt){tt=yield Ve(nt),rt()});return function(nt){return yt.apply(this,arguments)}}())}));else if(typeof OffscreenCanvas<"u"&&je instanceof OffscreenCanvas){const rt=yield je.convertToBlob();tt=yield Ve(rt)}else(je instanceof File||je instanceof Blob)&&(tt=yield Ve(je));return new Uint8Array(tt)});return function(tt){return q.apply(this,arguments)}}();lt.exports=Te},671:lt=>{lt.exports=(dt,ye)=>{dt.onmessage=({data:D})=>{ye(D)}}},782:(lt,dt,ye)=>{var D=ye(156).default;lt.exports=function(){var Ve=D(function*(Te,q){Te.postMessage(q)});return function(Te,q){return Ve.apply(this,arguments)}}()},383:lt=>{lt.exports=({workerPath:dt,workerBlobURL:ye})=>{let D;if(Blob&&URL&&ye){const Ve=new Blob([`importScripts("${dt}");`],{type:"application/javascript"});D=new Worker(URL.createObjectURL(Ve))}else D=new Worker(dt);return D}},917:lt=>{lt.exports=dt=>{dt.terminate()}},156:lt=>{function dt(D,Ve,Te,q,je,tt,rt){try{var yt=D[tt](rt),nt=yt.value}catch(fe){return void Te(fe)}yt.done?Ve(nt):Promise.resolve(nt).then(q,je)}lt.exports=function ye(D){return function(){var Ve=this,Te=arguments;return new Promise(function(q,je){var tt=D.apply(Ve,Te);function rt(nt){dt(tt,q,je,rt,yt,"next",nt)}function yt(nt){dt(tt,q,je,rt,yt,"throw",nt)}rt(void 0)})}},lt.exports.__esModule=!0,lt.exports.default=lt.exports},106:(lt,dt,ye)=>{"use strict";ye.d(dt,{Z:()=>Gt});var D=ye(58),Ve=ye(537),Te=ye(534),q=ye(879);class je{constructor(gt,He){this._delegate=gt,this.firebase=He,(0,Te._addComponent)(gt,new Ve.wA("app-compat",()=>this,"PUBLIC")),this.container=gt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(gt){this._delegate.automaticDataCollectionEnabled=gt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(gt=>{this._delegate.checkDestroyed(),gt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Te.deleteApp)(this._delegate)))}_getService(gt,He=Te._DEFAULT_ENTRY_NAME){var Rt;this._delegate.checkDestroyed();const pn=this._delegate.container.getProvider(gt);return!pn.isInitialized()&&"EXPLICIT"===(null===(Rt=pn.getComponent())||void 0===Rt?void 0:Rt.instantiationMode)&&pn.initialize(),pn.getImmediate({identifier:He})}_removeServiceInstance(gt,He=Te._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(gt).clearInstance(He)}_addComponent(gt){(0,Te._addComponent)(this._delegate,gt)}_addOrOverwriteComponent(gt){(0,Te._addOrOverwriteComponent)(this._delegate,gt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const rt=new D.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),fe=function nt(){const wt=function yt(wt){const gt={},He={__esModule:!0,initializeApp:function on(it,an={}){const Xt=Te.initializeApp(it,an);if((0,D.r3)(gt,Xt.name))return gt[Xt.name];const we=new wt(Xt,He);return gt[Xt.name]=we,we},app:pn,registerVersion:Te.registerVersion,setLogLevel:Te.setLogLevel,onLog:Te.onLog,apps:null,SDK_VERSION:Te.SDK_VERSION,INTERNAL:{registerComponent:function At(it){const an=it.name,Xt=an.replace("-compat","");if(Te._registerComponent(it)&&"PUBLIC"===it.type){const we=(tn=pn())=>{if("function"!=typeof tn[Xt])throw rt.create("invalid-app-argument",{appName:an});return tn[Xt]()};void 0!==it.serviceProps&&(0,D.ZB)(we,it.serviceProps),He[Xt]=we,wt.prototype[Xt]=function(...tn){return this._getService.bind(this,an).apply(this,it.multipleInstances?tn:[])}}return"PUBLIC"===it.type?He[Xt]:null},removeApp:function Rt(it){delete gt[it]},useAsService:function gn(it,an){return"serverAuth"===an?null:an},modularAPIs:Te}};function pn(it){if(!(0,D.r3)(gt,it=it||Te._DEFAULT_ENTRY_NAME))throw rt.create("no-app",{appName:it});return gt[it]}return He.default=He,Object.defineProperty(He,"apps",{get:function vt(){return Object.keys(gt).map(it=>gt[it])}}),pn.App=wt,He}(je);return wt.INTERNAL=Object.assign(Object.assign({},wt.INTERNAL),{createFirebaseNamespace:nt,extendNamespace:function gt(He){(0,D.ZB)(wt,He)},createSubscribe:D.ne,ErrorFactory:D.LL,deepExtend:D.ZB}),wt}(),xe=new q.Yd("@firebase/app-compat");if((0,D.jU)()&&void 0!==self.firebase){xe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const wt=self.firebase.SDK_VERSION;wt&&wt.indexOf("LITE")>=0&&xe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Gt=fe;!function Ot(wt){(0,Te.registerVersion)("@firebase/app-compat","0.2.35",wt)}()},534:(lt,dt,ye)=>{"use strict";ye.r(dt),ye.d(dt,{FirebaseError:()=>q.ZR,SDK_VERSION:()=>ln,_DEFAULT_ENTRY_NAME:()=>Or,_addComponent:()=>wi,_addOrOverwriteComponent:()=>qn,_apps:()=>kr,_clearComponents:()=>Jr,_components:()=>ir,_getProvider:()=>_t,_isFirebaseApp:()=>us,_isFirebaseServerApp:()=>zi,_registerComponent:()=>Ti,_removeServiceInstance:()=>To,_serverApps:()=>Ii,deleteApp:()=>Hr,getApp:()=>Gi,getApps:()=>ra,initializeApp:()=>En,initializeServerApp:()=>Ha,onLog:()=>L,registerVersion:()=>P,setLogLevel:()=>ve});var D=ye(861),Ve=ye(537),Te=ye(879),q=ye(58);const je=(O,K)=>K.some(ie=>O instanceof ie);let tt,rt;const fe=new WeakMap,xe=new WeakMap,Ye=new WeakMap,Dt=new WeakMap,Ot=new WeakMap;let gt={get(O,K,ie){if(O instanceof IDBTransaction){if("done"===K)return xe.get(O);if("objectStoreNames"===K)return O.objectStoreNames||Ye.get(O);if("store"===K)return ie.objectStoreNames[1]?void 0:ie.objectStore(ie.objectStoreNames[0])}return on(O[K])},set:(O,K,ie)=>(O[K]=ie,!0),has:(O,K)=>O instanceof IDBTransaction&&("done"===K||"store"===K)||K in O};function pn(O){return"function"==typeof O?function Rt(O){return O!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function nt(){return rt||(rt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(O)?function(...K){return O.apply(vt(this),K),on(fe.get(this))}:function(...K){return on(O.apply(vt(this),K))}:function(K,...ie){const Me=O.call(vt(this),K,...ie);return Ye.set(Me,K.sort?K.sort():[K]),on(Me)}}(O):(O instanceof IDBTransaction&&function wt(O){if(xe.has(O))return;const K=new Promise((ie,Me)=>{const St=()=>{O.removeEventListener("complete",xt),O.removeEventListener("error",$t),O.removeEventListener("abort",$t)},xt=()=>{ie(),St()},$t=()=>{Me(O.error||new DOMException("AbortError","AbortError")),St()};O.addEventListener("complete",xt),O.addEventListener("error",$t),O.addEventListener("abort",$t)});xe.set(O,K)}(O),je(O,function yt(){return tt||(tt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(O,gt):O)}function on(O){if(O instanceof IDBRequest)return function Gt(O){const K=new Promise((ie,Me)=>{const St=()=>{O.removeEventListener("success",xt),O.removeEventListener("error",$t)},xt=()=>{ie(on(O.result)),St()},$t=()=>{Me(O.error),St()};O.addEventListener("success",xt),O.addEventListener("error",$t)});return K.then(ie=>{ie instanceof IDBCursor&&fe.set(ie,O)}).catch(()=>{}),Ot.set(K,O),K}(O);if(Dt.has(O))return Dt.get(O);const K=pn(O);return K!==O&&(Dt.set(O,K),Ot.set(K,O)),K}const vt=O=>Ot.get(O),it=["get","getKey","getAll","getAllKeys","count"],an=["put","add","delete","clear"],Xt=new Map;function we(O,K){if(!(O instanceof IDBDatabase)||K in O||"string"!=typeof K)return;if(Xt.get(K))return Xt.get(K);const ie=K.replace(/FromIndex$/,""),Me=K!==ie,St=an.includes(ie);if(!(ie in(Me?IDBIndex:IDBObjectStore).prototype)||!St&&!it.includes(ie))return;const xt=function(){var $t=(0,D.Z)(function*(xn,...qt){const Di=this.transaction(xn,St?"readwrite":"readonly");let to=Di.store;return Me&&(to=to.index(qt.shift())),(yield Promise.all([to[ie](...qt),St&&Di.done]))[0]});return function(qt){return $t.apply(this,arguments)}}();return Xt.set(K,xt),xt}!function He(O){gt=O(gt)}(O=>({...O,get:(K,ie,Me)=>we(K,ie)||O.get(K,ie,Me),has:(K,ie)=>!!we(K,ie)||O.has(K,ie)}));class tn{constructor(K){this.container=K}getPlatformInfoString(){return this.container.getProviders().map(ie=>{if(function Jt(O){const K=O.getComponent();return"VERSION"===K?.type}(ie)){const Me=ie.getImmediate();return`${Me.library}/${Me.version}`}return null}).filter(ie=>ie).join(" ")}}const Qn="@firebase/app",vr="0.10.5",ue=new Te.Yd("@firebase/app"),Or="[DEFAULT]",bs={[Qn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},kr=new Map,Ii=new Map,ir=new Map;function wi(O,K){try{O.container.addComponent(K)}catch(ie){ue.debug(`Component ${K.name} failed to register with FirebaseApp ${O.name}`,ie)}}function qn(O,K){O.container.addOrOverwriteComponent(K)}function Ti(O){const K=O.name;if(ir.has(K))return ue.debug(`There were multiple attempts to register component ${K}.`),!1;ir.set(K,O);for(const ie of kr.values())wi(ie,O);for(const ie of Ii.values())wi(ie,O);return!0}function _t(O,K){const ie=O.container.getProvider("heartbeat").getImmediate({optional:!0});return ie&&ie.triggerHeartbeat(),O.container.getProvider(K)}function To(O,K,ie=Or){_t(O,K).clearInstance(ie)}function us(O){return void 0!==O.options}function zi(O){return void 0!==O.settings}function Jr(){ir.clear()}const _n=new q.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class bo{constructor(K,ie,Me){this._isDeleted=!1,this._options=Object.assign({},K),this._config=Object.assign({},ie),this._name=ie.name,this._automaticDataCollectionEnabled=ie.automaticDataCollectionEnabled,this._container=Me,this.container.addComponent(new Ve.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this.checkDestroyed(),this._automaticDataCollectionEnabled=K}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(K){this._isDeleted=K}checkDestroyed(){if(this.isDeleted)throw _n.create("app-deleted",{appName:this._name})}}class $r extends bo{constructor(K,ie,Me,St){const xt=void 0!==ie.automaticDataCollectionEnabled&&ie.automaticDataCollectionEnabled,$t={name:Me,automaticDataCollectionEnabled:xt};super(void 0!==K.apiKey?K:K.options,$t,St),this._serverConfig=Object.assign({automaticDataCollectionEnabled:xt},ie),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,ie.releaseOnDeref=void 0,P(Qn,vr,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(K){this.isDeleted||(this._refCount++,void 0!==K&&this._finalizationRegistry.register(K,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Hr(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw _n.create("server-app-deleted")}}const ln="10.12.2";function En(O,K={}){let ie=O;"object"!=typeof K&&(K={name:K});const Me=Object.assign({name:Or,automaticDataCollectionEnabled:!1},K),St=Me.name;if("string"!=typeof St||!St)throw _n.create("bad-app-name",{appName:String(St)});if(ie||(ie=(0,q.aH)()),!ie)throw _n.create("no-options");const xt=kr.get(St);if(xt){if((0,q.vZ)(ie,xt.options)&&(0,q.vZ)(Me,xt.config))return xt;throw _n.create("duplicate-app",{appName:St})}const $t=new Ve.H0(St);for(const qt of ir.values())$t.addComponent(qt);const xn=new bo(ie,Me,$t);return kr.set(St,xn),xn}function Ha(O,K){if((0,q.jU)())throw _n.create("invalid-server-app-environment");let ie;void 0===K.automaticDataCollectionEnabled&&(K.automaticDataCollectionEnabled=!1),ie=us(O)?O.options:O;const Me=Object.assign(Object.assign({},K),ie);if(void 0!==Me.releaseOnDeref&&delete Me.releaseOnDeref,void 0!==K.releaseOnDeref&&typeof FinalizationRegistry>"u")throw _n.create("finalization-registry-not-supported",{});const xt=""+(Di=JSON.stringify(Me),[...Di].reduce((to,gl)=>Math.imul(31,to)+gl.charCodeAt(0)|0,0)),$t=Ii.get(xt);var Di;if($t)return $t.incRefCount(K.releaseOnDeref),$t;const xn=new Ve.H0(xt);for(const Di of ir.values())xn.addComponent(Di);const qt=new $r(ie,K,xt,xn);return Ii.set(xt,qt),qt}function Gi(O=Or){const K=kr.get(O);if(!K&&O===Or&&(0,q.aH)())return En();if(!K)throw _n.create("no-app",{appName:O});return K}function ra(){return Array.from(kr.values())}function Hr(O){return V.apply(this,arguments)}function V(){return(V=(0,D.Z)(function*(O){let K=!1;const ie=O.name;kr.has(ie)?(K=!0,kr.delete(ie)):Ii.has(ie)&&O.decRefCount()<=0&&(Ii.delete(ie),K=!0),K&&(yield Promise.all(O.container.getProviders().map(Me=>Me.delete())),O.isDeleted=!0)})).apply(this,arguments)}function P(O,K,ie){var Me;let St=null!==(Me=bs[O])&&void 0!==Me?Me:O;ie&&(St+=`-${ie}`);const xt=St.match(/\s|\//),$t=K.match(/\s|\//);if(xt||$t){const xn=[`Unable to register library "${St}" with version "${K}":`];return xt&&xn.push(`library name "${St}" contains illegal characters (whitespace or "/")`),xt&&$t&&xn.push("and"),$t&&xn.push(`version name "${K}" contains illegal characters (whitespace or "/")`),void ue.warn(xn.join(" "))}Ti(new Ve.wA(`${St}-version`,()=>({library:St,version:K}),"VERSION"))}function L(O,K){if(null!==O&&"function"!=typeof O)throw _n.create("invalid-log-argument");(0,Te.Am)(O,K)}function ve(O){(0,Te.Ub)(O)}const ne="firebase-heartbeat-database",me=1,ht="firebase-heartbeat-store";let un=null;function bt(){return un||(un=function At(O,K,{blocked:ie,upgrade:Me,blocking:St,terminated:xt}={}){const $t=indexedDB.open(O,K),xn=on($t);return Me&&$t.addEventListener("upgradeneeded",qt=>{Me(on($t.result),qt.oldVersion,qt.newVersion,on($t.transaction),qt)}),ie&&$t.addEventListener("blocked",qt=>ie(qt.oldVersion,qt.newVersion,qt)),xn.then(qt=>{xt&&qt.addEventListener("close",()=>xt()),St&&qt.addEventListener("versionchange",Di=>St(Di.oldVersion,Di.newVersion,Di))}).catch(()=>{}),xn}(ne,me,{upgrade:(O,K)=>{if(0===K)try{O.createObjectStore(ht)}catch(ie){console.warn(ie)}}}).catch(O=>{throw _n.create("idb-open",{originalErrorMessage:O.message})})),un}function sr(){return(sr=(0,D.Z)(function*(O){try{const ie=(yield bt()).transaction(ht),Me=yield ie.objectStore(ht).get(dn(O));return yield ie.done,Me}catch(K){if(K instanceof q.ZR)ue.warn(K.message);else{const ie=_n.create("idb-get",{originalErrorMessage:K?.message});ue.warn(ie.message)}}})).apply(this,arguments)}function Ze(O,K){return cn.apply(this,arguments)}function cn(){return(cn=(0,D.Z)(function*(O,K){try{const Me=(yield bt()).transaction(ht,"readwrite");yield Me.objectStore(ht).put(K,dn(O)),yield Me.done}catch(ie){if(ie instanceof q.ZR)ue.warn(ie.message);else{const Me=_n.create("idb-set",{originalErrorMessage:ie?.message});ue.warn(Me.message)}}})).apply(this,arguments)}function dn(O){return`${O.name}!${O.options.appId}`}class bn{constructor(K){this.container=K,this._heartbeatsCache=null;const ie=this.container.getProvider("app").getImmediate();this._storage=new ls(ie),this._heartbeatsCachePromise=this._storage.read().then(Me=>(this._heartbeatsCache=Me,Me))}triggerHeartbeat(){var K=this;return(0,D.Z)(function*(){var ie,Me;const xt=K.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$t=Et();if((null!=(null===(ie=K._heartbeatsCache)||void 0===ie?void 0:ie.heartbeats)||(K._heartbeatsCache=yield K._heartbeatsCachePromise,null!=(null===(Me=K._heartbeatsCache)||void 0===Me?void 0:Me.heartbeats)))&&K._heartbeatsCache.lastSentHeartbeatDate!==$t&&!K._heartbeatsCache.heartbeats.some(xn=>xn.date===$t))return K._heartbeatsCache.heartbeats.push({date:$t,agent:xt}),K._heartbeatsCache.heartbeats=K._heartbeatsCache.heartbeats.filter(xn=>{const qt=new Date(xn.date).valueOf();return Date.now()-qt<=2592e6}),K._storage.overwrite(K._heartbeatsCache)})()}getHeartbeatsHeader(){var K=this;return(0,D.Z)(function*(){var ie;if(null===K._heartbeatsCache&&(yield K._heartbeatsCachePromise),null==(null===(ie=K._heartbeatsCache)||void 0===ie?void 0:ie.heartbeats)||0===K._heartbeatsCache.heartbeats.length)return"";const Me=Et(),{heartbeatsToSend:St,unsentEntries:xt}=function cs(O,K=1024){const ie=[];let Me=O.slice();for(const St of O){const xt=ie.find($t=>$t.agent===St.agent);if(xt){if(xt.dates.push(St.date),za(ie)>K){xt.dates.pop();break}}else if(ie.push({agent:St.agent,dates:[St.date]}),za(ie)>K){ie.pop();break}Me=Me.slice(1)}return{heartbeatsToSend:ie,unsentEntries:Me}}(K._heartbeatsCache.heartbeats),$t=(0,q.L)(JSON.stringify({version:2,heartbeats:St}));return K._heartbeatsCache.lastSentHeartbeatDate=Me,xt.length>0?(K._heartbeatsCache.heartbeats=xt,yield K._storage.overwrite(K._heartbeatsCache)):(K._heartbeatsCache.heartbeats=[],K._storage.overwrite(K._heartbeatsCache)),$t})()}}function Et(){return(new Date).toISOString().substring(0,10)}class ls{constructor(K){this.app=K,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.Z)(function*(){return!!(0,q.hl)()&&(0,q.eu)().then(()=>!0).catch(()=>!1)})()}read(){var K=this;return(0,D.Z)(function*(){if(yield K._canUseIndexedDBPromise){const Me=yield function Ir(O){return sr.apply(this,arguments)}(K.app);return Me?.heartbeats?Me:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(K){var ie=this;return(0,D.Z)(function*(){var Me;if(yield ie._canUseIndexedDBPromise){const xt=yield ie.read();return Ze(ie.app,{lastSentHeartbeatDate:null!==(Me=K.lastSentHeartbeatDate)&&void 0!==Me?Me:xt.lastSentHeartbeatDate,heartbeats:K.heartbeats})}})()}add(K){var ie=this;return(0,D.Z)(function*(){var Me;if(yield ie._canUseIndexedDBPromise){const xt=yield ie.read();return Ze(ie.app,{lastSentHeartbeatDate:null!==(Me=K.lastSentHeartbeatDate)&&void 0!==Me?Me:xt.lastSentHeartbeatDate,heartbeats:[...xt.heartbeats,...K.heartbeats]})}})()}}function za(O){return(0,q.L)(JSON.stringify({version:2,heartbeats:O})).length}!function Ci(O){Ti(new Ve.wA("platform-logger",K=>new tn(K),"PRIVATE")),Ti(new Ve.wA("heartbeat",K=>new bn(K),"PRIVATE")),P(Qn,vr,O),P(Qn,vr,"esm2017"),P("fire-js","")}("")},537:(lt,dt,ye)=>{"use strict";ye.d(dt,{H0:()=>yt,wA:()=>Te});var D=ye(861),Ve=ye(58);class Te{constructor(fe,xe,Ye){this.name=fe,this.instanceFactory=xe,this.type=Ye,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(fe){return this.instantiationMode=fe,this}setMultipleInstances(fe){return this.multipleInstances=fe,this}setServiceProps(fe){return this.serviceProps=fe,this}setInstanceCreatedCallback(fe){return this.onInstanceCreated=fe,this}}const q="[DEFAULT]";class je{constructor(fe,xe){this.name=fe,this.container=xe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(fe){const xe=this.normalizeInstanceIdentifier(fe);if(!this.instancesDeferred.has(xe)){const Ye=new Ve.BH;if(this.instancesDeferred.set(xe,Ye),this.isInitialized(xe)||this.shouldAutoInitialize())try{const Dt=this.getOrInitializeService({instanceIdentifier:xe});Dt&&Ye.resolve(Dt)}catch{}}return this.instancesDeferred.get(xe).promise}getImmediate(fe){var xe;const Ye=this.normalizeInstanceIdentifier(fe?.identifier),Dt=null!==(xe=fe?.optional)&&void 0!==xe&&xe;if(!this.isInitialized(Ye)&&!this.shouldAutoInitialize()){if(Dt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ye})}catch(Ot){if(Dt)return null;throw Ot}}getComponent(){return this.component}setComponent(fe){if(fe.name!==this.name)throw Error(`Mismatching Component ${fe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=fe,this.shouldAutoInitialize()){if(function rt(nt){return"EAGER"===nt.instantiationMode}(fe))try{this.getOrInitializeService({instanceIdentifier:q})}catch{}for(const[xe,Ye]of this.instancesDeferred.entries()){const Dt=this.normalizeInstanceIdentifier(xe);try{const Ot=this.getOrInitializeService({instanceIdentifier:Dt});Ye.resolve(Ot)}catch{}}}}clearInstance(fe=q){this.instancesDeferred.delete(fe),this.instancesOptions.delete(fe),this.instances.delete(fe)}delete(){var fe=this;return(0,D.Z)(function*(){const xe=Array.from(fe.instances.values());yield Promise.all([...xe.filter(Ye=>"INTERNAL"in Ye).map(Ye=>Ye.INTERNAL.delete()),...xe.filter(Ye=>"_delete"in Ye).map(Ye=>Ye._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(fe=q){return this.instances.has(fe)}getOptions(fe=q){return this.instancesOptions.get(fe)||{}}initialize(fe={}){const{options:xe={}}=fe,Ye=this.normalizeInstanceIdentifier(fe.instanceIdentifier);if(this.isInitialized(Ye))throw Error(`${this.name}(${Ye}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Dt=this.getOrInitializeService({instanceIdentifier:Ye,options:xe});for(const[Ot,Gt]of this.instancesDeferred.entries())Ye===this.normalizeInstanceIdentifier(Ot)&&Gt.resolve(Dt);return Dt}onInit(fe,xe){var Ye;const Dt=this.normalizeInstanceIdentifier(xe),Ot=null!==(Ye=this.onInitCallbacks.get(Dt))&&void 0!==Ye?Ye:new Set;Ot.add(fe),this.onInitCallbacks.set(Dt,Ot);const Gt=this.instances.get(Dt);return Gt&&fe(Gt,Dt),()=>{Ot.delete(fe)}}invokeOnInitCallbacks(fe,xe){const Ye=this.onInitCallbacks.get(xe);if(Ye)for(const Dt of Ye)try{Dt(fe,xe)}catch{}}getOrInitializeService({instanceIdentifier:fe,options:xe={}}){let Ye=this.instances.get(fe);if(!Ye&&this.component&&(Ye=this.component.instanceFactory(this.container,{instanceIdentifier:(nt=fe,nt===q?void 0:nt),options:xe}),this.instances.set(fe,Ye),this.instancesOptions.set(fe,xe),this.invokeOnInitCallbacks(Ye,fe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,fe,Ye)}catch{}var nt;return Ye||null}normalizeInstanceIdentifier(fe=q){return this.component?this.component.multipleInstances?fe:q:fe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class yt{constructor(fe){this.name=fe,this.providers=new Map}addComponent(fe){const xe=this.getProvider(fe.name);if(xe.isComponentSet())throw new Error(`Component ${fe.name} has already been registered with ${this.name}`);xe.setComponent(fe)}addOrOverwriteComponent(fe){this.getProvider(fe.name).isComponentSet()&&this.providers.delete(fe.name),this.addComponent(fe)}getProvider(fe){if(this.providers.has(fe))return this.providers.get(fe);const xe=new je(fe,this);return this.providers.set(fe,xe),xe}getProviders(){return Array.from(this.providers.values())}}},879:(lt,dt,ye)=>{"use strict";ye.d(dt,{Am:()=>nt,Ub:()=>yt,Yd:()=>rt,in:()=>Ve});const D=[];var Ve=function(fe){return fe[fe.DEBUG=0]="DEBUG",fe[fe.VERBOSE=1]="VERBOSE",fe[fe.INFO=2]="INFO",fe[fe.WARN=3]="WARN",fe[fe.ERROR=4]="ERROR",fe[fe.SILENT=5]="SILENT",fe}(Ve||{});const Te={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},q=Ve.INFO,je={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},tt=(fe,xe,...Ye)=>{if(xe<fe.logLevel)return;const Dt=(new Date).toISOString(),Ot=je[xe];if(!Ot)throw new Error(`Attempted to log a message with an invalid logType (value: ${xe})`);console[Ot](`[${Dt}]  ${fe.name}:`,...Ye)};class rt{constructor(xe){this.name=xe,this._logLevel=q,this._logHandler=tt,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(xe){if(!(xe in Ve))throw new TypeError(`Invalid value "${xe}" assigned to \`logLevel\``);this._logLevel=xe}setLogLevel(xe){this._logLevel="string"==typeof xe?Te[xe]:xe}get logHandler(){return this._logHandler}set logHandler(xe){if("function"!=typeof xe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=xe}get userLogHandler(){return this._userLogHandler}set userLogHandler(xe){this._userLogHandler=xe}debug(...xe){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...xe),this._logHandler(this,Ve.DEBUG,...xe)}log(...xe){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...xe),this._logHandler(this,Ve.VERBOSE,...xe)}info(...xe){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...xe),this._logHandler(this,Ve.INFO,...xe)}warn(...xe){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...xe),this._logHandler(this,Ve.WARN,...xe)}error(...xe){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...xe),this._logHandler(this,Ve.ERROR,...xe)}}function yt(fe){D.forEach(xe=>{xe.setLogLevel(fe)})}function nt(fe,xe){for(const Ye of D){let Dt=null;xe&&xe.level&&(Dt=Te[xe.level]),Ye.userLogHandler=null===fe?null:(Ot,Gt,...wt)=>{const gt=wt.map(He=>{if(null==He)return null;if("string"==typeof He)return He;if("number"==typeof He||"boolean"==typeof He)return He.toString();if(He instanceof Error)return He.message;try{return JSON.stringify(He)}catch{return null}}).filter(He=>He).join(" ");Gt>=(Dt??Ot.logLevel)&&fe({level:Ve[Gt].toLowerCase(),message:gt,args:wt,type:Ot.name})}}}},985:(lt,dt,ye)=>{"use strict";ye.r(dt);var D=ye(861),Ve=ye(106),Te=ye(534),q=ye(58),je=ye(879),tt=ye(582),rt=ye(537);const nt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Gt=function Dt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},wt=function Ot(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},gt=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Rt=new je.Yd("@firebase/auth");function on(f,...c){Rt.logLevel<=je.in.ERROR&&Rt.error(`Auth (${Te.SDK_VERSION}): ${f}`,...c)}function vt(f,...c){throw Xt(f,...c)}function At(f,...c){return Xt(f,...c)}function gn(f,c,l){const g=Object.assign(Object.assign({},wt()),{[c]:l});return new q.LL("auth","Firebase",g).create(c,{appName:f.name})}function it(f){return gn(f,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function an(f,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&vt(f,"argument-error"),gn(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xt(f,...c){if("string"!=typeof f){const l=c[0],g=[...c.slice(1)];return g[0]&&(g[0].appName=f.name),f._errorFactory.create(l,...g)}return gt.create(f,...c)}function we(f,c,...l){if(!f)throw Xt(c,...l)}function tn(f){const c="INTERNAL ASSERTION FAILED: "+f;throw on(c),new Error(c)}function Jt(f,c){f||tn(c)}function Qn(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function vr(){return"http:"===ue()||"https:"===ue()}function ue(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class ${constructor(c,l){this.shortDelay=c,this.longDelay=l,Jt(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return function Se(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(vr()||(0,q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function G(f,c){Jt(f.emulator,"Emulator should always be set here");const{url:l}=f.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class te{static initialize(c,l,g){this.fetchImpl=c,l&&(this.headersImpl=l),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void tn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void tn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void tn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ce={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ce=new $(3e4,6e4);function oe(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function De(f,c,l,g){return kt.apply(this,arguments)}function kt(){return(kt=(0,D.Z)(function*(f,c,l,g,y={}){return ze(f,y,(0,D.Z)(function*(){let b={},k={};g&&("GET"===c?k=g:b={body:JSON.stringify(g)});const Y=(0,q.xO)(Object.assign({key:f.config.apiKey},k)).slice(1),_e=yield f._getAdditionalHeaders();return _e["Content-Type"]="application/json",f.languageCode&&(_e["X-Firebase-Locale"]=f.languageCode),te.fetch()(Xr(f,f.config.apiHost,l,Y),Object.assign({method:c,headers:_e,referrerPolicy:"no-referrer"},b))}))})).apply(this,arguments)}function ze(f,c,l){return st.apply(this,arguments)}function st(){return(st=(0,D.Z)(function*(f,c,l){f._canInitEmulator=!1;const g=Object.assign(Object.assign({},ce),c);try{const y=new Yn(f),b=yield Promise.race([l(),y.promise]);y.clearNetworkTimeout();const k=yield b.json();if("needConfirmation"in k)throw Fn(f,"account-exists-with-different-credential",k);if(b.ok&&!("errorMessage"in k))return k;{const Y=b.ok?k.errorMessage:k.error.message,[_e,We]=Y.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===_e)throw Fn(f,"credential-already-in-use",k);if("EMAIL_EXISTS"===_e)throw Fn(f,"email-already-in-use",k);if("USER_DISABLED"===_e)throw Fn(f,"user-disabled",k);const ot=g[_e]||_e.toLowerCase().replace(/[_\s]+/g,"-");if(We)throw gn(f,ot,We);vt(f,ot)}}catch(y){if(y instanceof q.ZR)throw y;vt(f,"network-request-failed",{message:String(y)})}})).apply(this,arguments)}function Pt(f,c,l,g){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,D.Z)(function*(f,c,l,g,y={}){const b=yield De(f,c,l,g,y);return"mfaPendingCredential"in b&&vt(f,"multi-factor-auth-required",{_serverResponse:b}),b})).apply(this,arguments)}function Xr(f,c,l,g){const y=`${c}${l}?${g}`;return f.config.emulator?G(f.config,y):`${f.config.apiScheme}://${y}`}function mn(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Yn{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,g)=>{this.timer=setTimeout(()=>g(At(this.auth,"network-request-failed")),Ce.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fn(f,c,l){const g={appName:f.name};l.email&&(g.email=l.email),l.phoneNumber&&(g.phoneNumber=l.phoneNumber);const y=At(f,c,g);return y.customData._tokenResponse=l,y}function gr(f){return void 0!==f&&void 0!==f.getResponse}function Er(f){return void 0!==f&&void 0!==f.enterprise}class It{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return mn(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function Ft(){return(Ft=(0,D.Z)(function*(f){return(yield De(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function $n(f,c){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,D.Z)(function*(f,c){return De(f,"GET","/v2/recaptchaConfig",oe(f,c))})).apply(this,arguments)}function Or(){return(Or=(0,D.Z)(function*(f,c){return De(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function kr(){return(kr=(0,D.Z)(function*(f,c){return De(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ii(f,c){return ir.apply(this,arguments)}function ir(){return(ir=(0,D.Z)(function*(f,c){return De(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function wi(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function _t(){return(_t=(0,D.Z)(function*(f,c=!1){const l=(0,q.m9)(f),g=yield l.getIdToken(c),y=us(g);we(y&&y.exp&&y.auth_time&&y.iat,l.auth,"internal-error");const b="object"==typeof y.firebase?y.firebase:void 0,k=b?.sign_in_provider;return{claims:y,token:g,authTime:wi(To(y.auth_time)),issuedAtTime:wi(To(y.iat)),expirationTime:wi(To(y.exp)),signInProvider:k||null,signInSecondFactor:b?.sign_in_second_factor||null}})).apply(this,arguments)}function To(f){return 1e3*Number(f)}function us(f){const[c,l,g]=f.split(".");if(void 0===c||void 0===l||void 0===g)return on("JWT malformed, contained fewer than 3 sections"),null;try{const y=(0,q.tV)(l);return y?JSON.parse(y):(on("Failed to decode base64 JWT payload"),null)}catch(y){return on("Caught error parsing JWT payload as JSON",y?.toString()),null}}function zi(f){const c=us(f);return we(c,"internal-error"),we(typeof c.exp<"u","internal-error"),we(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}function Jr(f,c){return bi.apply(this,arguments)}function bi(){return(bi=(0,D.Z)(function*(f,c,l=!1){if(l)return c;try{return yield c}catch(g){throw g instanceof q.ZR&&function _n({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(g)&&f.auth.currentUser===f&&(yield f.auth.signOut()),g}})).apply(this,arguments)}class bo{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const y=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,y)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const g=this.getInterval(c);this.timerId=setTimeout((0,D.Z)(function*(){yield l.iteration()}),g)}iteration(){var c=this;return(0,D.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class $r{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=wi(this.lastLoginAt),this.creationTime=wi(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ln(f){return En.apply(this,arguments)}function En(){return(En=(0,D.Z)(function*(f){var c;const l=f.auth,g=yield f.getIdToken(),y=yield Jr(f,Ii(l,{idToken:g}));we(y?.users.length,l,"internal-error");const b=y.users[0];f._notifyReloadListener(b);const k=null!==(c=b.providerUserInfo)&&void 0!==c&&c.length?Hr(b.providerUserInfo):[],Y=function ra(f,c){return[...f.filter(g=>!c.some(y=>y.providerId===g.providerId)),...c]}(f.providerData,k),ot=!!f.isAnonymous&&!(f.email&&b.passwordHash||Y?.length),at={uid:b.localId,displayName:b.displayName||null,photoURL:b.photoUrl||null,email:b.email||null,emailVerified:b.emailVerified||!1,phoneNumber:b.phoneNumber||null,tenantId:b.tenantId||null,providerData:Y,metadata:new $r(b.createdAt,b.lastLoginAt),isAnonymous:ot};Object.assign(f,at)})).apply(this,arguments)}function Gi(){return(Gi=(0,D.Z)(function*(f){const c=(0,q.m9)(f);yield ln(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Hr(f){return f.map(c=>{var{providerId:l}=c,g=(0,tt._T)(c,["providerId"]);return{providerId:l,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function P(){return(P=(0,D.Z)(function*(f,c){const l=yield ze(f,{},(0,D.Z)(function*(){const g=(0,q.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:y,apiKey:b}=f.config,k=Xr(f,y,"/v1/token",`key=${b}`),Y=yield f._getAdditionalHeaders();return Y["Content-Type"]="application/x-www-form-urlencoded",te.fetch()(k,{method:"POST",headers:Y,body:g})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function ve(){return(ve=(0,D.Z)(function*(f,c){return De(f,"POST","/v2/accounts:revokeToken",oe(f,c))})).apply(this,arguments)}class ne{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){we(c.idToken,"internal-error"),we(typeof c.idToken<"u","internal-error"),we(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):zi(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}updateFromIdToken(c){we(0!==c.length,"internal-error");const l=zi(c);this.updateTokensAndExpiration(c,null,l)}getToken(c,l=!1){var g=this;return(0,D.Z)(function*(){return l||!g.accessToken||g.isExpired?(we(g.refreshToken,c,"user-token-expired"),g.refreshToken?(yield g.refresh(c,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var g=this;return(0,D.Z)(function*(){const{accessToken:y,refreshToken:b,expiresIn:k}=yield function V(f,c){return P.apply(this,arguments)}(c,l);g.updateTokensAndExpiration(y,b,Number(k))})()}updateTokensAndExpiration(c,l,g){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(c,l){const{refreshToken:g,accessToken:y,expirationTime:b}=l,k=new ne;return g&&(we("string"==typeof g,"internal-error",{appName:c}),k.refreshToken=g),y&&(we("string"==typeof y,"internal-error",{appName:c}),k.accessToken=y),b&&(we("number"==typeof b,"internal-error",{appName:c}),k.expirationTime=b),k}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new ne,this.toJSON())}_performRefresh(){return tn("not implemented")}}function me(f,c){we("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class ht{constructor(c){var{uid:l,auth:g,stsTokenManager:y}=c,b=(0,tt._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=g,this.stsTokenManager=y,this.accessToken=y.accessToken,this.displayName=b.displayName||null,this.email=b.email||null,this.emailVerified=b.emailVerified||!1,this.phoneNumber=b.phoneNumber||null,this.photoURL=b.photoURL||null,this.isAnonymous=b.isAnonymous||!1,this.tenantId=b.tenantId||null,this.providerData=b.providerData?[...b.providerData]:[],this.metadata=new $r(b.createdAt||void 0,b.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,D.Z)(function*(){const g=yield Jr(l,l.stsTokenManager.getToken(l.auth,c));return we(g,l.auth,"internal-error"),l.accessToken!==g&&(l.accessToken=g,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),g})()}getIdTokenResult(c){return function Ti(f){return _t.apply(this,arguments)}(this,c)}reload(){return function Ha(f){return Gi.apply(this,arguments)}(this)}_assign(c){this!==c&&(we(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new ht(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var g=this;return(0,D.Z)(function*(){let y=!1;c.idToken&&c.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(c),y=!0),l&&(yield ln(g)),yield g.auth._persistUserIfCurrent(g),y&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var c=this;return(0,D.Z)(function*(){if((0,Te._isFirebaseServerApp)(c.auth.app))return Promise.reject(it(c.auth));const l=yield c.getIdToken();return yield Jr(c,function jr(f,c){return Or.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var g,y,b,k,Y,_e,We,ot;const at=null!==(g=l.displayName)&&void 0!==g?g:void 0,Un=null!==(y=l.email)&&void 0!==y?y:void 0,_s=null!==(b=l.phoneNumber)&&void 0!==b?b:void 0,ed=null!==(k=l.photoURL)&&void 0!==k?k:void 0,rp=null!==(Y=l.tenantId)&&void 0!==Y?Y:void 0,W_=null!==(_e=l._redirectEventId)&&void 0!==_e?_e:void 0,ip=null!==(We=l.createdAt)&&void 0!==We?We:void 0,vw=null!==(ot=l.lastLoginAt)&&void 0!==ot?ot:void 0,{uid:sp,emailVerified:Z_,isAnonymous:td,providerData:K_,stsTokenManager:Ew}=l;we(sp&&Ew,c,"internal-error");const op=ne.fromJSON(this.name,Ew);we("string"==typeof sp,c,"internal-error"),me(at,c.name),me(Un,c.name),we("boolean"==typeof Z_,c,"internal-error"),we("boolean"==typeof td,c,"internal-error"),me(_s,c.name),me(ed,c.name),me(rp,c.name),me(W_,c.name),me(ip,c.name),me(vw,c.name);const Q_=new ht({uid:sp,auth:c,email:Un,emailVerified:Z_,displayName:at,isAnonymous:td,photoURL:ed,phoneNumber:_s,tenantId:rp,stsTokenManager:op,createdAt:ip,lastLoginAt:vw});return K_&&Array.isArray(K_)&&(Q_.providerData=K_.map(RS=>Object.assign({},RS))),W_&&(Q_._redirectEventId=W_),Q_}static _fromIdTokenResponse(c,l,g=!1){return(0,D.Z)(function*(){const y=new ne;y.updateFromServerResponse(l);const b=new ht({uid:l.localId,auth:c,stsTokenManager:y,isAnonymous:g});return yield ln(b),b})()}static _fromGetAccountInfoResponse(c,l,g){return(0,D.Z)(function*(){const y=l.users[0];we(void 0!==y.localId,"internal-error");const b=void 0!==y.providerUserInfo?Hr(y.providerUserInfo):[],k=!(y.email&&y.passwordHash||b?.length),Y=new ne;Y.updateFromIdToken(g);const _e=new ht({uid:y.localId,auth:c,stsTokenManager:Y,isAnonymous:k}),We={uid:y.localId,displayName:y.displayName||null,photoURL:y.photoUrl||null,email:y.email||null,emailVerified:y.emailVerified||!1,phoneNumber:y.phoneNumber||null,tenantId:y.tenantId||null,providerData:b,metadata:new $r(y.createdAt,y.lastLoginAt),isAnonymous:!(y.email&&y.passwordHash||b?.length)};return Object.assign(_e,We),_e})()}}const un=new Map;function bt(f){Jt(f instanceof Function,"Expected a class definition");let c=un.get(f);return c?(Jt(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,un.set(f,c),c)}const sr=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.Z)(function*(){return!0})()}_set(l,g){var y=this;return(0,D.Z)(function*(){y.storage[l]=g})()}_get(l){var g=this;return(0,D.Z)(function*(){const y=g.storage[l];return void 0===y?null:y})()}_remove(l){var g=this;return(0,D.Z)(function*(){delete g.storage[l]})()}_addListener(l,g){}_removeListener(l,g){}}return f.type="NONE",f})();function Ze(f,c,l){return`firebase:${f}:${c}:${l}`}class cn{constructor(c,l,g){this.persistence=c,this.auth=l,this.userKey=g;const{config:y,name:b}=this.auth;this.fullUserKey=Ze(this.userKey,y.apiKey,b),this.fullPersistenceKey=Ze("persistence",y.apiKey,b),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,D.Z)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?ht._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,D.Z)(function*(){if(l.persistence===c)return;const g=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,g?l.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,g="authUser"){return(0,D.Z)(function*(){if(!l.length)return new cn(bt(sr),c,g);const y=(yield Promise.all(l.map(function(){var We=(0,D.Z)(function*(ot){if(yield ot._isAvailable())return ot});return function(ot){return We.apply(this,arguments)}}()))).filter(We=>We);let b=y[0]||bt(sr);const k=Ze(g,c.config.apiKey,c.name);let Y=null;for(const We of l)try{const ot=yield We._get(k);if(ot){const at=ht._fromJSON(c,ot);We!==b&&(Y=at),b=We;break}}catch{}const _e=y.filter(We=>We._shouldAllowMigration);return b._shouldAllowMigration&&_e.length?(b=_e[0],Y&&(yield b._set(k,Y.toJSON())),yield Promise.all(l.map(function(){var We=(0,D.Z)(function*(ot){if(ot!==b)try{yield ot._remove(k)}catch{}});return function(ot){return We.apply(this,arguments)}}())),new cn(b,c,g)):new cn(b,c,g)})()}}function dn(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Et(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Cs(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ls(c))return"Blackberry";if(za(c))return"Webos";if(eo(c))return"Safari";if((c.includes("chrome/")||bn(c))&&!c.includes("edge/"))return"Chrome";if(cs(c))return"Android";{const g=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function Cs(f=(0,q.z$)()){return/firefox\//i.test(f)}function eo(f=(0,q.z$)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function bn(f=(0,q.z$)()){return/crios\//i.test(f)}function Et(f=(0,q.z$)()){return/iemobile/i.test(f)}function cs(f=(0,q.z$)()){return/android/i.test(f)}function ls(f=(0,q.z$)()){return/blackberry/i.test(f)}function za(f=(0,q.z$)()){return/webos/i.test(f)}function Ci(f=(0,q.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function Me(f=(0,q.z$)()){return Ci(f)||cs(f)||za(f)||ls(f)||/windows phone/i.test(f)||Et(f)}function xt(f,c=[]){let l;switch(f){case"Browser":l=dn((0,q.z$)());break;case"Worker":l=`${dn((0,q.z$)())}-${f}`;break;default:l=f}const g=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Te.SDK_VERSION}/${g}`}class $t{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const g=b=>new Promise((k,Y)=>{try{k(c(b))}catch(_e){Y(_e)}});g.onAbort=l,this.queue.push(g);const y=this.queue.length-1;return()=>{this.queue[y]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,D.Z)(function*(){if(l.auth.currentUser===c)return;const g=[];try{for(const y of l.queue)yield y(c),y.onAbort&&g.push(y.onAbort)}catch(y){g.reverse();for(const b of g)try{b()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:y?.message})}})()}}function qt(){return(qt=(0,D.Z)(function*(f,c={}){return De(f,"GET","/v2/passwordPolicy",oe(f,c))})).apply(this,arguments)}class to{constructor(c){var l,g,y,b;const k=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=k.minPasswordLength)&&void 0!==l?l:6,k.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=k.maxPasswordLength),void 0!==k.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=k.containsLowercaseCharacter),void 0!==k.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=k.containsUppercaseCharacter),void 0!==k.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=k.containsNumericCharacter),void 0!==k.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=k.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(y=null===(g=c.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==y?y:"",this.forceUpgradeOnSignin=null!==(b=c.forceUpgradeOnSignin)&&void 0!==b&&b,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,g,y,b,k,Y;const _e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,_e),this.validatePasswordCharacterOptions(c,_e),_e.isValid&&(_e.isValid=null===(l=_e.meetsMinPasswordLength)||void 0===l||l),_e.isValid&&(_e.isValid=null===(g=_e.meetsMaxPasswordLength)||void 0===g||g),_e.isValid&&(_e.isValid=null===(y=_e.containsLowercaseLetter)||void 0===y||y),_e.isValid&&(_e.isValid=null===(b=_e.containsUppercaseLetter)||void 0===b||b),_e.isValid&&(_e.isValid=null===(k=_e.containsNumericCharacter)||void 0===k||k),_e.isValid&&(_e.isValid=null===(Y=_e.containsNonAlphanumericCharacter)||void 0===Y||Y),_e}validatePasswordLengthOptions(c,l){const g=this.customStrengthOptions.minPasswordLength,y=this.customStrengthOptions.maxPasswordLength;g&&(l.meetsMinPasswordLength=c.length>=g),y&&(l.meetsMaxPasswordLength=c.length<=y)}validatePasswordCharacterOptions(c,l){let g;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let y=0;y<c.length;y++)g=c.charAt(y),this.updatePasswordCharacterOptionsStatuses(l,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(c,l,g,y,b){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=y)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=b))}}class gl{constructor(c,l,g,y){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=g,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wh(this),this.idTokenSubscription=new Wh(this),this.beforeStateQueue=new $t(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(c,l){var g=this;return l&&(this._popupRedirectResolver=bt(l)),this._initializationPromise=this.queue((0,D.Z)(function*(){var y,b;if(!g._deleted&&(g.persistenceManager=yield cn.create(g,c),!g._deleted)){if(null!==(y=g._popupRedirectResolver)&&void 0!==y&&y._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(l),g.lastNotifiedUid=(null===(b=g.currentUser)||void 0===b?void 0:b.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,D.Z)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUserFromIdToken(c){var l=this;return(0,D.Z)(function*(){try{const g=yield Ii(l,{idToken:c}),y=yield ht._fromGetAccountInfoResponse(l,g,c);yield l.directlySetCurrentUser(y)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield l.directlySetCurrentUser(null)}})()}initializeCurrentUser(c){var l=this;return(0,D.Z)(function*(){var g;if((0,Te._isFirebaseServerApp)(l.app)){const Y=l.app.settings.authIdToken;return Y?new Promise(_e=>{setTimeout(()=>l.initializeCurrentUserFromIdToken(Y).then(_e,_e))}):l.directlySetCurrentUser(null)}const y=yield l.assertedPersistence.getCurrentUser();let b=y,k=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const Y=null===(g=l.redirectUser)||void 0===g?void 0:g._redirectEventId,_e=b?._redirectEventId,We=yield l.tryRedirectSignIn(c);(!Y||Y===_e)&&We?.user&&(b=We.user,k=!0)}if(!b)return l.directlySetCurrentUser(null);if(!b._redirectEventId){if(k)try{yield l.beforeStateQueue.runMiddleware(b)}catch(Y){b=y,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(Y))}return b?l.reloadAndSetCurrentUserOrClear(b):l.directlySetCurrentUser(null)}return we(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===b._redirectEventId?l.directlySetCurrentUser(b):l.reloadAndSetCurrentUserOrClear(b)})()}tryRedirectSignIn(c){var l=this;return(0,D.Z)(function*(){let g=null;try{g=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,D.Z)(function*(){try{yield ln(c)}catch(g){if("auth/network-request-failed"!==g?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Ge(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,D.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,D.Z)(function*(){if((0,Te._isFirebaseServerApp)(l.app))return Promise.reject(it(l));const g=c?(0,q.m9)(c):null;return g&&we(g.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(g&&g._clone(l))})()}_updateCurrentUser(c,l=!1){var g=this;return(0,D.Z)(function*(){if(!g._deleted)return c&&we(g.tenantId===c.tenantId,g,"tenant-id-mismatch"),l||(yield g.beforeStateQueue.runMiddleware(c)),g.queue((0,D.Z)(function*(){yield g.directlySetCurrentUser(c),g.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,D.Z)(function*(){return(0,Te._isFirebaseServerApp)(c.app)?Promise.reject(it(c)):(yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0))})()}setPersistence(c){var l=this;return(0,Te._isFirebaseServerApp)(this.app)?Promise.reject(it(this)):this.queue((0,D.Z)(function*(){yield l.assertedPersistence.setPersistence(bt(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,D.Z)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const g=l._getPasswordPolicyInternal();return g.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,D.Z)(function*(){const l=yield function xn(f){return qt.apply(this,arguments)}(c),g=new to(l);null===c.tenantId?c._projectPasswordPolicy=g:c._tenantPasswordPolicies[c.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new q.LL("auth","Firebase",c())}onAuthStateChanged(c,l,g){return this.registerStateListener(this.authStateSubscription,c,l,g)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,g){return this.registerStateListener(this.idTokenSubscription,c,l,g)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const g=this.onAuthStateChanged(()=>{g(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,D.Z)(function*(){if(l.currentUser){const g=yield l.currentUser.getIdToken(),y={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:g};null!=l.tenantId&&(y.tenantId=l.tenantId),yield function L(f,c){return ve.apply(this,arguments)}(l,y)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var g=this;return(0,D.Z)(function*(){const y=yield g.getOrInitRedirectPersistenceManager(l);return null===c?y.removeCurrentUser():y.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,D.Z)(function*(){if(!l.redirectPersistenceManager){const g=c&&bt(c)||l._popupRedirectResolver;we(g,l,"argument-error"),l.redirectPersistenceManager=yield cn.create(l,[bt(g._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,D.Z)(function*(){var g,y;return l._isInitialized&&(yield l.queue((0,D.Z)(function*(){}))),(null===(g=l._currentUser)||void 0===g?void 0:g._redirectEventId)===c?l._currentUser:(null===(y=l.redirectUser)||void 0===y?void 0:y._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,D.Z)(function*(){if(c===l.currentUser)return l.queue((0,D.Z)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,g,y){if(this._deleted)return()=>{};const b="function"==typeof l?l:l.next.bind(l);let k=!1;const Y=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(Y,this,"internal-error"),Y.then(()=>{k||b(this.currentUser)}),"function"==typeof l){const _e=c.addObserver(l,g,y);return()=>{k=!0,_e()}}{const _e=c.addObserver(l);return()=>{k=!0,_e()}}}directlySetCurrentUser(c){var l=this;return(0,D.Z)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=xt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,D.Z)(function*(){var l;const g={"X-Client-Version":c.clientVersion};c.app.options.appId&&(g["X-Firebase-gmpid"]=c.app.options.appId);const y=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();y&&(g["X-Firebase-Client"]=y);const b=yield c._getAppCheckToken();return b&&(g["X-Firebase-AppCheck"]=b),g})()}_getAppCheckToken(){var c=this;return(0,D.Z)(function*(){var l;const g=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return g?.error&&function pn(f,...c){Rt.logLevel<=je.in.WARN&&Rt.warn(`Auth (${Te.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function In(f){return(0,q.m9)(f)}class Wh{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,q.ne)(l=>this.observer=l)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ga={loadJS:()=>(0,D.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ml(f){return Ga.loadJS(f)}function I(f){return`__${f}${Math.floor(1e6*Math.random())}`}class Z{constructor(c){this.type="recaptcha-enterprise",this.auth=In(c)}verify(c="verify",l=!1){var g=this;return(0,D.Z)(function*(){function b(){return b=(0,D.Z)(function*(Y){if(!l){if(null==Y.tenantId&&null!=Y._agentRecaptchaConfig)return Y._agentRecaptchaConfig.siteKey;if(null!=Y.tenantId&&void 0!==Y._tenantRecaptchaConfigs[Y.tenantId])return Y._tenantRecaptchaConfigs[Y.tenantId].siteKey}return new Promise(function(){var _e=(0,D.Z)(function*(We,ot){$n(Y,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(at=>{if(void 0!==at.recaptchaKey){const Un=new It(at);return null==Y.tenantId?Y._agentRecaptchaConfig=Un:Y._tenantRecaptchaConfigs[Y.tenantId]=Un,We(Un.siteKey)}ot(new Error("recaptcha Enterprise site key undefined"))}).catch(at=>{ot(at)})});return function(We,ot){return _e.apply(this,arguments)}}())}),b.apply(this,arguments)}function k(Y,_e,We){const ot=window.grecaptcha;Er(ot)?ot.enterprise.ready(()=>{ot.enterprise.execute(Y,{action:c}).then(at=>{_e(at)}).catch(()=>{_e("NO_RECAPTCHA")})}):We(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Y,_e)=>{(function y(Y){return b.apply(this,arguments)})(g.auth).then(We=>{if(!l&&Er(window.grecaptcha))k(We,Y,_e);else{if(typeof window>"u")return void _e(new Error("RecaptchaVerifier is only supported in browser"));let ot=function Kh(){return Ga.recaptchaEnterpriseScript}();0!==ot.length&&(ot+=We),ml(ot).then(()=>{k(We,Y,_e)}).catch(at=>{_e(at)})}}).catch(We=>{_e(We)})})})()}}function F(f,c,l){return W.apply(this,arguments)}function W(){return(W=(0,D.Z)(function*(f,c,l,g=!1){const y=new Z(f);let b;try{b=yield y.verify(l)}catch{b=yield y.verify(l,!0)}const k=Object.assign({},c);return Object.assign(k,g?{captchaResp:b}:{captchaResponse:b}),Object.assign(k,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(k,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),k})).apply(this,arguments)}function z(f,c,l,g){return Be.apply(this,arguments)}function Be(){return Be=(0,D.Z)(function*(f,c,l,g){var y;if(null!==(y=f._getRecaptchaConfig())&&void 0!==y&&y.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const b=yield F(f,c,l,"getOobCode"===l);return g(f,b)}return g(f,c).catch(function(){var b=(0,D.Z)(function*(k){if("auth/missing-recaptcha-token"===k.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Y=yield F(f,c,l,"getOobCode"===l);return g(f,Y)}return Promise.reject(k)});return function(k){return b.apply(this,arguments)}}())}),Be.apply(this,arguments)}function Ht(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function hn(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class Hn{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return tn("not implemented")}_getIdTokenResponse(c){return tn("not implemented")}_linkToIdToken(c,l){return tn("not implemented")}_getReauthenticationResolver(c){return tn("not implemented")}}function ft(f,c){return li.apply(this,arguments)}function li(){return(li=(0,D.Z)(function*(f,c){return De(f,"POST","/v1/accounts:resetPassword",oe(f,c))})).apply(this,arguments)}function Fe(){return(Fe=(0,D.Z)(function*(f,c){return De(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function wn(f,c){return ar.apply(this,arguments)}function ar(){return(ar=(0,D.Z)(function*(f,c){return De(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function ds(){return(ds=(0,D.Z)(function*(f,c){return De(f,"POST","/v1/accounts:update",oe(f,c))})).apply(this,arguments)}function Co(f,c){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,D.Z)(function*(f,c){return Pt(f,"POST","/v1/accounts:signInWithPassword",oe(f,c))})).apply(this,arguments)}function di(f,c){return ti.apply(this,arguments)}function ti(){return(ti=(0,D.Z)(function*(f,c){return De(f,"POST","/v1/accounts:sendOobCode",oe(f,c))})).apply(this,arguments)}function qi(){return(qi=(0,D.Z)(function*(f,c){return di(f,c)})).apply(this,arguments)}function qa(f,c){return no.apply(this,arguments)}function no(){return(no=(0,D.Z)(function*(f,c){return di(f,c)})).apply(this,arguments)}function _l(f,c){return tc.apply(this,arguments)}function tc(){return(tc=(0,D.Z)(function*(f,c){return di(f,c)})).apply(this,arguments)}function nc(){return(nc=(0,D.Z)(function*(f,c){return di(f,c)})).apply(this,arguments)}function ro(){return(ro=(0,D.Z)(function*(f,c){return Pt(f,"POST","/v1/accounts:signInWithEmailLink",oe(f,c))})).apply(this,arguments)}function Wa(){return(Wa=(0,D.Z)(function*(f,c){return Pt(f,"POST","/v1/accounts:signInWithEmailLink",oe(f,c))})).apply(this,arguments)}class ic extends Hn{constructor(c,l,g,y=null){super("password",g),this._email=c,this._password=l,this._tenantId=y}static _fromEmailAndPassword(c,l){return new ic(c,l,"password")}static _fromEmailAndCode(c,l,g=null){return new ic(c,l,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,D.Z)(function*(){switch(l.signInMethod){case"password":return z(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Co);case"emailLink":return function Yh(f,c){return ro.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:vt(c,"internal-error")}})()}_linkToIdToken(c,l){var g=this;return(0,D.Z)(function*(){switch(g.signInMethod){case"password":return z(c,{idToken:l,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wn);case"emailLink":return function rc(f,c){return Wa.apply(this,arguments)}(c,{idToken:l,email:g._email,oobCode:g._password});default:vt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function io(f,c){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,D.Z)(function*(f,c){return Pt(f,"POST","/v1/accounts:signInWithIdp",oe(f,c))})).apply(this,arguments)}class hi extends Hn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new hi(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):vt("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:g,signInMethod:y}=l,b=(0,tt._T)(l,["providerId","signInMethod"]);if(!g||!y)return null;const k=new hi(g,y);return k.idToken=b.idToken||void 0,k.accessToken=b.accessToken||void 0,k.secret=b.secret,k.nonce=b.nonce,k.pendingToken=b.pendingToken||null,k}_getIdTokenResponse(c){return io(c,this.buildRequest())}_linkToIdToken(c,l){const g=this.buildRequest();return g.idToken=l,io(c,g)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,io(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,q.xO)(l)}return c}}function Bs(){return(Bs=(0,D.Z)(function*(f,c){return De(f,"POST","/v1/accounts:sendVerificationCode",oe(f,c))})).apply(this,arguments)}function Ne(){return(Ne=(0,D.Z)(function*(f,c){return Pt(f,"POST","/v1/accounts:signInWithPhoneNumber",oe(f,c))})).apply(this,arguments)}function et(){return(et=(0,D.Z)(function*(f,c){const l=yield Pt(f,"POST","/v1/accounts:signInWithPhoneNumber",oe(f,c));if(l.temporaryProof)throw Fn(f,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const yl={USER_NOT_FOUND:"user-not-found"};function ia(){return(ia=(0,D.Z)(function*(f,c){return Pt(f,"POST","/v1/accounts:signInWithPhoneNumber",oe(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),yl)})).apply(this,arguments)}class sa extends Hn{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new sa({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new sa({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function bI(f,c){return Ne.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function Nm(f,c){return et.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Jh(f,c){return ia.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:g,verificationCode:y}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:g,code:y}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:g,phoneNumber:y,temporaryProof:b}=c;return g||l||y||b?new sa({verificationId:l,verificationCode:g,phoneNumber:y,temporaryProof:b}):null}}class Wi{constructor(c){var l,g,y,b,k,Y;const _e=(0,q.zd)((0,q.pd)(c)),We=null!==(l=_e.apiKey)&&void 0!==l?l:null,ot=null!==(g=_e.oobCode)&&void 0!==g?g:null,at=function CI(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(y=_e.mode)&&void 0!==y?y:null);we(We&&ot&&at,"argument-error"),this.apiKey=We,this.operation=at,this.code=ot,this.continueUrl=null!==(b=_e.continueUrl)&&void 0!==b?b:null,this.languageCode=null!==(k=_e.languageCode)&&void 0!==k?k:null,this.tenantId=null!==(Y=_e.tenantId)&&void 0!==Y?Y:null}static parseLink(c){const l=function DI(f){const c=(0,q.zd)((0,q.pd)(f)).link,l=c?(0,q.zd)((0,q.pd)(c)).deep_link_id:null,g=(0,q.zd)((0,q.pd)(f)).deep_link_id;return(g?(0,q.zd)((0,q.pd)(g)).link:null)||g||l||c||f}(c);try{return new Wi(l)}catch{return null}}}let Zi=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(l,g){return ic._fromEmailAndPassword(l,g)}static credentialWithLink(l,g){const y=Wi.parseLink(g);return we(y,"argument-error"),ic._fromEmailAndCode(l,y.code,y.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class Fr{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class rn extends Fr{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class so extends rn{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return we("providerId"in l&&"signInMethod"in l,"argument-error"),hi._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return we(c.idToken||c.accessToken,"argument-error"),hi._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return so.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return so.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:g,oauthTokenSecret:y,pendingToken:b,nonce:k,providerId:Y}=c;if(!g&&!y&&!l&&!b||!Y)return null;try{return new so(Y)._credential({idToken:l,accessToken:g,nonce:k,pendingToken:b})}catch{return null}}}let vl=(()=>{class f extends rn{constructor(){super("facebook.com")}static credential(l){return hi._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return f.credential(l.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),El=(()=>{class f extends rn{constructor(){super("google.com"),this.addScope("profile")}static credential(l,g){return hi._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:g})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:g,oauthAccessToken:y}=l;if(!g&&!y)return null;try{return f.credential(g,y)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),tf=(()=>{class f extends rn{constructor(){super("github.com")}static credential(l){return hi._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return f.credential(l.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class js extends Hn{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return io(c,this.buildRequest())}_linkToIdToken(c,l){const g=this.buildRequest();return g.idToken=l,io(c,g)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,io(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:g,signInMethod:y,pendingToken:b}=l;return g&&y&&b&&g===y?new js(g,b):null}static _create(c,l){return new js(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class sc extends Fr{constructor(c){we(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return sc.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return sc.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=js.fromJSON(c);return we(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:g}=c;if(!l||!g)return null;try{return js._create(g,l)}catch{return null}}}let Il=(()=>{class f extends rn{constructor(){super("twitter.com")}static credential(l,g){return hi._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:g})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:g,oauthTokenSecret:y}=l;if(!g||!y)return null;try{return f.credential(g,y)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function nf(f,c){return wl.apply(this,arguments)}function wl(){return(wl=(0,D.Z)(function*(f,c){return Pt(f,"POST","/v1/accounts:signUp",oe(f,c))})).apply(this,arguments)}class ni{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,g,y=!1){return(0,D.Z)(function*(){const b=yield ht._fromIdTokenResponse(c,g,y),k=rf(g);return new ni({user:b,providerId:k,_tokenResponse:g,operationType:l})})()}static _forOperation(c,l,g){return(0,D.Z)(function*(){yield c._updateTokensIfNecessary(g,!0);const y=rf(g);return new ni({user:c,providerId:y,_tokenResponse:g,operationType:l})})()}}function rf(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function sf(){return(sf=(0,D.Z)(function*(f){var c;if((0,Te._isFirebaseServerApp)(f.app))return Promise.reject(it(f));const l=In(f);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new ni({user:l.currentUser,providerId:null,operationType:"signIn"});const g=yield nf(l,{returnSecureToken:!0}),y=yield ni._fromIdTokenResponse(l,"signIn",g,!0);return yield l._updateCurrentUser(y.user),y})).apply(this,arguments)}class oc extends q.ZR{constructor(c,l,g,y){var b;super(l.code,l.message),this.operationType=g,this.user=y,Object.setPrototypeOf(this,oc.prototype),this.customData={appName:c.name,tenantId:null!==(b=c.tenantId)&&void 0!==b?b:void 0,_serverResponse:l.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(c,l,g,y){return new oc(c,l,g,y)}}function Fm(f,c,l,g){return("reauthenticate"===c?l._getReauthenticationResolver(f):l._getIdTokenResponse(f)).catch(b=>{throw"auth/multi-factor-auth-required"===b.code?oc._fromErrorAndOperation(f,b,c,g):b})}function Lm(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function af(){return af=(0,D.Z)(function*(f,c){const l=(0,q.m9)(f);yield bl(!0,l,c);const{providerUserInfo:g}=yield function bs(f,c){return kr.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),y=Lm(g||[]);return l.providerData=l.providerData.filter(b=>y.has(b.providerId)),y.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),af.apply(this,arguments)}function Tl(f,c){return uf.apply(this,arguments)}function uf(){return(uf=(0,D.Z)(function*(f,c,l=!1){const g=yield Jr(f,c._linkToIdToken(f.auth,yield f.getIdToken()),l);return ni._forOperation(f,"link",g)})).apply(this,arguments)}function bl(f,c,l){return cf.apply(this,arguments)}function cf(){return(cf=(0,D.Z)(function*(f,c,l){yield ln(c);const y=!1===f?"provider-already-linked":"no-such-provider";we(Lm(c.providerData).has(l)===f,c.auth,y)})).apply(this,arguments)}function Vm(f,c){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,D.Z)(function*(f,c,l=!1){const{auth:g}=f;if((0,Te._isFirebaseServerApp)(g.app))return Promise.reject(it(g));const y="reauthenticate";try{const b=yield Jr(f,Fm(g,y,c,f),l);we(b.idToken,g,"internal-error");const k=us(b.idToken);we(k,g,"internal-error");const{sub:Y}=k;return we(f.uid===Y,g,"user-mismatch"),ni._forOperation(f,y,b)}catch(b){throw"auth/user-not-found"===b?.code&&vt(g,"user-mismatch"),b}})).apply(this,arguments)}function Um(f,c){return lf.apply(this,arguments)}function lf(){return(lf=(0,D.Z)(function*(f,c,l=!1){if((0,Te._isFirebaseServerApp)(f.app))return Promise.reject(it(f));const g="signIn",y=yield Fm(f,g,c),b=yield ni._fromIdTokenResponse(f,g,y);return l||(yield f._updateCurrentUser(b.user)),b})).apply(this,arguments)}function Dl(f,c){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,D.Z)(function*(f,c){return Um(In(f),c)})).apply(this,arguments)}function Bm(f,c){return df.apply(this,arguments)}function df(){return(df=(0,D.Z)(function*(f,c){const l=(0,q.m9)(f);return yield bl(!1,l,c.providerId),Tl(l,c)})).apply(this,arguments)}function jm(f,c){return ri.apply(this,arguments)}function ri(){return(ri=(0,D.Z)(function*(f,c){return Vm((0,q.m9)(f),c)})).apply(this,arguments)}function Al(){return(Al=(0,D.Z)(function*(f,c){return Pt(f,"POST","/v1/accounts:signInWithCustomToken",oe(f,c))})).apply(this,arguments)}function ii(){return ii=(0,D.Z)(function*(f,c){if((0,Te._isFirebaseServerApp)(f.app))return Promise.reject(it(f));const l=In(f),g=yield function AI(f,c){return Al.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),y=yield ni._fromIdTokenResponse(l,"signIn",g);return yield l._updateCurrentUser(y.user),y}),ii.apply(this,arguments)}class en{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?Ar._fromServerResponse(c,l):"totpInfo"in l?Gr._fromServerResponse(c,l):vt(c,"internal-error")}}class Ar extends en{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new Ar(l)}}class Gr extends en{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new Gr(l)}}function ao(f,c,l){var g;we((null===(g=l.url)||void 0===g?void 0:g.length)>0,f,"invalid-continue-uri"),we(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(we(l.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(we(l.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function fi(f){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,D.Z)(function*(f){const c=In(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function Za(){return(Za=(0,D.Z)(function*(f,c,l){const g=In(f),y={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&ao(g,y,l),yield z(g,y,"getOobCode",qa)})).apply(this,arguments)}function hf(){return hf=(0,D.Z)(function*(f,c,l){yield ft((0,q.m9)(f),{oobCode:c,newPassword:l}).catch(function(){var g=(0,D.Z)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&fi(f),y});return function(y){return g.apply(this,arguments)}}())}),hf.apply(this,arguments)}function Je(){return Je=(0,D.Z)(function*(f,c){yield function Kt(f,c){return ds.apply(this,arguments)}((0,q.m9)(f),{oobCode:c})}),Je.apply(this,arguments)}function Vt(f,c){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,D.Z)(function*(f,c){const l=(0,q.m9)(f),g=yield ft(l,{oobCode:c}),y=g.requestType;switch(we(y,l,"internal-error"),y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":we(g.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":we(g.mfaInfo,l,"internal-error");default:we(g.email,l,"internal-error")}let b=null;return g.mfaInfo&&(b=en._fromServerResponse(In(l),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:b},operation:y}})).apply(this,arguments)}function oa(){return(oa=(0,D.Z)(function*(f,c){const{data:l}=yield Vt((0,q.m9)(f),c);return l.email})).apply(this,arguments)}function Do(){return(Do=(0,D.Z)(function*(f,c,l){if((0,Te._isFirebaseServerApp)(f.app))return Promise.reject(it(f));const g=In(f),k=yield z(g,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nf).catch(_e=>{throw"auth/password-does-not-meet-requirements"===_e.code&&fi(f),_e}),Y=yield ni._fromIdTokenResponse(g,"signIn",k);return yield g._updateCurrentUser(Y.user),Y})).apply(this,arguments)}function So(){return(So=(0,D.Z)(function*(f,c,l){const g=In(f),y={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function b(k,Y){we(Y.handleCodeInApp,g,"argument-error"),Y&&ao(g,k,Y)})(y,l),yield z(g,y,"getOobCode",_l)})).apply(this,arguments)}function Rl(){return(Rl=(0,D.Z)(function*(f,c,l){if((0,Te._isFirebaseServerApp)(f.app))return Promise.reject(it(f));const g=(0,q.m9)(f),y=Zi.credentialWithLink(c,l||Qn());return we(y._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),Dl(g,y)})).apply(this,arguments)}function Xn(){return(Xn=(0,D.Z)(function*(f,c){return De(f,"POST","/v1/accounts:createAuthUri",oe(f,c))})).apply(this,arguments)}function Ro(){return Ro=(0,D.Z)(function*(f,c){const g={identifier:c,continueUri:vr()?Qn():"http://localhost"},{signinMethods:y}=yield function Ka(f,c){return Xn.apply(this,arguments)}((0,q.m9)(f),g);return y||[]}),Ro.apply(this,arguments)}function aa(){return aa=(0,D.Z)(function*(f,c){const l=(0,q.m9)(f),y={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&ao(l.auth,y,c);const{email:b}=yield function zr(f,c){return qi.apply(this,arguments)}(l.auth,y);b!==f.email&&(yield f.reload())}),aa.apply(this,arguments)}function Hs(){return Hs=(0,D.Z)(function*(f,c,l){const g=(0,q.m9)(f),b={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};l&&ao(g.auth,b,l);const{email:k}=yield function Qh(f,c){return nc.apply(this,arguments)}(g.auth,b);k!==f.email&&(yield f.reload())}),Hs.apply(this,arguments)}function ua(){return(ua=(0,D.Z)(function*(f,c){return De(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Qt(){return Qt=(0,D.Z)(function*(f,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const g=(0,q.m9)(f),b={idToken:yield g.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},k=yield Jr(g,function uo(f,c){return ua.apply(this,arguments)}(g.auth,b));g.displayName=k.displayName||null,g.photoURL=k.photoUrl||null;const Y=g.providerData.find(({providerId:_e})=>"password"===_e);Y&&(Y.displayName=g.displayName,Y.photoURL=g.photoURL),yield g._updateTokensIfNecessary(k)}),Qt.apply(this,arguments)}function pf(f,c,l){return hs.apply(this,arguments)}function hs(){return hs=(0,D.Z)(function*(f,c,l){const{auth:g}=f,b={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(b.email=c),l&&(b.password=l);const k=yield Jr(f,function ei(f,c){return Fe.apply(this,arguments)}(g,b));yield f._updateTokensIfNecessary(k,!0)}),hs.apply(this,arguments)}class Ss{constructor(c,l,g={}){this.isNewUser=c,this.providerId=l,this.profile=g}}class Qa extends Ss{constructor(c,l,g,y){super(c,l,g),this.username=y}}class qr extends Ss{constructor(c,l){super(c,"facebook.com",l)}}class uS extends Qa{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class Ai extends Ss{constructor(c,l){super(c,"google.com",l)}}class pi extends Qa{constructor(c,l,g){super(c,"twitter.com",l,g)}}function gf(f){const{user:c,_tokenResponse:l}=f;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function Pl(f){var c,l;if(!f)return null;const{providerId:g}=f,y=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},b=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!g&&f?.idToken){const k=null===(l=null===(c=us(f.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(k)return new Ss(b,"anonymous"!==k&&"custom"!==k?k:null)}if(!g)return null;switch(g){case"facebook.com":return new qr(b,y);case"github.com":return new uS(b,y);case"google.com":return new Ai(b,y);case"twitter.com":return new pi(b,y,f.screenName||null);case"custom":case"anonymous":return new Ss(b,null);default:return new Ss(b,g,y)}}(l)}class Xa{constructor(c,l,g){this.type=c,this.credential=l,this.user=g}static _fromIdtoken(c,l){return new Xa("enroll",c,l)}static _fromMfaPendingCredential(c){return new Xa("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,g;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return Xa._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(g=c.multiFactorSession)&&void 0!==g&&g.idToken)return Xa._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Gm{constructor(c,l,g){this.session=c,this.hints=l,this.signInResolver=g}static _fromError(c,l){const g=In(c),y=l.customData._serverResponse,b=(y.mfaInfo||[]).map(Y=>en._fromServerResponse(g,Y));we(y.mfaPendingCredential,g,"internal-error");const k=Xa._fromMfaPendingCredential(y.mfaPendingCredential);return new Gm(k,b,function(){var Y=(0,D.Z)(function*(_e){const We=yield _e._process(g,k);delete y.mfaInfo,delete y.mfaPendingCredential;const ot=Object.assign(Object.assign({},y),{idToken:We.idToken,refreshToken:We.refreshToken});switch(l.operationType){case"signIn":const at=yield ni._fromIdTokenResponse(g,l.operationType,ot);return yield g._updateCurrentUser(at.user),at;case"reauthenticate":return we(l.user,g,"internal-error"),ni._forOperation(l.user,l.operationType,ot);default:vt(g,"internal-error")}});return function(_e){return Y.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,D.Z)(function*(){return l.signInResolver(c)})()}}class Ml{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(g=>en._fromServerResponse(c.auth,g)))})}static _fromUser(c){return new Ml(c)}getSession(){var c=this;return(0,D.Z)(function*(){return Xa._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var g=this;return(0,D.Z)(function*(){const y=c,b=yield g.getSession(),k=yield Jr(g.user,y._process(g.user.auth,b,l));return yield g.user._updateTokensIfNecessary(k),g.user.reload()})()}unenroll(c){var l=this;return(0,D.Z)(function*(){const g="string"==typeof c?c:c.uid,y=yield l.user.getIdToken();try{const b=yield Jr(l.user,function gS(f,c){return De(f,"POST","/v2/accounts/mfaEnrollment:withdraw",oe(f,c))}(l.user.auth,{idToken:y,mfaEnrollmentId:g}));l.enrolledFactors=l.enrolledFactors.filter(({uid:k})=>k!==g),yield l.user._updateTokensIfNecessary(b),yield l.user.reload()}catch(b){throw b}})()}}const xl=new WeakMap,_f="__sak";class MI{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(_f,"1"),this.storage.removeItem(_f),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const wr=(()=>{class f extends MI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,g)=>this.onStorageEvent(l,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ca(){const f=(0,q.z$)();return eo(f)||Ci(f)}()&&function St(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Me(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const g of Object.keys(this.listeners)){const y=this.storage.getItem(g),b=this.localCache[g];y!==b&&l(g,b,y)}}onStorageEvent(l,g=!1){if(!l.key)return void this.forAllChangedKeys((Y,_e,We)=>{this.notifyListeners(Y,We)});const y=l.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Y=this.storage.getItem(y);if(l.newValue!==Y)null!==l.newValue?this.storage.setItem(y,l.newValue):this.storage.removeItem(y);else if(this.localCache[y]===l.newValue&&!g)return}const b=()=>{const Y=this.storage.getItem(y);!g&&this.localCache[y]===Y||this.notifyListeners(y,Y)},k=this.storage.getItem(y);!function ie(){return(0,q.w1)()&&10===document.documentMode}()||k===l.newValue||l.newValue===l.oldValue?b():setTimeout(b,10)}notifyListeners(l,g){this.localCache[l]=g;const y=this.listeners[l];if(y)for(const b of Array.from(y))b(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,g,y)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:g,newValue:y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(g)}_removeListener(l,g){this.listeners[l]&&(this.listeners[l].delete(g),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,g){var y=()=>super._set,b=this;return(0,D.Z)(function*(){yield y().call(b,l,g),b.localCache[l]=JSON.stringify(g)})()}_get(l){var g=()=>super._get,y=this;return(0,D.Z)(function*(){const b=yield g().call(y,l);return y.localCache[l]=JSON.stringify(b),b})()}_remove(l){var g=()=>super._remove,y=this;return(0,D.Z)(function*(){yield g().call(y,l),delete y.localCache[l]})()}}return f.type="LOCAL",f})(),Sr=(()=>{class f extends MI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,g){}_removeListener(l,g){}}return f.type="SESSION",f})();let Wm=(()=>{class f{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const g=this.receivers.find(b=>b.isListeningto(l));if(g)return g;const y=new f(l);return this.receivers.push(y),y}isListeningto(l){return this.eventTarget===l}handleEvent(l){var g=this;return(0,D.Z)(function*(){const y=l,{eventId:b,eventType:k,data:Y}=y.data,_e=g.handlersMap[k];if(!_e?.size)return;y.ports[0].postMessage({status:"ack",eventId:b,eventType:k});const We=Array.from(_e).map(function(){var at=(0,D.Z)(function*(Un){return Un(y.origin,Y)});return function(Un){return at.apply(this,arguments)}}()),ot=yield function qm(f){return Promise.all(f.map(function(){var c=(0,D.Z)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(g){return{fulfilled:!1,reason:g}}});return function(l){return c.apply(this,arguments)}}()))}(We);y.ports[0].postMessage({status:"done",eventId:b,eventType:k,response:ot})})()}_subscribe(l,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(g)}_unsubscribe(l,g){this.handlersMap[l]&&g&&this.handlersMap[l].delete(g),(!g||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function Ja(f="",c=10){let l="";for(let g=0;g<c;g++)l+=Math.floor(10*Math.random());return f+l}class Zm{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,g=50){var y=this;return(0,D.Z)(function*(){const b=typeof MessageChannel<"u"?new MessageChannel:null;if(!b)throw new Error("connection_unavailable");let k,Y;return new Promise((_e,We)=>{const ot=Ja("",20);b.port1.start();const at=setTimeout(()=>{We(new Error("unsupported_event"))},g);Y={messageChannel:b,onMessage(Un){const _s=Un;if(_s.data.eventId===ot)switch(_s.data.status){case"ack":clearTimeout(at),k=setTimeout(()=>{We(new Error("timeout"))},3e3);break;case"done":clearTimeout(k),_e(_s.data.response);break;default:clearTimeout(at),clearTimeout(k),We(new Error("invalid_response"))}}},y.handlers.add(Y),b.port1.addEventListener("message",Y.onMessage),y.target.postMessage({eventType:c,eventId:ot,data:l},[b.port2])}).finally(()=>{Y&&y.removeMessageHandler(Y)})})()}}function cr(){return window}function dc(){return typeof cr().WorkerGlobalScope<"u"&&"function"==typeof cr().importScripts}function Nl(){return(Nl=(0,D.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const hc="firebaseLocalStorageDb",co="firebaseLocalStorage",Ef="fbase_key";class Ol{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function If(f,c){return f.transaction([co],c?"readwrite":"readonly").objectStore(co)}function wf(){const f=indexedDB.open(hc,1);return new Promise((c,l)=>{f.addEventListener("error",()=>{l(f.error)}),f.addEventListener("upgradeneeded",()=>{const g=f.result;try{g.createObjectStore(co,{keyPath:Ef})}catch(y){l(y)}}),f.addEventListener("success",(0,D.Z)(function*(){const g=f.result;g.objectStoreNames.contains(co)?c(g):(g.close(),yield function yS(){const f=indexedDB.deleteDatabase(hc);return new Ol(f).toPromise()}(),c(yield wf()))}))})}function Xm(f,c,l){return Jm.apply(this,arguments)}function Jm(){return(Jm=(0,D.Z)(function*(f,c,l){const g=If(f,!0).put({[Ef]:c,value:l});return new Ol(g).toPromise()})).apply(this,arguments)}function pc(){return(pc=(0,D.Z)(function*(f,c){const l=If(f,!1).get(c),g=yield new Ol(l).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function t_(f,c){const l=If(f,!0).delete(c);return new Ol(l).toPromise()}const eu=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,D.Z)(function*(){return l.db||(l.db=yield wf()),l.db})()}_withRetries(l){var g=this;return(0,D.Z)(function*(){let y=0;for(;;)try{const b=yield g._openDb();return yield l(b)}catch(b){if(y++>3)throw b;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,D.Z)(function*(){return dc()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,D.Z)(function*(){l.receiver=Wm._getInstance(function Ym(){return dc()?self:null}()),l.receiver._subscribe("keyChanged",function(){var g=(0,D.Z)(function*(y,b){return{keyProcessed:(yield l._poll()).includes(b.key)}});return function(y,b){return g.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var g=(0,D.Z)(function*(y,b){return["keyChanged"]});return function(y,b){return g.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,D.Z)(function*(){var g,y;if(l.activeServiceWorker=yield function vf(){return Nl.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new Zm(l.activeServiceWorker);const b=yield l.sender._send("ping",{},800);b&&null!==(g=b[0])&&void 0!==g&&g.fulfilled&&null!==(y=b[0])&&void 0!==y&&y.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var g=this;return(0,D.Z)(function*(){if(g.sender&&g.activeServiceWorker&&function Qm(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:l},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.Z)(function*(){try{if(!indexedDB)return!1;const l=yield wf();return yield Xm(l,_f,"1"),yield t_(l,_f),!0}catch{}return!1})()}_withPendingWrite(l){var g=this;return(0,D.Z)(function*(){g.pendingWrites++;try{yield l()}finally{g.pendingWrites--}})()}_set(l,g){var y=this;return(0,D.Z)(function*(){return y._withPendingWrite((0,D.Z)(function*(){return yield y._withRetries(b=>Xm(b,l,g)),y.localCache[l]=g,y.notifyServiceWorker(l)}))})()}_get(l){var g=this;return(0,D.Z)(function*(){const y=yield g._withRetries(b=>function e_(f,c){return pc.apply(this,arguments)}(b,l));return g.localCache[l]=y,y})()}_remove(l){var g=this;return(0,D.Z)(function*(){return g._withPendingWrite((0,D.Z)(function*(){return yield g._withRetries(y=>t_(y,l)),delete g.localCache[l],g.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,D.Z)(function*(){const g=yield l._withRetries(k=>{const Y=If(k,!1).getAll();return new Ol(Y).toPromise()});if(!g)return[];if(0!==l.pendingWrites)return[];const y=[],b=new Set;if(0!==g.length)for(const{fbase_key:k,value:Y}of g)b.add(k),JSON.stringify(l.localCache[k])!==JSON.stringify(Y)&&(l.notifyListeners(k,Y),y.push(k));for(const k of Object.keys(l.localCache))l.localCache[k]&&!b.has(k)&&(l.notifyListeners(k,null),y.push(k));return y})()}notifyListeners(l,g){this.localCache[l]=g;const y=this.listeners[l];if(y)for(const b of Array.from(y))b(g)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,D.Z)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(g)}_removeListener(l,g){this.listeners[l]&&(this.listeners[l].delete(g),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),gc=1e12;class kI{constructor(c){this.auth=c,this.counter=gc,this._widgets=new Map}render(c,l){const g=this.counter;return this._widgets.set(g,new i_(c,this.auth.name,l||{})),this.counter++,g}reset(c){var l;const g=c||gc;null===(l=this._widgets.get(g))||void 0===l||l.delete(),this._widgets.delete(g)}getResponse(c){var l;return(null===(l=this._widgets.get(c||gc))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,D.Z)(function*(){var g;return null===(g=l._widgets.get(c||gc))||void 0===g||g.execute(),""})()}}class i_{constructor(c,l,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const y="string"==typeof c?document.getElementById(c):c;we(y,"argument-error",{appName:l}),this.container=y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function FI(f){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<f;g++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const s_=I("rcb"),LI=new $(3e4,6e4);class fs{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=cr().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return we(function o_(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&gr(cr().grecaptcha)?Promise.resolve(cr().grecaptcha):new Promise((g,y)=>{const b=cr().setTimeout(()=>{y(At(c,"network-request-failed"))},LI.get());cr()[s_]=()=>{cr().clearTimeout(b),delete cr()[s_];const Y=cr().grecaptcha;if(!Y||!gr(Y))return void y(At(c,"internal-error"));const _e=Y.render;Y.render=(We,ot)=>{const at=_e(We,ot);return this.counter++,at},this.hostLanguage=l,g(Y)},ml(`${function Zh(){return Ga.recaptchaV2Script}()}?${(0,q.xO)({onload:s_,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(b),y(At(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=cr().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class VI{load(c){return(0,D.Z)(function*(){return new kI(c)})()}clearedOneInstance(){}}const a_="recaptcha",u_={theme:"light",type:"image"};class c_{constructor(c,l,g=Object.assign({},u_)){this.parameters=g,this.type=a_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=In(c),this.isInvisible="invisible"===this.parameters.size,we(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const y="string"==typeof l?document.getElementById(l):l;we(y,this.auth,"argument-error"),this.container=y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new VI:new fs,this.validateStartingState()}verify(){var c=this;return(0,D.Z)(function*(){c.assertNotDestroyed();const l=yield c.render(),g=c.getAssertedRecaptcha();return g.getResponse(l)||new Promise(b=>{const k=Y=>{Y&&(c.tokenChangeListeners.delete(k),b(Y))};c.tokenChangeListeners.add(k),c.isInvisible&&g.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){we(!this.parameters.sitekey,this.auth,"argument-error"),we(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),we(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(g=>g(l)),"function"==typeof c)c(l);else if("string"==typeof c){const g=cr()[c];"function"==typeof g&&g(l)}}}assertNotDestroyed(){we(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,D.Z)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const g=document.createElement("div");l.appendChild(g),l=g}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,D.Z)(function*(){we(vr()&&!dc(),c.auth,"internal-error"),yield function UI(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function Tt(f){return Ft.apply(this,arguments)}(c.auth);we(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return we(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class mc{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=sa._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function ps(){return(ps=(0,D.Z)(function*(f,c,l){if((0,Te._isFirebaseServerApp)(f.app))return Promise.reject(it(f));const g=In(f),y=yield la(g,c,(0,q.m9)(l));return new mc(y,b=>Dl(g,b))})).apply(this,arguments)}function kl(){return(kl=(0,D.Z)(function*(f,c,l){const g=(0,q.m9)(f);yield bl(!1,g,"phone");const y=yield la(g.auth,c,(0,q.m9)(l));return new mc(y,b=>Bm(g,b))})).apply(this,arguments)}function _c(){return(_c=(0,D.Z)(function*(f,c,l){const g=(0,q.m9)(f);if((0,Te._isFirebaseServerApp)(g.auth.app))return Promise.reject(it(g.auth));const y=yield la(g.auth,c,(0,q.m9)(l));return new mc(y,b=>jm(g,b))})).apply(this,arguments)}function la(f,c,l){return oi.apply(this,arguments)}function oi(){return oi=(0,D.Z)(function*(f,c,l){var g;const y=yield l.verify();try{let b;if(we("string"==typeof y,f,"argument-error"),we(l.type===a_,f,"argument-error"),b="string"==typeof c?{phoneNumber:c}:c,"session"in b){const k=b.session;if("phoneNumber"in b)return we("enroll"===k.type,f,"internal-error"),(yield function hS(f,c){return De(f,"POST","/v2/accounts/mfaEnrollment:start",oe(f,c))}(f,{idToken:k.credential,phoneEnrollmentInfo:{phoneNumber:b.phoneNumber,recaptchaToken:y}})).phoneSessionInfo.sessionInfo;{we("signin"===k.type,f,"internal-error");const Y=(null===(g=b.multiFactorHint)||void 0===g?void 0:g.uid)||b.multiFactorUid;return we(Y,f,"missing-multi-factor-info"),(yield function n_(f,c){return De(f,"POST","/v2/accounts/mfaSignIn:start",oe(f,c))}(f,{mfaPendingCredential:k.credential,mfaEnrollmentId:Y,phoneSignInInfo:{recaptchaToken:y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:k}=yield function TI(f,c){return Bs.apply(this,arguments)}(f,{phoneNumber:b.phoneNumber,recaptchaToken:y});return k}}finally{l._reset()}}),oi.apply(this,arguments)}function Fl(){return(Fl=(0,D.Z)(function*(f,c){const l=(0,q.m9)(f);if((0,Te._isFirebaseServerApp)(l.auth.app))return Promise.reject(it(l.auth));yield Tl(l,c)})).apply(this,arguments)}let Gs=(()=>{class f{constructor(l){this.providerId=f.PROVIDER_ID,this.auth=In(l)}verifyPhoneNumber(l,g){return la(this.auth,l,(0,q.m9)(g))}static credential(l,g){return sa._fromVerification(l,g)}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:g,temporaryProof:y}=l;return g&&y?sa._fromTokenResponse(g,y):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function Rr(f,c){return c?bt(c):(we(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class bf extends Hn{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return io(c,this._buildIdpRequest())}_linkToIdToken(c,l){return io(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return io(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function $I(f){return Um(f.auth,new bf(f),f.bypassAuthState)}function HI(f){const{auth:c,user:l}=f;return we(l,c,"internal-error"),Vm(l,new bf(f),f.bypassAuthState)}function Mo(f){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,D.Z)(function*(f){const{auth:c,user:l}=f;return we(l,c,"internal-error"),Tl(l,new bf(f),f.bypassAuthState)})).apply(this,arguments)}class d_{constructor(c,l,g,y,b=!1){this.auth=c,this.resolver=g,this.user=y,this.bypassAuthState=b,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,D.Z)(function*(g,y){c.pendingPromise={resolve:g,reject:y};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(b){c.reject(b)}});return function(g,y){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,D.Z)(function*(){const{urlResponse:g,sessionId:y,postBody:b,tenantId:k,error:Y,type:_e}=c;if(Y)return void l.reject(Y);const We={auth:l.auth,requestUri:g,sessionId:y,tenantId:k||void 0,postBody:b||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(_e)(We))}catch(ot){l.reject(ot)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return $I;case"linkViaPopup":case"linkViaRedirect":return Mo;case"reauthViaPopup":case"reauthViaRedirect":return HI;default:vt(this.auth,"internal-error")}}resolve(c){Jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const h_=new $(2e3,1e4);function Vl(){return(Vl=(0,D.Z)(function*(f,c,l){if((0,Te._isFirebaseServerApp)(f.app))return Promise.reject(At(f,"operation-not-supported-in-this-environment"));const g=In(f);an(f,c,Fr);const y=Rr(g,l);return new Cf(g,"signInViaPopup",c,y).executeNotNull()})).apply(this,arguments)}function Ct(){return(Ct=(0,D.Z)(function*(f,c,l){const g=(0,q.m9)(f);if((0,Te._isFirebaseServerApp)(g.auth.app))return Promise.reject(At(g.auth,"operation-not-supported-in-this-environment"));an(g.auth,c,Fr);const y=Rr(g.auth,l);return new Cf(g.auth,"reauthViaPopup",c,y,g).executeNotNull()})).apply(this,arguments)}function g_(){return(g_=(0,D.Z)(function*(f,c,l){const g=(0,q.m9)(f);an(g.auth,c,Fr);const y=Rr(g.auth,l);return new Cf(g.auth,"linkViaPopup",c,y,g).executeNotNull()})).apply(this,arguments)}let Cf=(()=>{class f extends d_{constructor(l,g,y,b,k){super(l,g,b,k),this.provider=y,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var l=this;return(0,D.Z)(function*(){const g=yield l.execute();return we(g,l.auth,"internal-error"),g})()}onExecution(){var l=this;return(0,D.Z)(function*(){Jt(1===l.filter.length,"Popup operations only handle one event");const g=Ja();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],g),l.authWindow.associatedEvent=g,l.resolver._originValidation(l.auth).catch(y=>{l.reject(y)}),l.resolver._isIframeWebStorageSupported(l.auth,y=>{y||l.reject(At(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(At(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const l=()=>{var g,y;this.pollId=null!==(y=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==y&&y.closed?window.setTimeout(()=>{this.pollId=null,this.reject(At(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,h_.get())};l()}}return f.currentPopupAction=null,f})();const GI="pendingRedirect",yc=new Map;class m_ extends d_{constructor(c,l,g=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,g),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,D.Z)(function*(){let g=yc.get(l.auth._key());if(!g){try{const b=(yield function tu(f,c){return Df.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;g=()=>Promise.resolve(b)}catch(y){g=()=>Promise.reject(y)}yc.set(l.auth._key(),g)}return l.bypassAuthState||yc.set(l.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,g=this;return(0,D.Z)(function*(){if("signInViaRedirect"===c.type)return l().call(g,c);if("unknown"!==c.type){if(c.eventId){const y=yield g.auth._redirectUserForId(c.eventId);if(y)return g.user=y,l().call(g,c);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,D.Z)(function*(){})()}cleanUp(){}}function Df(){return(Df=(0,D.Z)(function*(f,c){const l=fn(c),g=Ae(f);if(!(yield g._isAvailable()))return!1;const y="true"===(yield g._get(l));return yield g._remove(l),y})).apply(this,arguments)}function Af(f,c){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,D.Z)(function*(f,c){return Ae(f)._set(fn(c),"true")})).apply(this,arguments)}function Rf(f,c){yc.set(f._key(),c)}function Ae(f){return bt(f._redirectPersistence)}function fn(f){return Ze(GI,f.config.apiKey,f.name)}function WI(f,c,l){return function ZI(f,c,l){return Pr.apply(this,arguments)}(f,c,l)}function Pr(){return(Pr=(0,D.Z)(function*(f,c,l){if((0,Te._isFirebaseServerApp)(f.app))return Promise.reject(it(f));const g=In(f);an(f,c,Fr),yield g._initializationPromise;const y=Rr(g,l);return yield Af(y,g),y._openRedirect(g,c,"signInViaRedirect")})).apply(this,arguments)}function __(f,c,l){return function vc(f,c,l){return gs.apply(this,arguments)}(f,c,l)}function gs(){return(gs=(0,D.Z)(function*(f,c,l){const g=(0,q.m9)(f);if(an(g.auth,c,Fr),(0,Te._isFirebaseServerApp)(g.auth.app))return Promise.reject(it(g.auth));yield g.auth._initializationPromise;const y=Rr(g.auth,l);yield Af(y,g.auth);const b=yield Nf(g);return y._openRedirect(g.auth,c,"reauthViaRedirect",b)})).apply(this,arguments)}function Pf(f,c,l){return function Mf(f,c,l){return xf.apply(this,arguments)}(f,c,l)}function xf(){return(xf=(0,D.Z)(function*(f,c,l){const g=(0,q.m9)(f);an(g.auth,c,Fr),yield g.auth._initializationPromise;const y=Rr(g.auth,l);yield bl(!1,g,c.providerId),yield Af(y,g.auth);const b=yield Nf(g);return y._openRedirect(g.auth,c,"linkViaRedirect",b)})).apply(this,arguments)}function Ul(){return(Ul=(0,D.Z)(function*(f,c){return yield In(f)._initializationPromise,Lr(f,c,!1)})).apply(this,arguments)}function Lr(f,c){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,D.Z)(function*(f,c,l=!1){if((0,Te._isFirebaseServerApp)(f.app))return Promise.reject(it(f));const g=In(f),y=Rr(g,c),k=yield new m_(g,y,l).execute();return k&&!l&&(delete k.user._redirectEventId,yield g._persistUserIfCurrent(k.user),yield g._setRedirectUser(null,c)),k})).apply(this,arguments)}function Nf(f){return xo.apply(this,arguments)}function xo(){return(xo=(0,D.Z)(function*(f){const c=Ja(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class y_{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(c,g)&&(l=!0,this.sendToConsumer(c,g),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function KI(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return v_(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var g;if(c.error&&!v_(c)){const y=(null===(g=c.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";l.onError(At(this.auth,y))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const g=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&g}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Of(c))}saveEventToCache(c){this.cachedEventUids.add(Of(c)),this.lastProcessedEventTime=Date.now()}}function Of(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function v_({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function Bl(f){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,D.Z)(function*(f,c={}){return De(f,"GET","/v1/projects",c)})).apply(this,arguments)}const E_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kf=/^https?/;function jl(){return(jl=(0,D.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield Bl(f);for(const l of c)try{if(Ff(l))return}catch{}vt(f,"unauthorized-domain")})).apply(this,arguments)}function Ff(f){const c=Qn(),{protocol:l,hostname:g}=new URL(c);if(f.startsWith("chrome-extension://")){const k=new URL(f);return""===k.hostname&&""===g?"chrome-extension:"===l&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&k.hostname===g}if(!kf.test(l))return!1;if(E_.test(f))return g===f;const y=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+y+"|"+y+")$","i").test(g)}const I_=new $(3e4,6e4);function Lf(){const f=cr().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let l=0;l<f.CP.length;l++)f.CP[l]=null}let Ic=null;const YI=new $(5e3,15e3),XI="__/auth/iframe",gi="emulator/auth/iframe",da={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Jn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JI(f){const c=f.config;we(c.authDomain,f,"auth-domain-config-required");const l=c.emulator?G(c,gi):`https://${f.config.authDomain}/${XI}`,g={apiKey:c.apiKey,appName:f.name,v:Te.SDK_VERSION},y=Jn.get(f.config.apiHost);y&&(g.eid=y);const b=f._getFrameworks();return b.length&&(g.fw=b.join(",")),`${l}?${(0,q.xO)(g).slice(1)}`}function Uf(){return Uf=(0,D.Z)(function*(f){const c=yield function Vf(f){return Ic=Ic||function w_(f){return new Promise((c,l)=>{var g,y,b;function k(){Lf(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Lf(),l(At(f,"network-request-failed"))},timeout:I_.get()})}if(null!==(y=null===(g=cr().gapi)||void 0===g?void 0:g.iframes)&&void 0!==y&&y.Iframe)c(gapi.iframes.getContext());else{if(null===(b=cr().gapi)||void 0===b||!b.load){const Y=I("iframefcb");return cr()[Y]=()=>{gapi.load?k():l(At(f,"network-request-failed"))},ml(`${function x(){return Ga.gapiScript}()}?onload=${Y}`).catch(_e=>l(_e))}k()}}).catch(c=>{throw Ic=null,c})}(f),Ic}(f),l=cr().gapi;return we(l,f,"internal-error"),c.open({where:document.body,url:JI(f),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:da,dontclear:!0},g=>new Promise(function(){var y=(0,D.Z)(function*(b,k){yield g.restyle({setHideOnLeave:!1});const Y=At(f,"network-request-failed"),_e=cr().setTimeout(()=>{k(Y)},YI.get());function We(){cr().clearTimeout(_e),b(g)}g.ping(We).then(We,()=>{k(Y)})});return function(b,k){return y.apply(this,arguments)}}()))}),Uf.apply(this,arguments)}const tw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class C_{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Gl="__/auth/handler",Bf="emulator/auth/handler",D_=encodeURIComponent("fac");function ql(f,c,l,g,y,b){return jf.apply(this,arguments)}function jf(){return(jf=(0,D.Z)(function*(f,c,l,g,y,b){we(f.config.authDomain,f,"auth-domain-config-required"),we(f.config.apiKey,f,"invalid-api-key");const k={apiKey:f.config.apiKey,appName:f.name,authType:l,redirectUrl:g,v:Te.SDK_VERSION,eventId:y};if(c instanceof Fr){c.setDefaultLanguage(f.languageCode),k.providerId=c.providerId||"",(0,q.xb)(c.getCustomParameters())||(k.customParameters=JSON.stringify(c.getCustomParameters()));for(const[ot,at]of Object.entries(b||{}))k[ot]=at}if(c instanceof rn){const ot=c.getScopes().filter(at=>""!==at);ot.length>0&&(k.scopes=ot.join(","))}f.tenantId&&(k.tid=f.tenantId);const Y=k;for(const ot of Object.keys(Y))void 0===Y[ot]&&delete Y[ot];const _e=yield f._getAppCheckToken(),We=_e?`#${D_}=${encodeURIComponent(_e)}`:"";return`${function nu({config:f}){return f.emulator?G(f,Bf):`https://${f.authDomain}/${Gl}`}(f)}?${(0,q.xO)(Y).slice(1)}${We}`})).apply(this,arguments)}const ha="webStorageSupport",rw=class nw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sr,this._completeRedirectFn=Lr,this._overrideRedirectResult=Rf}_openPopup(c,l,g,y){var b=this;return(0,D.Z)(function*(){var k;Jt(null===(k=b.eventManagers[c._key()])||void 0===k?void 0:k.manager,"_initialize() not called before _openPopup()");const Y=yield ql(c,l,g,Qn(),y);return function Hl(f,c,l,g=500,y=600){const b=Math.max((window.screen.availHeight-y)/2,0).toString(),k=Math.max((window.screen.availWidth-g)/2,0).toString();let Y="";const _e=Object.assign(Object.assign({},tw),{width:g.toString(),height:y.toString(),top:b,left:k}),We=(0,q.z$)().toLowerCase();l&&(Y=bn(We)?"_blank":l),Cs(We)&&(c=c||"http://localhost",_e.scrollbars="yes");const ot=Object.entries(_e).reduce((Un,[_s,ed])=>`${Un}${_s}=${ed},`,"");if(function K(f=(0,q.z$)()){var c;return Ci(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(We)&&"_self"!==Y)return function zl(f,c){const l=document.createElement("a");l.href=f,l.target=c;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(g)}(c||"",Y),new C_(null);const at=window.open(c||"",Y,ot);we(at,f,"popup-blocked");try{at.focus()}catch{}return new C_(at)}(c,Y,Ja())})()}_openRedirect(c,l,g,y){var b=this;return(0,D.Z)(function*(){return yield b._originValidation(c),function Km(f){cr().location.href=f}(yield ql(c,l,g,Qn(),y)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:y,promise:b}=this.eventManagers[l];return y?Promise.resolve(y):(Jt(b,"If manager is not set, promise should be"),b)}const g=this.initAndGetManager(c);return this.eventManagers[l]={promise:g},g.catch(()=>{delete this.eventManagers[l]}),g}initAndGetManager(c){var l=this;return(0,D.Z)(function*(){const g=yield function ew(f){return Uf.apply(this,arguments)}(c),y=new y_(c);return g.register("authEvent",b=>(we(b?.authEvent,c,"invalid-auth-event"),{status:y.onEvent(b.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:y},l.iframes[c._key()]=g,y})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(ha,{type:ha},y=>{var b;const k=null===(b=y?.[0])||void 0===b?void 0:b[ha];void 0!==k&&l(!!k),vt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function QI(f){return jl.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return Me()||eo()||Ci()}};class $f{constructor(c){this.factorId=c}_process(c,l,g){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,g);case"signin":return this._finalizeSignIn(c,l.credential);default:return tn("unexpected MultiFactorSessionType")}}}class A_ extends $f{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new A_(c)}_finalizeEnroll(c,l,g){return function fS(f,c){return De(f,"POST","/v2/accounts/mfaEnrollment:finalize",oe(f,c))}(c,{idToken:l,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function r_(f,c){return De(f,"POST","/v2/accounts/mfaSignIn:finalize",oe(f,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let iw=(()=>{class f{constructor(){}static assertion(l){return A_._fromCredential(l)}}return f.FACTOR_ID="phone",f})();var iu="@firebase/auth";class wc{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,D.Z)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(g=>{c(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function qs(){return window}(0,q.Pz)("authIdTokenMaxAge"),function Mm(f){Ga=f}({loadJS:f=>new Promise((c,l)=>{const g=document.createElement("script");g.setAttribute("src",f),g.onload=c,g.onerror=y=>{const b=At("internal-error");b.customData=y,l(b)},g.type="text/javascript",g.charset="UTF-8",function aw(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Wl(f){(0,Te._registerComponent)(new rt.wA("auth",(c,{options:l})=>{const g=c.getProvider("app").getImmediate(),y=c.getProvider("heartbeat"),b=c.getProvider("app-check-internal"),{apiKey:k,authDomain:Y}=g.options;we(k&&!k.includes(":"),"invalid-api-key",{appName:g.name});const _e={apiKey:k,authDomain:Y,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xt(f)},We=new gl(g,y,b,_e);return function Le(f,c){const l=c?.persistence||[],g=(Array.isArray(l)?l:[l]).map(bt);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(g,c?.popupRedirectResolver)}(We,l),We},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,g)=>{c.getProvider("auth-internal").initialize()})),(0,Te._registerComponent)(new rt.wA("auth-internal",c=>{const l=In(c.getProvider("auth").getImmediate());return new wc(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Te.registerVersion)(iu,"1.7.4",function Hf(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(f)),(0,Te.registerVersion)(iu,"1.7.4","esm2017")}("Browser");function su(){return su=(0,D.Z)(function*(f,c,l){var g;const{BuildInfo:y}=qs();Jt(c.sessionId,"AuthEvent did not contain a session ID");const b=yield function uw(f){return ou.apply(this,arguments)}(c.sessionId),k={};return Ci()?k.ibi=y.packageName:cs()?k.apn=y.packageName:vt(f,"operation-not-supported-in-this-environment"),y.displayName&&(k.appDisplayName=y.displayName),k.sessionId=b,ql(f,l,c.type,void 0,null!==(g=c.eventId)&&void 0!==g?g:void 0,k)}),su.apply(this,arguments)}function Wf(){return(Wf=(0,D.Z)(function*(f){const{BuildInfo:c}=qs(),l={};Ci()?l.iosBundleId=c.packageName:cs()?l.androidPackageName=c.packageName:vt(f,"operation-not-supported-in-this-environment"),yield Bl(f,l)})).apply(this,arguments)}function Zl(){return(Zl=(0,D.Z)(function*(f,c,l){const{cordova:g}=qs();let y=()=>{};try{yield new Promise((b,k)=>{let Y=null;function _e(){var at;b();const Un=null===(at=g.plugins.browsertab)||void 0===at?void 0:at.close;"function"==typeof Un&&Un(),"function"==typeof l?.close&&l.close()}function We(){Y||(Y=window.setTimeout(()=>{k(At(f,"redirect-cancelled-by-user"))},2e3))}function ot(){"visible"===document?.visibilityState&&We()}c.addPassiveListener(_e),document.addEventListener("resume",We,!1),cs()&&document.addEventListener("visibilitychange",ot,!1),y=()=>{c.removePassiveListener(_e),document.removeEventListener("resume",We,!1),document.removeEventListener("visibilitychange",ot,!1),Y&&window.clearTimeout(Y)}})}finally{y()}})).apply(this,arguments)}function ou(){return(ou=(0,D.Z)(function*(f){const c=function fa(f){if(Jt(/[0-9a-zA-Z]+/.test(f),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(f);const c=new ArrayBuffer(f.length),l=new Uint8Array(c);for(let g=0;g<f.length;g++)l[g]=f.charCodeAt(g);return l}(f),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(y=>y.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class k_ extends y_{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,D.Z)(function*(){yield c.initPromise})()}}function L_(f){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,D.Z)(function*(f){const c=yield bc()._get(Zf(f));return c&&(yield bc()._remove(Zf(f))),c})).apply(this,arguments)}function Zr(){const f=[];for(let l=0;l<20;l++){const g=Math.floor(62*Math.random());f.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(g))}return f.join("")}function bc(){return bt(wr)}function Zf(f){return Ze("authEvent",f.config.apiKey,f.name)}function fo(f){if(!f?.includes("?"))return{};const[c,...l]=f.split("?");return(0,q.zd)(l.join("?"))}const U_=class uu{constructor(){this._redirectPersistence=Sr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Lr,this._overrideRedirectResult=Rf}_initialize(c){var l=this;return(0,D.Z)(function*(){const g=c._key();let y=l.eventManagers.get(g);return y||(y=new k_(c),l.eventManagers.set(g,y),l.attachCallbackListeners(c,y)),y})()}_openPopup(c){vt(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,g,y){var b=this;return(0,D.Z)(function*(){!function O_(f){var c,l,g,y,b,k,Y,_e,We,ot;const at=qs();we("function"==typeof(null===(c=at?.universalLinks)||void 0===c?void 0:c.subscribe),f,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),we(typeof(null===(l=at?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),we("function"==typeof(null===(b=null===(y=null===(g=at?.cordova)||void 0===g?void 0:g.plugins)||void 0===y?void 0:y.browsertab)||void 0===b?void 0:b.openUrl),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),we("function"==typeof(null===(_e=null===(Y=null===(k=at?.cordova)||void 0===k?void 0:k.plugins)||void 0===Y?void 0:Y.browsertab)||void 0===_e?void 0:_e.isAvailable),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),we("function"==typeof(null===(ot=null===(We=at?.cordova)||void 0===We?void 0:We.InAppBrowser)||void 0===ot?void 0:ot.open),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const k=yield b._initialize(c);yield k.initialized(),k.resetRedirect(),function qI(){yc.clear()}(),yield b._originValidation(c);const Y=function F_(f,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:Zr(),postBody:null,tenantId:f.tenantId,error:At(f,"no-auth-event")}}(c,g,y);yield function Tc(f,c){return bc()._set(Zf(f),c)}(c,Y);const _e=yield function M_(f,c,l){return su.apply(this,arguments)}(c,Y,l),We=yield function x_(f){const{cordova:c}=qs();return new Promise(l=>{c.plugins.browsertab.isAvailable(g=>{let y=null;g?c.plugins.browsertab.openUrl(f):y=c.InAppBrowser.open(f,function O(f=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}()?"_blank":"_system","location=yes"),l(y)})})}(_e);return function N_(f,c,l){return Zl.apply(this,arguments)}(c,k,We)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function qf(f){return Wf.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:g,handleOpenURL:y,BuildInfo:b}=qs(),k=setTimeout((0,D.Z)(function*(){yield L_(c),l.onEvent(Ql())}),500),Y=function(){var ot=(0,D.Z)(function*(at){clearTimeout(k);const Un=yield L_(c);let _s=null;Un&&at?.url&&(_s=function lw(f,c){var l,g;const y=function Kl(f){const c=fo(f),l=c.link?decodeURIComponent(c.link):void 0,g=fo(l).link,y=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return fo(y).link||y||g||l||f}(c);if(y.includes("/__/auth/callback")){const b=fo(y),k=b.firebaseError?function V_(f){try{return JSON.parse(f)}catch{return null}}(decodeURIComponent(b.firebaseError)):null,Y=null===(g=null===(l=k?.code)||void 0===l?void 0:l.split("auth/"))||void 0===g?void 0:g[1],_e=Y?At(Y):null;return _e?{type:f.type,eventId:f.eventId,tenantId:f.tenantId,error:_e,urlResponse:null,sessionId:null,postBody:null}:{type:f.type,eventId:f.eventId,tenantId:f.tenantId,sessionId:f.sessionId,urlResponse:y,postBody:null}}return null}(Un,at.url)),l.onEvent(_s||Ql())});return function(Un){return ot.apply(this,arguments)}}();typeof g<"u"&&"function"==typeof g.subscribe&&g.subscribe(null,Y);const _e=y,We=`${b.packageName.toLowerCase()}://`;qs().handleOpenURL=function(){var ot=(0,D.Z)(function*(at){if(at.toLowerCase().startsWith(We)&&Y({url:at}),"function"==typeof _e)try{_e(at)}catch(Un){console.error(Un)}});return function(at){return ot.apply(this,arguments)}}()}};function Ql(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:At("no-auth-event")}}function Yl(){var f;return(null===(f=self?.location)||void 0===f?void 0:f.protocol)||null}function hw(f=(0,q.z$)()){return!("file:"!==Yl()&&"ionic:"!==Yl()&&"capacitor:"!==Yl()||!f.toLowerCase().match(/iphone|ipad|ipod|android/))}function B_(){try{const f=self.localStorage,c=Ja();if(f)return f.setItem(c,"1"),f.removeItem(c),!function fw(f=(0,q.z$)()){return function AS(){return(0,q.w1)()&&11===document?.documentMode}()||function lu(f=(0,q.z$)()){return/Edge\/\d+/.test(f)}(f)}()||(0,q.hl)()}catch{return _r()&&(0,q.hl)()}return!1}function _r(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kf(){return(function CS(){return"http:"===Yl()||"https:"===Yl()}()||(0,q.ru)()||hw())&&!function DS(){return(0,q.b$)()||(0,q.UG)()}()&&B_()&&!_r()}function du(){return hw()&&typeof document<"u"}function Si(){return(Si=(0,D.Z)(function*(){return!!du()&&new Promise(f=>{const c=setTimeout(()=>{f(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),f(!0)})})})).apply(this,arguments)}const Ri={LOCAL:"local",NONE:"none",SESSION:"session"},Oo=we,fu="persistence";function j_(f){return Qf.apply(this,arguments)}function Qf(){return(Qf=(0,D.Z)(function*(f){yield f._initializationPromise;const c=Pi(),l=Ze(fu,f.config.apiKey,f.name);c&&c.setItem(l,f._getPersistence())})).apply(this,arguments)}function Pi(){var f;try{return(null===(f=function hu(){return typeof window<"u"?window:null}())||void 0===f?void 0:f.sessionStorage)||null}catch{return null}}const Yf=we;class Qi{constructor(){this.browserResolver=bt(rw),this.cordovaResolver=bt(U_),this.underlyingResolver=null,this._redirectPersistence=Sr,this._completeRedirectFn=Lr,this._overrideRedirectResult=Rf}_initialize(c){var l=this;return(0,D.Z)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,g,y){var b=this;return(0,D.Z)(function*(){return yield b.selectUnderlyingResolver(),b.assertedUnderlyingResolver._openPopup(c,l,g,y)})()}_openRedirect(c,l,g,y){var b=this;return(0,D.Z)(function*(){return yield b.selectUnderlyingResolver(),b.assertedUnderlyingResolver._openRedirect(c,l,g,y)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return du()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Yf(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,D.Z)(function*(){if(c.underlyingResolver)return;const l=yield function pw(){return Si.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function mw(f){return f.unwrap()}function _w(f){return H_(f)}function H_(f){const{_tokenResponse:c}=f instanceof q.ZR?f.customData:f;if(!c)return null;if(!(f instanceof q.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Gs.credentialFromResult(f);const l=c.providerId;if(!l||l===nt.PASSWORD)return null;let g;switch(l){case nt.GOOGLE:g=El;break;case nt.FACEBOOK:g=vl;break;case nt.GITHUB:g=tf;break;case nt.TWITTER:g=Il;break;default:const{oauthIdToken:y,oauthAccessToken:b,oauthTokenSecret:k,pendingToken:Y,nonce:_e}=c;return b||k||y||Y?Y?l.startsWith("saml.")?js._create(l,Y):hi._fromParams({providerId:l,signInMethod:l,pendingToken:Y,idToken:y,accessToken:b}):new so(l).credential({idToken:y,accessToken:b,rawNonce:_e}):null}return f instanceof q.ZR?g.credentialFromError(f):g.credentialFromResult(f)}function Mi(f,c){return c.catch(l=>{throw l instanceof q.ZR&&function yw(f,c){var l;const g=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new ep(f,function dS(f,c){var l;const g=(0,q.m9)(f),y=c;return we(c.customData.operationType,g,"argument-error"),we(null===(l=y.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,g,"argument-error"),Gm._fromError(g,y)}(f,c));else if(g){const y=H_(c),b=c;y&&(b.credential=y,b.tenantId=g.tenantId||void 0,b.email=g.email||void 0,b.phoneNumber=g.phoneNumber||void 0)}}(f,l),l}).then(l=>{const y=l.user;return{operationType:l.operationType,credential:_w(l),additionalUserInfo:gf(l),user:ms.getOrCreate(y)}})}function Xf(f,c){return Jf.apply(this,arguments)}function Jf(){return(Jf=(0,D.Z)(function*(f,c){const l=yield c;return{verificationId:l.verificationId,confirm:g=>Mi(f,l.confirm(g))}})).apply(this,arguments)}class ep{constructor(c,l){this.resolver=l,this.auth=function $_(f){return f.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Mi(mw(this.auth),this.resolver.resolveSignIn(c))}}class ms{constructor(c){this._delegate=c,this.multiFactor=function mS(f){const c=(0,q.m9)(f);return xl.has(c)||xl.set(c,Ml._fromUser(c)),xl.get(c)}(c)}static getOrCreate(c){return ms.USER_MAP.has(c)||ms.USER_MAP.set(c,new ms(c)),ms.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,D.Z)(function*(){return Mi(l.auth,Bm(l._delegate,c))})()}linkWithPhoneNumber(c,l){var g=this;return(0,D.Z)(function*(){return Xf(g.auth,function l_(f,c,l){return kl.apply(this,arguments)}(g._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,D.Z)(function*(){return Mi(l.auth,function p_(f,c,l){return g_.apply(this,arguments)}(l._delegate,c,Qi))})()}linkWithRedirect(c){var l=this;return(0,D.Z)(function*(){return yield j_(In(l.auth)),Pf(l._delegate,c,Qi)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,D.Z)(function*(){return Mi(l.auth,jm(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return Xf(this.auth,function Vn(f,c,l){return _c.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return Mi(this.auth,function zI(f,c,l){return Ct.apply(this,arguments)}(this._delegate,c,Qi))}reauthenticateWithRedirect(c){var l=this;return(0,D.Z)(function*(){return yield j_(In(l.auth)),__(l._delegate,c,Qi)})()}sendEmailVerification(c){return function $s(f,c){return aa.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,D.Z)(function*(){return yield function Ds(f,c){return af.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function aS(f,c){const l=(0,q.m9)(f);return(0,Te._isFirebaseServerApp)(l.auth.app)?Promise.reject(it(l.auth)):pf(l,c,null)}(this._delegate,c)}updatePassword(c){return function ff(f,c){return pf((0,q.m9)(f),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function jI(f,c){return Fl.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function cc(f,c){return Qt.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function Hm(f,c,l){return Hs.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ms.USER_MAP=new WeakMap;const Cc=we;let pu=(()=>{class f{constructor(l,g){if(this.app=l,g.isInitialized())return this._delegate=g.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:y}=l.options;Cc(y,"invalid-api-key",{appName:l.name}),Cc(y,"invalid-api-key",{appName:l.name});const b=typeof window<"u"?Qi:void 0;this._delegate=g.initialize({options:{persistence:Xl(y,l.name),popupRedirectResolver:b}}),this._delegate._updateErrorMap(Gt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ms.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,g){!function nn(f,c,l){const g=In(f);we(g._canInitEmulator,g,"emulator-config-failed"),we(/^https?:\/\//.test(c),g,"invalid-emulator-scheme");const y=!!l?.disableWarnings,b=Ht(c),{host:k,port:Y}=function An(f){const c=Ht(f),l=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!l)return{host:"",port:null};const g=l[2].split("@").pop()||"",y=/^(\[[^\]]+\])(:|$)/.exec(g);if(y){const b=y[1];return{host:b,port:hn(g.substr(b.length+1))}}{const[b,k]=g.split(":");return{host:b,port:hn(k)}}}(c);g.config.emulator={url:`${b}//${k}${null===Y?"":`:${Y}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:k,port:Y,protocol:b.replace(":",""),options:Object.freeze({disableWarnings:y})}),y||function or(){function f(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}(this._delegate,l,g)}applyActionCode(l){return function ur(f,c){return Je.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return Vt(this._delegate,l)}confirmPasswordReset(l,g){return function SI(f,c,l){return hf.apply(this,arguments)}(this._delegate,l,g)}createUserWithEmailAndPassword(l,g){var y=this;return(0,D.Z)(function*(){return Mi(y._delegate,function si(f,c,l){return Do.apply(this,arguments)}(y._delegate,l,g))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function uc(f,c){return Ro.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function Lt(f,c){const l=Wi.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,D.Z)(function*(){Cc(Kf(),l._delegate,"operation-not-supported-in-this-environment");const g=yield function ES(f,c){return Ul.apply(this,arguments)}(l._delegate,Qi);return g?Mi(l._delegate,Promise.resolve(g)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function cu(f,c){In(f)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,g,y){const{next:b,error:k,complete:Y}=z_(l,g,y);return this._delegate.onAuthStateChanged(b,k,Y)}onIdTokenChanged(l,g,y){const{next:b,error:k,complete:Y}=z_(l,g,y);return this._delegate.onIdTokenChanged(b,k,Y)}sendSignInLinkToEmail(l,g){return function Ao(f,c,l){return So.apply(this,arguments)}(this._delegate,l,g)}sendPasswordResetEmail(l,g){return function $m(f,c,l){return Za.apply(this,arguments)}(this._delegate,l,g||void 0)}setPersistence(l){var g=this;return(0,D.Z)(function*(){let y;switch(function gw(f,c){Oo(Object.values(Ri).includes(c),f,"invalid-persistence-type"),(0,q.b$)()?Oo(c!==Ri.SESSION,f,"unsupported-persistence-type"):(0,q.UG)()?Oo(c===Ri.NONE,f,"unsupported-persistence-type"):_r()?Oo(c===Ri.NONE||c===Ri.LOCAL&&(0,q.hl)(),f,"unsupported-persistence-type"):Oo(c===Ri.NONE||B_(),f,"unsupported-persistence-type")}(g._delegate,l),l){case Ri.SESSION:y=Sr;break;case Ri.LOCAL:y=(yield bt(eu)._isAvailable())?eu:wr;break;case Ri.NONE:y=sr;break;default:return vt("argument-error",{appName:g._delegate.name})}return g._delegate.setPersistence(y)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return Mi(this._delegate,function km(f){return sf.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return Mi(this._delegate,Dl(this._delegate,l))}signInWithCustomToken(l){return Mi(this._delegate,function Mt(f,c){return ii.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,g){return Mi(this._delegate,function mr(f,c,l){return(0,Te._isFirebaseServerApp)(f.app)?Promise.reject(it(f)):Dl((0,q.m9)(f),Zi.credential(c,l)).catch(function(){var g=(0,D.Z)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&fi(f),y});return function(y){return g.apply(this,arguments)}}())}(this._delegate,l,g))}signInWithEmailLink(l,g){return Mi(this._delegate,function ac(f,c,l){return Rl.apply(this,arguments)}(this._delegate,l,g))}signInWithPhoneNumber(l,g){return Xf(this._delegate,function BI(f,c,l){return ps.apply(this,arguments)}(this._delegate,l,g))}signInWithPopup(l){var g=this;return(0,D.Z)(function*(){return Cc(Kf(),g._delegate,"operation-not-supported-in-this-environment"),Mi(g._delegate,function f_(f,c,l){return Vl.apply(this,arguments)}(g._delegate,l,Qi))})()}signInWithRedirect(l){var g=this;return(0,D.Z)(function*(){return Cc(Kf(),g._delegate,"operation-not-supported-in-this-environment"),yield j_(g._delegate),WI(g._delegate,l,Qi)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function As(f,c){return oa.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return f.Persistence=Ri,f})();function z_(f,c,l){let g=f;"function"!=typeof f&&({next:g,error:c,complete:l}=f);const y=g;return{next:k=>y(k&&ms.getOrCreate(k)),error:c,complete:l}}function Xl(f,c){const l=function SS(f,c){const l=Pi();if(!l)return[];const g=Ze(fu,f,c);switch(l.getItem(g)){case Ri.NONE:return[sr];case Ri.LOCAL:return[eu,Sr];case Ri.SESSION:return[Sr];default:return[]}}(f,c);if(typeof self<"u"&&!l.includes(eu)&&l.push(eu),typeof window<"u")for(const g of[wr,Sr])l.includes(g)||l.push(g);return l.includes(sr)||l.push(sr),l}class tp{constructor(){this.providerId="phone",this._delegate=new Gs(mw(Ve.Z.auth()))}static credential(c,l){return Gs.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}tp.PHONE_SIGN_IN_METHOD=Gs.PHONE_SIGN_IN_METHOD,tp.PROVIDER_ID=Gs.PROVIDER_ID;const G_=we;class np{constructor(c,l,g=Ve.Z.app()){var y;G_(null===(y=g.options)||void 0===y?void 0:y.apiKey,"invalid-api-key",{appName:g.name}),this._delegate=new c_(g.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function q_(f){f.INTERNAL.registerComponent(new rt.wA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),g=c.getProvider("auth");return new pu(l,g)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Zi,FacebookAuthProvider:vl,GithubAuthProvider:tf,GoogleAuthProvider:El,OAuthProvider:so,SAMLAuthProvider:sc,PhoneAuthProvider:tp,PhoneMultiFactorGenerator:iw,RecaptchaVerifier:np,TwitterAuthProvider:Il,Auth:pu,AuthCredential:Hn,Error:q.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),f.registerVersion("@firebase/auth-compat","0.5.9")}(Ve.Z)},861:(lt,dt,ye)=>{"use strict";function D(Te,q,je,tt,rt,yt,nt){try{var fe=Te[yt](nt),xe=fe.value}catch(Ye){return void je(Ye)}fe.done?q(xe):Promise.resolve(xe).then(tt,rt)}function Ve(Te){return function(){var q=this,je=arguments;return new Promise(function(tt,rt){var yt=Te.apply(q,je);function nt(xe){D(yt,tt,rt,nt,fe,"next",xe)}function fe(xe){D(yt,tt,rt,nt,fe,"throw",xe)}nt(void 0)})}}ye.d(dt,{Z:()=>Ve})},582:(lt,dt,ye)=>{"use strict";function q($,G){var te={};for(var ce in $)Object.prototype.hasOwnProperty.call($,ce)&&G.indexOf(ce)<0&&(te[ce]=$[ce]);if(null!=$&&"function"==typeof Object.getOwnPropertySymbols){var Ce=0;for(ce=Object.getOwnPropertySymbols($);Ce<ce.length;Ce++)G.indexOf(ce[Ce])<0&&Object.prototype.propertyIsEnumerable.call($,ce[Ce])&&(te[ce[Ce]]=$[ce[Ce]])}return te}function Ye($,G,te,ce){return new(te||(te=Promise))(function(oe,De){function kt(Pt){try{st(ce.next(Pt))}catch(Dn){De(Dn)}}function ze(Pt){try{st(ce.throw(Pt))}catch(Dn){De(Dn)}}function st(Pt){Pt.done?oe(Pt.value):function Ce(oe){return oe instanceof te?oe:new te(function(De){De(oe)})}(Pt.value).then(kt,ze)}st((ce=ce.apply($,G||[])).next())})}function on($){return this instanceof on?(this.v=$,this):new on($)}function vt($,G,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,ce=te.apply($,G||[]),oe=[];return Ce={},kt("next"),kt("throw"),kt("return",function De(mn){return function(Yn){return Promise.resolve(Yn).then(mn,Dn)}}),Ce[Symbol.asyncIterator]=function(){return this},Ce;function kt(mn,Yn){ce[mn]&&(Ce[mn]=function(Fn){return new Promise(function(gr,Er){oe.push([mn,Fn,gr,Er])>1||ze(mn,Fn)})},Yn&&(Ce[mn]=Yn(Ce[mn])))}function ze(mn,Yn){try{!function st(mn){mn.value instanceof on?Promise.resolve(mn.value.v).then(Pt,Dn):Xr(oe[0][2],mn)}(ce[mn](Yn))}catch(Fn){Xr(oe[0][3],Fn)}}function Pt(mn){ze("next",mn)}function Dn(mn){ze("throw",mn)}function Xr(mn,Yn){mn(Yn),oe.shift(),oe.length&&ze(oe[0][0],oe[0][1])}}function gn($){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,G=$[Symbol.asyncIterator];return G?G.call($):($=function wt($){var G="function"==typeof Symbol&&Symbol.iterator,te=G&&$[G],ce=0;if(te)return te.call($);if($&&"number"==typeof $.length)return{next:function(){return $&&ce>=$.length&&($=void 0),{value:$&&$[ce++],done:!$}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")}($),te={},ce("next"),ce("throw"),ce("return"),te[Symbol.asyncIterator]=function(){return this},te);function ce(oe){te[oe]=$[oe]&&function(De){return new Promise(function(kt,ze){!function Ce(oe,De,kt,ze){Promise.resolve(ze).then(function(st){oe({value:st,done:kt})},De)}(kt,ze,(De=$[oe](De)).done,De.value)})}}}ye.d(dt,{FC:()=>vt,KL:()=>gn,_T:()=>q,mG:()=>Ye,qq:()=>on}),"function"==typeof SuppressedError&&SuppressedError},547:lt=>{"use strict";lt.exports={i8:"5.1.0"}}},lt=>{lt(lt.s=521)}]);